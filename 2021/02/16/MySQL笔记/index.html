

<!DOCTYPE html>
<html lang="en" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/fluid.png">
  <link rel="icon" href="/img/fluid.png">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="ZSH">
  <meta name="keywords" content="">
  
    <meta name="description" content="MySQL笔记">
<meta property="og:type" content="article">
<meta property="og:title" content="MySQL学习笔记">
<meta property="og:url" content="http://yoursite.com/2021/02/16/MySQL%E7%AC%94%E8%AE%B0/index.html">
<meta property="og:site_name" content="ZSH">
<meta property="og:description" content="MySQL笔记">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2021-02-16T14:11:30.000Z">
<meta property="article:modified_time" content="2021-09-14T07:40:31.655Z">
<meta property="article:author" content="ZSH">
<meta property="article:tag" content="MySql">
<meta name="twitter:card" content="summary_large_image">
  
  
  
  <title>MySQL学习笔记 - ZSH</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css" />



<!-- 主题依赖的图标库，不要自行修改 -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_hj8rtnfg7um.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_lbnruvf0jn.css">


<link  rel="stylesheet" href="/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css" />
  




  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"yoursite.com","root":"/","version":"1.9.2","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false,"scope":[]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":true,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"right","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":false,"follow_dnt":true,"baidu":null,"google":null,"gtag":null,"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname","ignore_local":false}},"search_path":"/local-search.xml"};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
  


  
<meta name="generator" content="Hexo 6.2.0"><link rel="alternate" href="/atom.xml" title="ZSH" type="application/atom+xml">
</head>


<body>
  

  <header>
    

<div class="header-inner" style="height: 70vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>Fluid</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                Home
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/">
                <i class="iconfont icon-archive-fill"></i>
                Archives
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/">
                <i class="iconfont icon-category-fill"></i>
                Categories
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/">
                <i class="iconfont icon-tags-fill"></i>
                Tags
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/">
                <i class="iconfont icon-user-fill"></i>
                About
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              &nbsp;<i class="iconfont icon-search"></i>&nbsp;
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">&nbsp;<i
                class="iconfont icon-dark" id="color-toggle-icon"></i>&nbsp;</a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('/img/default.png') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle" data-typed-text="MySQL学习笔记"></span>
          
        </div>

        
          
  <div class="mt-3">
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2021-02-16 22:11" pubdate>
          February 16, 2021 pm
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          55k words
        
      </span>
    

    
      <span class="post-meta mr-2">
        <i class="iconfont icon-clock-fill"></i>
        
        
        
          456 mins
        
      </span>
    

    
    
  </div>


        
      </div>

      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      

    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <!-- SEO header -->
            <h1 style="display: none">MySQL学习笔记</h1>
            
            
              <div class="markdown-body">
                
                <h1 id="MySQL笔记"><a href="#MySQL笔记" class="headerlink" title="MySQL笔记"></a>MySQL笔记</h1><span id="more"></span>

<h3 id="1、sql、DB、DBMS？"><a href="#1、sql、DB、DBMS？" class="headerlink" title="1、sql、DB、DBMS？"></a>1、sql、DB、DBMS？</h3><pre><code class="hljs">DB: 
    DataBase（数据库，数据库实际上在硬盘上以文件的形式存在）
DBMS: 
    DataBase Management System（数据库管理系统，常见的有：MySQL Oracle DB2 Sybase SqlServer...）

SQL: 
    结构化查询语言，是一门标准通用的语言。标准的sql适合于所有的数据库产品。
    SQL属于高级语言。只要能看懂英语单词的，写出来的sql语句，可以读懂什么意思。
    SQL语句在执行的时候，实际上内部也会先进行编译，然后再执行sql。（sql语句的编译由DBMS完成。）

DBMS负责执行sql语句，通过执行sql语句来操作DB当中的数据。
DBMS -(执行)-&gt; SQL -(操作)-&gt; DB
</code></pre>
<h3 id="2、什么是表？"><a href="#2、什么是表？" class="headerlink" title="2、什么是表？"></a>2、什么是表？</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs mysql">表：table是数据库的基本组成单元，所有的数据都以表格的形式组织，目的是可读性强。<br>一个表包括行和列：<br>	行：被称为 数据/记录(data)<br>	列：被称为 字段(column)<br>	<br>学号(int)	姓名(varchar)	年龄(int)<br>------------------------------------<br>110			张三				20<br>120			李四				21<br><br>每一个字段应该包括哪些属性？<br>	字段名（学号）、数据类型（int）、相关的约束（是否缺省）。<br></code></pre></td></tr></table></figure>



<h3 id="3、SQL语句分类"><a href="#3、SQL语句分类" class="headerlink" title="3、SQL语句分类"></a>3、SQL语句分类</h3><p>​	DQL（数据查询语言）: 查询语句，凡是<code>select</code>语句都是DQL。<br>​	DML（数据操作语言）：<code>insert delete update</code>，对<strong>表当中的数据</strong>进行增删改。<br>​	DDL（数据定义语言）：<code>create drop alter</code>，对<strong>表结构</strong>的增删改。<br>​	TCL（事务控制语言）：<code>commit</code>提交事务，<code>rollback</code> 回滚事务。(TCL中的T是Transaction)<br>​	DCL（数据控制语言）: <code>grant</code>授权、<code>revoke</code>撤销权限等。</p>
<h3 id="4、MySQL命令"><a href="#4、MySQL命令" class="headerlink" title="4、MySQL命令"></a>4、MySQL命令</h3><h4 id="1、导入数据"><a href="#1、导入数据" class="headerlink" title="1、导入数据"></a>1、导入数据</h4><p>​	第一步：登录mysql数据库管理系统</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">dos命令窗口：<br>	mysql -uroot -p333<br></code></pre></td></tr></table></figure>
<p>​	第二步：查看有哪些数据库</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs mysql">show databases; (这个不是SQL语句，属于MySQL的命令。)<br>+--------------------+<br>| Database           |<br>+--------------------+<br>| information_schema |<br>| mysql              |<br>| performance_schema |<br>| test               |<br>+--------------------+<br></code></pre></td></tr></table></figure>
<p>​	第三步：创建属于我们自己的数据库</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mysql">create database bjpowernode; (这个不是SQL语句，属于MySQL的命令。)<br></code></pre></td></tr></table></figure>
<p>​	第四步：使用bjpowernode数据</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mysql">use bjpowernode; (这个不是SQL语句，属于MySQL的命令。)<br></code></pre></td></tr></table></figure>
<p>第五步：查看当前使用的数据库中有哪些表？</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mysql">show tables; (这个不是SQL语句，属于MySQL的命令。)<br></code></pre></td></tr></table></figure>
<p>​	第六步：初始化数据</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs mysql">mysql&gt; source D:\course\05-MySQL\resources\bjpowernode.sql<br>注意：数据初始化完成之后，有三张表：<br>+-----------------------+<br>| Tables_in_bjpowernode |<br>+-----------------------+<br>| dept                  |<br>| emp                   |<br>| salgrade              |<br>+-----------------------+<br></code></pre></td></tr></table></figure>

<h4 id="2、sql脚本"><a href="#2、sql脚本" class="headerlink" title="2、sql脚本"></a>2、sql脚本</h4><p>bjpowernode.sql，这个文件以sql结尾，这样的文件被称为“sql脚本”。什么是sql脚本呢？</p>
<p>​	当一个文件的扩展名是.sql，并且该文件中编写了大量的sql语句，我们称这样的文件为sql脚本。<br>​	注意：直接使用source命令可以执行sql脚本。<br>​	sql脚本中的数据量太大的时候，无法打开，请使用source命令完成初始化。</p>
<h4 id="3、删除数据库"><a href="#3、删除数据库" class="headerlink" title="3、删除数据库"></a>3、删除数据库</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mysql">drop database bjpowernode;<br></code></pre></td></tr></table></figure>

<h4 id="4、查看表结构："><a href="#4、查看表结构：" class="headerlink" title="4、查看表结构："></a>4、查看表结构：</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs mysql">mysql&gt; use bjpowernode;<br>mysql&gt; show tables;<br>+-----------------------+<br>| Tables_in_bjpowernode |<br>+-----------------------+<br>| dept                  |   (部门表)<br>| emp                   |   (员工表)<br>| salgrade              |   (工资等级表)<br>+-----------------------+<br><br>mysql&gt; desc dept;  #查看表结构(部门表)<br>+--------+-------------+------+-----+---------+-------+<br>| Field  | Type        | Null | Key | Default | Extra |<br>+--------+-------------+------+-----+---------+-------+<br>| DEPTNO | int(2)      | NO   | PRI | NULL    |       |		部门编号<br>| DNAME  | varchar(14) | YES  |     | NULL    |       |		部门名称<br>| LOC    | varchar(13) | YES  |     | NULL    |       |		部门位置<br>+--------+-------------+------+-----+---------+-------+<br></code></pre></td></tr></table></figure>

<h4 id="5、表中的数据？"><a href="#5、表中的数据？" class="headerlink" title="5、表中的数据？"></a>5、表中的数据？</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><code class="hljs mysql">mysql&gt; select * from emp;#查看表中数据(部门表)<br>+-------+--------+-----------+------+------------+---------+---------+--------+<br>| EMPNO | ENAME  | JOB       | MGR  | HIREDATE   | SAL     | COMM    | DEPTNO |<br>+-------+--------+-----------+------+------------+---------+---------+--------+<br>|  7369 | SMITH  | CLERK     | 7902 | 1980-12-17 |  800.00 |    NULL |     20 |<br>|  7499 | ALLEN  | SALESMAN  | 7698 | 1981-02-20 | 1600.00 |  300.00 |     30 |<br>|  7521 | WARD   | SALESMAN  | 7698 | 1981-02-22 | 1250.00 |  500.00 |     30 |<br>|  7566 | JONES  | MANAGER   | 7839 | 1981-04-02 | 2975.00 |    NULL |     20 |<br>|  7654 | MARTIN | SALESMAN  | 7698 | 1981-09-28 | 1250.00 | 1400.00 |     30 |<br>|  7698 | BLAKE  | MANAGER   | 7839 | 1981-05-01 | 2850.00 |    NULL |     30 |<br>|  7782 | CLARK  | MANAGER   | 7839 | 1981-06-09 | 2450.00 |    NULL |     10 |<br>|  7788 | SCOTT  | ANALYST   | 7566 | 1987-04-19 | 3000.00 |    NULL |     20 |<br>|  7839 | KING   | PRESIDENT | NULL | 1981-11-17 | 5000.00 |    NULL |     10 |<br>|  7844 | TURNER | SALESMAN  | 7698 | 1981-09-08 | 1500.00 |    0.00 |     30 |<br>|  7876 | ADAMS  | CLERK     | 7788 | 1987-05-23 | 1100.00 |    NULL |     20 |<br>|  7900 | JAMES  | CLERK     | 7698 | 1981-12-03 |  950.00 |    NULL |     30 |<br>|  7902 | FORD   | ANALYST   | 7566 | 1981-12-03 | 3000.00 |    NULL |     20 |<br>|  7934 | MILLER | CLERK     | 7782 | 1982-01-23 | 1300.00 |    NULL |     10 |<br>+-------+--------+-----------+------+------------+---------+---------+--------+<br><br>mysql&gt; select * from dept;#查看表中数据(员工表)<br>+--------+------------+----------+<br>| DEPTNO | DNAME      | LOC      |<br>+--------+------------+----------+<br>|     10 | ACCOUNTING | NEW YORK |<br>|     20 | RESEARCH   | DALLAS   |<br>|     30 | SALES      | CHICAGO  |<br>|     40 | OPERATIONS | BOSTON   |<br>+--------+------------+----------+<br><br>mysql&gt; select * from salgrade;#查看表中数据(工资等级表)<br>+-------+-------+-------+<br>| GRADE | LOSAL | HISAL |<br>+-------+-------+-------+<br>|     1 |   700 |  1200 |<br>|     2 |  1201 |  1400 |<br>|     3 |  1401 |  2000 |<br>|     4 |  2001 |  3000 |<br>|     5 |  3001 |  9999 |<br>+-------+-------+-------+<br></code></pre></td></tr></table></figure>

<h4 id="6、常用命令？"><a href="#6、常用命令？" class="headerlink" title="6、常用命令？"></a>6、常用命令？</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs mysql">mysql&gt; select database(); #查看当前使用的是哪个数据库<br>+-------------+<br>| database()  |<br>+-------------+<br>| bjpowernode |<br>+-------------+<br><br>mysql&gt; select version(); #查看mysql的版本号。<br>+-----------+<br>| version() |<br>+-----------+<br>| 5.5.62    |<br>+-----------+<br><br>\c   #mysql命令，结束一条语句。<br>exit #mysql命令，退出mysql。<br></code></pre></td></tr></table></figure>

<h4 id="7、查看创建表的语句："><a href="#7、查看创建表的语句：" class="headerlink" title="7、查看创建表的语句："></a>7、查看创建表的语句：</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mysql">show create table emp;<br></code></pre></td></tr></table></figure>

<p>​	</p>
<h3 id="5、SQL语句"><a href="#5、SQL语句" class="headerlink" title="5、SQL语句"></a>5、SQL语句</h3><p>sql语句不区分大小写，但是表中的数据是有大小写区分的，虽然mysql中用小写也能查询出大写的数据，但是对于Oracle来说是严格区分大小写的，用小写查不出大写数据。相对来说MySQL的语法是松散的不那么严格</p>
<h4 id="5-1、数据查询语句（DQL）"><a href="#5-1、数据查询语句（DQL）" class="headerlink" title="5.1、数据查询语句（DQL）"></a>5.1、数据查询语句（DQL）</h4><h5 id="1、简单的查询语句"><a href="#1、简单的查询语句" class="headerlink" title="1、简单的查询语句"></a>1、简单的查询语句</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><code class="hljs mysql">语法格式：<br>	select 字段名1,字段名2,字段名3,.... from 表名;<br><br>提示：<br>	1、任何一条sql语句以“;”结尾。<br>	2、sql语句不区分大小写。<br><br>查询员工的年薪？（字段可以参与数学运算。）<br>select ename,sal * 12 from emp;<br>	+--------+----------+<br>	| ename  | sal * 12 |<br>	+--------+----------+<br>	| SMITH  |  9600.00 |<br>	| ALLEN  | 19200.00 |<br>	| WARD   | 15000.00 |<br>	| JONES  | 35700.00 |<br>	| MARTIN | 15000.00 |<br>	| BLAKE  | 34200.00 |<br>	| CLARK  | 29400.00 |<br>	| SCOTT  | 36000.00 |<br>	| KING   | 60000.00 |<br>	| TURNER | 18000.00 |<br>	| ADAMS  | 13200.00 |<br>	| JAMES  | 11400.00 |<br>	| FORD   | 36000.00 |<br>	| MILLER | 15600.00 |<br>	+--------+----------+<br><br>给查询结果的列重命名？<br>select ename,sal * 12 as yearsal from emp;<br><br>别名中有中文？<br>select ename,sal * 12 as 年薪 from emp; # 错误<br>select ename,sal * 12 as &#x27;年薪&#x27; from emp;<br>#可以使用中文但是必须用字符串表示，sql中的字符串使用单引号虽然在mysql当中可以使用双引号但是为了通用性要使用单引号<br>#注意：标准sql语句中要求字符串使用单引号括起来。虽然mysql支持双引号，尽量别用。<br>	+--------+----------+<br>	| ename  | 年薪        |<br>	+--------+----------+<br>	| SMITH  |  9600.00 |<br>	| ALLEN  | 19200.00 |<br>	| WARD   | 15000.00 |<br>	| JONES  | 35700.00 |<br>	| MARTIN | 15000.00 |<br>	| BLAKE  | 34200.00 |<br>	| CLARK  | 29400.00 |<br>	| SCOTT  | 36000.00 |<br>	| KING   | 60000.00 |<br>	| TURNER | 18000.00 |<br>	| ADAMS  | 13200.00 |<br>	| JAMES  | 11400.00 |<br>	| FORD   | 36000.00 |<br>	| MILLER | 15600.00 |<br>	+--------+----------+<br><br>as关键字可以省略？<br>mysql&gt; select empno,ename,sal * 12 yearsal from emp;<br>	+-------+--------+----------+<br>	| empno | ename  | yearsal  |<br>	+-------+--------+----------+<br>	|  7369 | SMITH  |  9600.00 |<br>	|  7499 | ALLEN  | 19200.00 |<br>	|  7521 | WARD   | 15000.00 |<br>	|  7566 | JONES  | 35700.00 |<br>	|  7654 | MARTIN | 15000.00 |<br>	|  7698 | BLAKE  | 34200.00 |<br>	|  7782 | CLARK  | 29400.00 |<br>	|  7788 | SCOTT  | 36000.00 |<br>	|  7839 | KING   | 60000.00 |<br>	|  7844 | TURNER | 18000.00 |<br>	|  7876 | ADAMS  | 13200.00 |<br>	|  7900 | JAMES  | 11400.00 |<br>	|  7902 | FORD   | 36000.00 |<br>	|  7934 | MILLER | 15600.00 |<br>	+-------+--------+----------+<br><br>查询所有字段？<br>select * from emp; // 实际开发中不建议使用*，效率较低。<br></code></pre></td></tr></table></figure>

<h5 id="2、条件查询。"><a href="#2、条件查询。" class="headerlink" title="2、条件查询。"></a>2、条件查询。</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br></pre></td><td class="code"><pre><code class="hljs mysql">语法格式：<br>select 字段名1,字段名2,... from 表名 where 条件;<br>执行顺序：先 from，然后 where，最后 select<br><br>查询工资等于5000的员工姓名？<br>select ename from emp where sal = 5000;<br>	+-------+<br>	| ename |<br>	+-------+<br>	| KING  |<br>	+-------+<br>	<br>查询SMITH的工资？<br>select sal from emp where ename = &#x27;SMITH&#x27;;#字符串使用单引号括起来。SMITH是一个varchar字符串<br>	+--------+<br>	| sal    |<br>	+--------+<br>	| 800.00 |<br>	+--------+<br>找出工资高于3000的员工？<br>select ename,sal from emp where sal &gt; 3000;<br>select ename,sal from emp where sal &gt;= 3000;<br>select ename,sal from emp where sal &lt; 3000;<br>select ename,sal from emp where sal &lt;= 3000;<br><br>找出工资不等于3000的？<br>select ename,sal from emp where sal &lt;&gt; 3000;<br>select ename,sal from emp where sal != 3000;<br><br>找出工资在1100和3000之间的员工，包括1100和3000？<br>select ename,sal from emp where sal &gt;= 1100 and sal &lt;= 3000;<br>select ename,sal from emp where sal between 1100 and 3000; # between...and...是闭区间 [1100 ~ 3000]<br>select ename,sal from emp where sal between 3000 and 1100; # 查询不到任何数据<br>between and #在使用的时候必须左小右大。<br>between and #除了可以使用在数字方面之外，还可以使用在字符串方面。<br>select ename from emp where ename between &#x27;A&#x27; and &#x27;C&#x27;;<br>	+-------+<br>	| ename |<br>	+-------+<br>	| ALLEN |<br>	| BLAKE |<br>	| ADAMS |<br>	+-------+<br>select ename from emp where ename between &#x27;A&#x27; and &#x27;D&#x27;; #左闭右开。<br><br>找出哪些人津贴为NULL？<br>	在数据库当中NULL不是一个值，代表什么也没有，为空。<br>	空不是一个值，不能用等号衡量。<br>	必须使用 is null或者is not null<br>select ename,sal,comm from emp where comm is null;<br>		+--------+---------+------+<br>		| ename  | sal     | comm |<br>		+--------+---------+------+<br>		| SMITH  |  800.00 | NULL |<br>		| JONES  | 2975.00 | NULL |<br>		| BLAKE  | 2850.00 | NULL |<br>		| CLARK  | 2450.00 | NULL |<br>		| SCOTT  | 3000.00 | NULL |<br>		| KING   | 5000.00 | NULL |<br>		| ADAMS  | 1100.00 | NULL |<br>		| JAMES  |  950.00 | NULL |<br>		| FORD   | 3000.00 | NULL |<br>		| MILLER | 1300.00 | NULL |<br>		+--------+---------+------+<br>select ename,sal,comm from emp where comm = null;#如果使用=查询null那么结果一定是空<br>		Empty set (0.00 sec)<br><br>找出哪些人津贴不为NULL？<br>select ename,sal,comm from emp where comm is not null;<br>		+--------+---------+---------+<br>		| ename  | sal     | comm    |<br>		+--------+---------+---------+<br>		| ALLEN  | 1600.00 |  300.00 |<br>		| WARD   | 1250.00 |  500.00 |<br>		| MARTIN | 1250.00 | 1400.00 |<br>		| TURNER | 1500.00 |    0.00 |<br>		+--------+---------+---------+<br>	<br>找出哪些人没有津贴？<br>select ename,sal,comm from emp where comm is null or comm = 0;<br>		+--------+---------+------+<br>		| ename  | sal     | comm |<br>		+--------+---------+------+<br>		| SMITH  |  800.00 | NULL |<br>		| JONES  | 2975.00 | NULL |<br>		| BLAKE  | 2850.00 | NULL |<br>		| CLARK  | 2450.00 | NULL |<br>		| SCOTT  | 3000.00 | NULL |<br>		| KING   | 5000.00 | NULL |<br>		| TURNER | 1500.00 | 0.00 |<br>		| ADAMS  | 1100.00 | NULL |<br>		| JAMES  |  950.00 | NULL |<br>		| FORD   | 3000.00 | NULL |<br>		| MILLER | 1300.00 | NULL |<br>		+--------+---------+------+<br>	<br>找出工作岗位是MANAGER和SALESMAN的员工？<br>select ename,job from emp where job = &#x27;MANAGER&#x27; or job = &#x27;SALESMAN&#x27;;<br>		+--------+----------+<br>		| ename  | job      |<br>		+--------+----------+<br>		| ALLEN  | SALESMAN |<br>		| WARD   | SALESMAN |<br>		| JONES  | MANAGER  |<br>		| MARTIN | SALESMAN |<br>		| BLAKE  | MANAGER  |<br>		| CLARK  | MANAGER  |<br>		| TURNER | SALESMAN |<br>		+--------+----------+<br>	<br>and 和 or联合起来用：找出薪资大于1000的并且部门编号是20或30部门的员工。<br>select ename,sal,deptno from emp where sal &gt; 1000 and deptno = 20 or deptno = 30; # 错误的<br>select ename,sal,deptno from emp where sal &gt; 1000 and (deptno = 20 or deptno = 30); # 正确的。<br>#注意：当运算符的优先级不确定的时候加小括号。无论and和or的位置如何and的优先级总是高于or<br>	<br>in 等同于 or：找出工作岗位是MANAGER和SALESMAN的员工？<br>select ename,job from emp where job = &#x27;SALESMAN&#x27; or job = &#x27;MANAGER&#x27;;<br>select ename,job from emp where job in(&#x27;SALESMAN&#x27;, &#x27;MANAGER&#x27;);<br>select ename,job from emp where sal in(800, 5000); # in后面的值不是区间，是具体的值。<br>		+-------+-----------+<br>		| ename | job       |<br>		+-------+-----------+<br>		| SMITH | CLERK     |<br>		| KING  | PRESIDENT |<br>		+-------+-----------+<br>	<br>not in: 不在这几个值当中。<br>select ename,job from emp where sal not in(800, 5000);<br>	<br>模糊查询like ? <br> 找出名字当中含有O的？<br>（在模糊查询当中，必须掌握两个特殊的符号，一个是%，一个是_）<br> %代表任意多个字符，_代表任意1个字符。<br>select ename from emp where ename like &#x27;%O%&#x27;;<br>			+-------+<br>			| ename |<br>			+-------+<br>			| JONES |<br>			| SCOTT |<br>			| FORD  |<br>			+-------+<br>找出名字中第二个字母是A的？<br>select ename from emp where ename like &#x27;_A%&#x27;;<br>			+--------+<br>			| ename  |<br>			+--------+<br>			| WARD   |<br>			| MARTIN |<br>			| JAMES  |<br>			+--------+<br>找出名字中有下划线的？<br>mysql&gt; select * from t_user;<br>			+------+----------+<br>			| id   | name     |<br>			+------+----------+<br>			|    1 | zhangsan |<br>			|    2 | lisi     |<br>			|    3 | WANG_WU  |<br>			+------+----------+<br>select name from t_user where name like &#x27;%_%&#x27;;<br>			+----------+<br>			| name     |<br>			+----------+<br>			| zhangsan |<br>			| lisi     |<br>			| WANG_WU  |<br>			+----------+<br>select name from t_user where name like &#x27;%\_%&#x27;;<br>			+---------+<br>			| name    |<br>			+---------+<br>			| WANG_WU |<br>			+---------+<br><br>找出名字中最后一个字母是T的？<br>select ename from emp where ename like &#x27;%T&#x27;;<br>			+-------+<br>			| ename |<br>			+-------+<br>			| SCOTT | <br>			+-------+<br></code></pre></td></tr></table></figure>

<h5 id="3、排序（升序、降序）"><a href="#3、排序（升序、降序）" class="headerlink" title="3、排序（升序、降序）"></a>3、排序（升序、降序）</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><code class="hljs mysql">按照工资升序，找出员工名和薪资？<br>select ename,sal from emp order by sal;<br>    +--------+---------+<br>    | ename  | sal     |<br>    +--------+---------+<br>    | SMITH  |  800.00 |<br>    | JAMES  |  950.00 |<br>    | ADAMS  | 1100.00 |<br>    | WARD   | 1250.00 |<br>    | MARTIN | 1250.00 |<br>    | MILLER | 1300.00 |<br>    | TURNER | 1500.00 |<br>    | ALLEN  | 1600.00 |<br>    | CLARK  | 2450.00 |<br>    | BLAKE  | 2850.00 |<br>    | JONES  | 2975.00 |<br>    | FORD   | 3000.00 |<br>    | SCOTT  | 3000.00 |<br>    | KING   | 5000.00 |<br>    +--------+---------+<br><br>注意：默认是升序。怎么指定升序或者降序呢？asc表示升序，desc表示降序。<br>	select ename , sal from emp order by sal; // 升序<br>	select ename , sal from emp order by sal asc; // 升序<br>	select ename , sal from emp order by sal desc; // 降序。<br><br>按照工资的降序排列，当工资相同的时候再按照名字的升序排列。<br>	select ename,sal from emp order by sal desc;<br>	select ename,sal from emp order by sal desc , ename asc;<br>	注意：越靠前的字段越能起到主导作用。只有当前面的字段无法完成排序的时候，才会启用后面的字段。<br><br>找出工作岗位是SALESMAN的员工，并且要求按照薪资的降序排列。<br>select ename,job,sal from emp where job = &#x27;SALESMAN&#x27; order by sal desc;<br>+--------+----------+---------+<br>| ename  | job      | sal     |<br>+--------+----------+---------+<br>| ALLEN  | SALESMAN | 1600.00 |<br>| TURNER | SALESMAN | 1500.00 |<br>| WARD   | SALESMAN | 1250.00 |<br>| MARTIN | SALESMAN | 1250.00 |<br>+--------+----------+---------+<br><br>select <br>	字段	3<br>from<br>	表名  1<br>where<br>	条件	2<br>order by<br>	.... 4<br><br># 执行顺序是1、2、3、4; order by是最后执行的。最后排序输出<br>select ename,sal as salary from emp order by salary;<br></code></pre></td></tr></table></figure>

<h5 id="4、分组函数"><a href="#4、分组函数" class="headerlink" title="4、分组函数"></a>4、分组函数</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br></pre></td><td class="code"><pre><code class="hljs mysql">count 计数<br>sum 求和<br>avg 平均值<br>max 最大值<br>min 最小值<br>记住：分组函数一共5个所有的分组函数都是对“某一组”数据进行操作的。分组函数自动忽略NULL。<br><br>找出工资总和？<br>	select sum(sal) from emp;<br>找出最高工资？<br>	select max(sal) from emp;<br>找出最低工资？<br>	select min(sal) from emp;<br>找出平均工资？<br>	select avg(sal) from emp;<br>找出总人数？<br>	select count(*) from emp;<br>	select count(ename) from emp;<br>分组函数还有另一个名字：多行处理函数。<br>多行处理函数的特点：输入多行，最终输出的结果是1行。<br>select count(comm) from emp;<br>	+-------------+<br>	| count(comm) |<br>	+-------------+<br>	|           4 |<br>	+-------------+<br><br>select sum(comm) from emp;<br>	+-----------+<br>	| sum(comm) |<br>	+-----------+<br>	|   2200.00 |<br>	+-----------+<br><br>select sum(comm) from emp where comm is not null; # 不需要额外添加这个过滤条件。sum函数自动忽略NULL。 &amp;&amp;&amp;笔试重点<br><br>找出工资高于平均工资的员工？<br>select avg(sal) from emp; # 平均工资<br>		+-------------+<br>		| avg(sal)    |<br>		+-------------+<br>		| 2073.214286 |<br>		+-------------+<br><br>select ename,sal from emp where sal &gt; avg(sal); #ERROR 1111 (HY000): Invalid use of group function<br>思考以上的错误信息：无效的使用了分组函数？<br>	原因：SQL语句当中有一个语法规则，分组函数不可直接使用在where子句当中。<br>怎么解释？<br>	因为 group by是在 where 执行之后才会执行的。（参看第6条 group by 和 having）<br>...<br>...<br>...<br>select 5 from 1 where 2 group by 3 having 4 order by 6<br># 在1那张表里查，经过2条件过滤之后，3分组，分组之后不满意再进行4过滤，之后5查出来，最后6排序输出<br><br>找出工资高于平均工资的员工？<br>	第一步：找出平均工资<br>select avg(sal) from emp;<br>		+-------------+<br>		| avg(sal)    |<br>		+-------------+<br>		| 2073.214286 |<br>		+-------------+<br>	第二步：找出高于平均工资的员工<br>select ename,sal from emp where sal &gt; 2073.214286;<br>		+-------+---------+<br>		| ename | sal     |<br>		+-------+---------+<br>		| JONES | 2975.00 |<br>		| BLAKE | 2850.00 |<br>		| CLARK | 2450.00 |<br>		| SCOTT | 3000.00 |<br>		| KING  | 5000.00 |<br>		| FORD  | 3000.00 |<br>		+-------+---------+<br>select ename,sal from emp where sal &gt; (select avg(sal) from emp);<br>#算出结果之后再套进去<br><br>count(*)和count(具体的某个字段)，他们有什么区别？# &amp;&amp;&amp;笔试重点<br>	count(*):不是统计某个字段中数据的个数，而是统计总记录条数。（和某个字段无关）<br>	count(comm): 表示统计comm字段中不为NULL的数据总数量。<br><br>分组函数也能组合起来用：<br>select count(*),sum(sal),avg(sal),max(sal),min(sal) from emp;<br>	+----------+----------+-------------+----------+----------+<br>	| count(*) | sum(sal) | avg(sal)    | max(sal) | min(sal) |<br>	+----------+----------+-------------+----------+----------+<br>	|       14 | 29025.00 | 2073.214286 |  5000.00 |   800.00 |<br>	+----------+----------+-------------+----------+----------+<br><br></code></pre></td></tr></table></figure>



<h5 id="5、单行处理函数"><a href="#5、单行处理函数" class="headerlink" title="5、单行处理函数"></a>5、单行处理函数</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs mysql">输入一行，输出一行。<br><br>计算每个员工的年薪？<br>	select ename,(sal+comm)*12 as yearsal from emp;<br>	重点：所有数据库都是这样规定的，只要有NULL参与的运算结果一定是NULL。<br>	使用ifnull函数：<br>	select ename,(sal+ifnull(comm,0))*12 as yearsal from emp;<br><br>ifnull() 空处理函数？ ifnull(可能为NULL的数据,被当做什么处理)：属于单行处理函数。<br>select ename,ifnull(comm,0) as comm from emp;<br>	+--------+---------+<br>	| ename  | comm    |<br>	+--------+---------+<br>	| SMITH  |    0.00 |<br>	| ALLEN  |  300.00 |<br>	| WARD   |  500.00 |<br>	| JONES  |    0.00 |<br>	| MARTIN | 1400.00 |<br>	| BLAKE  |    0.00 |<br>	| CLARK  |    0.00 |<br>	| SCOTT  |    0.00 |<br>	| KING   |    0.00 |<br>	| TURNER |    0.00 |<br>	| ADAMS  |    0.00 |<br>	| JAMES  |    0.00 |<br>	| FORD   |    0.00 |<br>	| MILLER |    0.00 |<br>	+--------+---------+<br></code></pre></td></tr></table></figure>



<h5 id="6、group-by-和-having"><a href="#6、group-by-和-having" class="headerlink" title="6、group by 和 having"></a>6、group by 和 having</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br></pre></td><td class="code"><pre><code class="hljs mysql">group by ： 按照某个字段或者某些字段进行分组。<br>having ： 对分组之后的数据进行再次过滤。<br><br>案例：找出每个工作岗位的最高薪资。<br>select max(sal),job from emp group by job;<br>	+----------+-----------+<br>	| max(sal) | job       |<br>	+----------+-----------+<br>	|  3000.00 | ANALYST   |<br>	|  1300.00 | CLERK     |<br>	|  2975.00 | MANAGER   |<br>	|  5000.00 | PRESIDENT |<br>	|  1600.00 | SALESMAN  |<br>	+----------+-----------+<br>注意：<br>	*分组函数一般都会和 group by联合使用，这也是为什么它被称为分组函数的原因。<br>	*并且任何一个分组函数（ count sum avg max min）都是在 group by语句执行结束之后才会执行的。<br>	*当一条sql语句没有 group by的话，整张表的数据会自成一组。<br><br>select ename,max(sal),job from emp group by job;<br>	以上在mysql当中，查询结果是有的，但是结果没有意义，查询出的结果与实际结果并不相符，在Oracle数据库当中会报错。语法错误。Oracle的语法规则比MySQL语法规则严谨。<br>***	记住一个规则：当一条语句中有 group by的话， select后面只能跟1、分组函数和2、参与分组的字段。<br><br>每个工作岗位的平均薪资？<br>select job,avg(sal) from emp group by job;<br>	+-----------+-------------+<br>	| job       | avg(sal)    |<br>	+-----------+-------------+<br>	| ANALYST   | 3000.000000 |<br>	| CLERK     | 1037.500000 |<br>	| MANAGER   | 2758.333333 |<br>	| PRESIDENT | 5000.000000 |<br>	| SALESMAN  | 1400.000000 |<br>	+-----------+-------------+<br><br>多个字段能不能联合起来一块分组？<br>案例：找出每个部门不同工作岗位的最高薪资。（和找出每个工作岗位的最高薪资不同）<br>select deptno,job,max(sal) from emp group by deptno,job;<br><br>找出每个部门的最高薪资，要求显示薪资大于2900的数据。<br>	第一步：找出每个部门的最高薪资<br>select max(sal),deptno from emp group by deptno;<br>	+----------+--------+<br>	| max(sal) | deptno |<br>	+----------+--------+<br>	|  5000.00 |     10 |<br>	|  3000.00 |     20 |<br>	|  2850.00 |     30 |<br>	+----------+--------+<br><br>	第二步：找出薪资大于2900<br>select max(sal),deptno from emp group by deptno having max(sal) &gt; 2900;#这种方式效率低。<br>	+----------+--------+<br>	| max(sal) | deptno |<br>	+----------+--------+<br>	|  5000.00 |     10 |<br>	|  3000.00 |     20 |<br>	+----------+--------+<br><br>	select max(sal),deptno from emp where sal &gt; 2900 group by deptno;#效率较高，因为where是在group by之前执行的，先筛选之后再分组，如果使用having的话，先分组再过滤的效率较低（分好组的数据却被过滤了，那就白分组了），建议能够使用where过滤的尽量使用where。但是如果where之后要用的数据是分完组之后算出来的那么没办法只能用having<br>	+----------+--------+<br>	| max(sal) | deptno |<br>	+----------+--------+<br>	|  5000.00 |     10 |<br>	|  3000.00 |     20 |<br>	+----------+--------+<br><br>找出每个部门的平均薪资，要求显示薪资大于2000的数据。<br>	第一步：找出每个部门的平均薪资<br>select deptno,avg(sal) from emp group by deptno;<br>	+--------+-------------+<br>	| deptno | avg(sal)    |<br>	+--------+-------------+<br>	|     10 | 2916.666667 |<br>	|     20 | 2175.000000 |<br>	|     30 | 1566.666667 |<br>	+--------+-------------+<br><br>	第二步：要求显示薪资大于2000的数据<br>select deptno,avg(sal) from emp group by deptno having avg(sal) &gt; 2000;	<br>	+--------+-------------+<br>	| deptno | avg(sal)    |<br>	+--------+-------------+<br>	|     10 | 2916.666667 |<br>	|     20 | 2175.000000 |<br>	+--------+-------------+<br><br>	where后面不能使用分组函数：<br>select deptno,avg(sal) from emp where avg(sal) &gt; 2000 group by deptno; #错误了。<br>	这种情况只能使用having过滤。<br></code></pre></td></tr></table></figure>

<h5 id="7、总结一个完整的DQL语句怎么写？"><a href="#7、总结一个完整的DQL语句怎么写？" class="headerlink" title="7、总结一个完整的DQL语句怎么写？"></a>7、总结一个完整的DQL语句怎么写？</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs mysql">select		5<br>	..<br>from		1	<br>	..<br>where		2<br>	..<br>group by	3<br>	..<br>having		4  #having和group by是绑定的，用having之前必须先分组<br>	..<br>order by	6<br>	..<br></code></pre></td></tr></table></figure>

<h5 id="8、查询结果集去重"><a href="#8、查询结果集去重" class="headerlink" title="8、查询结果集去重"></a>8、查询结果集去重</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs mysql">select distinct job from emp; // distinct关键字去除重复记录。<br>	+-----------+<br>	| job       |<br>	+-----------+<br>	| CLERK     |<br>	| SALESMAN  |<br>	| MANAGER   |<br>	| ANALYST   |<br>	| PRESIDENT |<br>	+-----------+	<br><br>select ename,distinct job from emp;<br>	以上的sql语句是错误的。<br>***	记住：<br>	1、distinct只能出现在所有字段的最前面。<br>	2、distinct出现在最前方表示后面所有的字段联合起来去重<br><br>select distinct deptno,job from emp;<br>	+--------+-----------+<br>	| deptno | job       |<br>	+--------+-----------+<br>	|     20 | CLERK     |<br>	|     30 | SALESMAN  |<br>	|     20 | MANAGER   |<br>	|     30 | MANAGER   |<br>	|     10 | MANAGER   |<br>	|     20 | ANALYST   |<br>	|     10 | PRESIDENT |<br>	|     30 | CLERK     |<br>	|     10 | CLERK     |<br>	+--------+-----------+<br><br>案例：统计岗位的数量？<br>select count(distinct job) from emp;<br>    +---------------------+<br>    | count(distinct job) |<br>    +---------------------+<br>    |                   5 |<br>    +---------------------+<br></code></pre></td></tr></table></figure>

<h5 id="9、连接查询"><a href="#9、连接查询" class="headerlink" title="9、连接查询"></a>9、连接查询</h5><p>1、什么是连接查询？<br>    在实际开发中，大部分的情况下都不是从单表中查询数据，一般都是多张表联合查询取出最终的结果。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs mysql">在实际开发中，一般一个业务都会对应多张表，比如：学生和班级，起码两张表。<br>		stuno		stuname			classno		classname<br>---------------------------------------------------------------------<br>		1			zs					1		第二中学高三1班<br>		2			ls					1		第二中学高三1班<br>学生和班级信息存储到一张表中，结果就像上面一样，数据会存在大量的重复，导致数据的冗余。（班级序号和名字都冗余了）<br></code></pre></td></tr></table></figure>

<p>2、连接查询的分类？</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs mysql">根据语法出现的年代来划分的话，包括：<br>SQL92（一些老的DBA可能还在使用这种语法。DBA：DataBase Administrator，数据库管理员）<br>SQL99（比较新的语法）<br>根据表的连接方式来划分，包括：<br>1、内连接：<br>	等值连接<br>	非等值连接<br>	自连接<br>2、外连接：<br>	左外连接（左连接）<br>	右外连接（右连接）<br>3、全连接（这个不讲，很少用！）<br></code></pre></td></tr></table></figure>

<p>3、在表的连接查询方面有一种现象被称为：笛卡尔积现象。（笛卡尔乘积现象）</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><code class="hljs mysql">案例：找出每一个员工的部门名称，要求显示员工名和部门名。<br>EMP表<br>    +--------+--------+<br>    | ename  | deptno |<br>    +--------+--------+<br>    | SMITH  |     20 |<br>    | ALLEN  |     30 |<br>    | WARD   |     30 |<br>    | JONES  |     20 |<br>    | MARTIN |     30 |<br>    | BLAKE  |     30 |<br>    | CLARK  |     10 |<br>    | SCOTT  |     20 |<br>    | KING   |     10 |<br>    | TURNER |     30 |<br>    | ADAMS  |     20 |<br>    | JAMES  |     30 |<br>    | FORD   |     20 |<br>    | MILLER |     10 |<br>    +--------+--------+<br>DEPT表<br>    +--------+------------+----------+<br>    | DEPTNO | DNAME      | LOC      |<br>    +--------+------------+----------+<br>    |     10 | ACCOUNTING | NEW YORK |<br>    |     20 | RESEARCH   | DALLAS   |<br>    |     30 | SALES      | CHICAGO  |<br>    |     40 | OPERATIONS | BOSTON   |<br>    +--------+------------+----------+<br><br>select ename,dname from emp,dept;<br>    +--------+------------+<br>    | ename  | dname      |<br>    +--------+------------+<br>    | SMITH  | ACCOUNTING |<br>    | SMITH  | RESEARCH   |<br>    | SMITH  | SALES      |<br>    | SMITH  | OPERATIONS |<br>    | ALLEN  | ACCOUNTING |<br>    | ALLEN  | RESEARCH   |<br>    ............<br>    56 rows in set (0.00 sec)<br><br>笛卡尔积现象：当两张表进行连接查询的时候，*没有任何条件进行限制*，最终的查询结果条数是两张表记录条数的乘积。<br><br>关于表的别名：<br>select e.ename,d.dname from emp e,dept d;#ename和dname要联合显示<br>表的别名（和字段别名一样）有什么好处？<br>	第一：执行效率高。不加别名的话ename不但在第一张表中找，还会在第二张表中找<br>	第二：可读性好。<br></code></pre></td></tr></table></figure>
<p>4、怎么避免笛卡尔积现象？当然是加条件进行过滤，但是这样并不会减少匹配次数。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs mysql">思考：避免了笛卡尔积现象，会减少记录的匹配次数吗？<br>	不会，次数还是56次。只不过显示的是有效记录。<br><br>案例：找出每一个员工的部门名称，要求显示员工名和部门名。<br>select	e.ename,d.dname from emp e , dept d where e.deptno = d.deptno; #SQL92的语法，以后不用。<br>	+--------+------------+<br>	| ename  | dname      |<br>	+--------+------------+<br>	| CLARK  | ACCOUNTING |<br>	| KING   | ACCOUNTING |<br>	| MILLER | ACCOUNTING |<br>	| SMITH  | RESEARCH   |<br>	| JONES  | RESEARCH   |<br>	| SCOTT  | RESEARCH   |<br>	| ADAMS  | RESEARCH   |<br>	| FORD   | RESEARCH   |<br>	| ALLEN  | SALES      |<br>	| WARD   | SALES      |<br>	| MARTIN | SALES      |<br>	| BLAKE  | SALES      |<br>	| TURNER | SALES      |<br>	| JAMES  | SALES      |<br>	+--------+------------+<br></code></pre></td></tr></table></figure>
<p>5、内连接之等值连接：最大特点是：条件是等量关系。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs mysql">案例：查询每个员工的部门名称，要求显示员工名和部门名。<br>SQL92:（太老，不用了）<br>select e.ename,d.dname from emp e, dept d where e.deptno = d.deptno;<br><br>SQL99：（常用的）<br>select e.ename,d.dname from emp e join dept d on e.deptno = d.deptno;<br><br>#join on 语法，on后加表的连接条件<br>#inner可以省略的，带着inner目的是可读性好一些。<br>select e.ename,d.dname from emp e inner join dept d on e.deptno = d.deptno;<br><br>SQL99 语法：<br> ... A join B on 连接条件 where ...<br>SQL99语法结构更清晰一些：表的连接条件和后来的where条件分离了，表的连接就是表的连接，后面再过滤使用where。	<br>	+--------+------------+<br>	| ename  | dname      |<br>	+--------+------------+<br>	| CLARK  | ACCOUNTING |<br>	| KING   | ACCOUNTING |<br>	| MILLER | ACCOUNTING |<br>	| SMITH  | RESEARCH   |<br>	| JONES  | RESEARCH   |<br>	| SCOTT  | RESEARCH   |<br>	| ADAMS  | RESEARCH   |<br>	| FORD   | RESEARCH   |<br>	| ALLEN  | SALES      |<br>	| WARD   | SALES      |<br>	| MARTIN | SALES      |<br>	| BLAKE  | SALES      |<br>	| TURNER | SALES      |<br>	| JAMES  | SALES      |<br>	+--------+------------+<br></code></pre></td></tr></table></figure>
<p>6、内连接之非等值连接：最大的特点是：连接条件中的关系是非等量关系。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><code class="hljs mysql">案例：找出每个员工的工资等级，要求显示员工名、工资、工资等级。<br><br>mysql&gt; select ename,sal from emp;<br>    +--------+---------+<br>    | ename  | sal     |<br>    +--------+---------+<br>    | SMITH  |  800.00 |<br>    | ALLEN  | 1600.00 |<br>    | WARD   | 1250.00 |<br>    | JONES  | 2975.00 |<br>    | MARTIN | 1250.00 |<br>    | BLAKE  | 2850.00 |<br>    | CLARK  | 2450.00 |<br>    | SCOTT  | 3000.00 |<br>    | KING   | 5000.00 |<br>    | TURNER | 1500.00 |<br>    | ADAMS  | 1100.00 |<br>    | JAMES  |  950.00 |<br>    | FORD   | 3000.00 |<br>    | MILLER | 1300.00 |<br>    +--------+---------+<br><br>mysql&gt; select * from salgrade;<br>    +-------+-------+-------+ <br>    | GRADE | LOSAL | HISAL |<br>    +-------+-------+-------+<br>    |     1 |   700 |  1200 |<br>    |     2 |  1201 |  1400 |<br>    |     3 |  1401 |  2000 |<br>    |     4 |  2001 |  3000 |<br>    |     5 |  3001 |  9999 |<br>    +-------+-------+-------+<br>    <br>select <br>	e.ename,e.sal,s.grade<br>from<br>	emp e<br>join # inner可以省略<br>	salgrade s<br>on<br>	e.sal between s.losal and s.hisal;<br>        +--------+---------+-------+<br>        | ename  | sal     | grade |<br>        +--------+---------+-------+<br>        | SMITH  |  800.00 |     1 |<br>        | ALLEN  | 1600.00 |     3 |<br>        | WARD   | 1250.00 |     2 |<br>        | JONES  | 2975.00 |     4 |<br>        | MARTIN | 1250.00 |     2 |<br>        | BLAKE  | 2850.00 |     4 |<br>        | CLARK  | 2450.00 |     4 |<br>        | SCOTT  | 3000.00 |     4 |<br>        | KING   | 5000.00 |     5 |<br>        | TURNER | 1500.00 |     3 |<br>        | ADAMS  | 1100.00 |     1 |<br>        | JAMES  |  950.00 |     1 |<br>        | FORD   | 3000.00 |     4 |<br>        | MILLER | 1300.00 |     2 |<br>        +--------+---------+-------+<br></code></pre></td></tr></table></figure>
<p>7、自连接：最大的特点是：一张表看做两张表。自己连接自己（起别名）。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><code class="hljs mysql">案例：找出每个员工的上级领导，要求显示员工名和对应的领导名。<br>mysql&gt; select empno,ename,mgr from emp;<br>emp a员工表<br>    +-------+--------+------+<br>    | empno | ename  | mgr  |<br>    +-------+--------+------+<br>    |  7369 | SMITH  | 7902 |<br>    |  7499 | ALLEN  | 7698 |<br>    |  7521 | WARD   | 7698 |<br>    |  7566 | JONES  | 7839 |<br>    |  7654 | MARTIN | 7698 |<br>    |  7698 | BLAKE  | 7839 |<br>    |  7782 | CLARK  | 7839 |<br>    |  7788 | SCOTT  | 7566 |<br>    |  7839 | KING   | NULL |<br>    |  7844 | TURNER | 7698 |<br>    |  7876 | ADAMS  | 7788 |<br>    |  7900 | JAMES  | 7698 |<br>    |  7902 | FORD   | 7566 |<br>    |  7934 | MILLER | 7782 |<br>    +-------+--------+------+<br>emp b 领导表 （员工表当中只有以下6个员工是领导。下面的表是上面表的子表）<br>    +-------+--------+<br>    | empno | ename  |<br>    +-------+--------+<br>    |  7566 | JONES  |<br>    |  7698 | BLAKE  |<br>    |  7782 | CLARK  |<br>    |  7788 | SCOTT  |<br>    |  7839 | KING   |<br>    |  7902 | FORD   |<br>    +-------+--------+<br>员工的领导编号 = 领导的员工编号<br><br>select <br>	a.ename as &#x27;员工名&#x27;,b.ename as &#x27;领导名&#x27;<br>from<br>	emp a<br>inner join<br>	emp b<br>on<br>	a.mgr = b.empno;<br>        +--------+--------+<br>        | 员工名 | 领导名 |<br>        +--------+--------+<br>        | SMITH  | FORD   |<br>        | ALLEN  | BLAKE  |<br>        | WARD   | BLAKE  |<br>        | JONES  | KING   |<br>        | MARTIN | BLAKE  |<br>        | BLAKE  | KING   |<br>        | CLARK  | KING   |<br>        | SCOTT  | JONES  |<br>        | TURNER | BLAKE  |<br>        | ADAMS  | SCOTT  |<br>        | JAMES  | BLAKE  |<br>        | FORD   | JONES  |<br>        | MILLER | CLARK  |<br>        +--------+--------+<br>        13 rows in set (0.00 sec)<br>#只有13条记录。这就是内连接，匹配的上就查出来匹配不上就不查了<br></code></pre></td></tr></table></figure>

<p>8、外连接</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br></pre></td><td class="code"><pre><code class="hljs mysql">什么是外连接，和内连接有什么区别？<br>1、内连接：<br>	假设A和B表进行连接，使用内连接的话，凡是A表和B表能够匹配上的记录查询出来，这就是内连接。AB两张表没有主副之分，两张表是平等的。	<br>2、外连接：<br> 	假设A和B表进行连接，使用外连接的话，AB两张表中有一张表是主表，一张表是副表，主要查询主表中的数据，捎带着查询副表，当副表中的数据没有和主表中的数据匹配上，副表自动模拟出NULL与之匹配。<br>3、外连接的分类<br>	左外连接（左连接）：表示左边的这张表是主表。<br>	右外连接（右连接）：表示右边的这张表是主表。<br>	左连接有右连接的写法，右连接也会有对应的左连接的写法。<br><br>案例：找出每个员工的上级领导？（所有员工必须全部查询出来。）<br>emp a 员工表<br>    +-------+--------+------+<br>    | empno | ename  | mgr  |<br>    +-------+--------+------+<br>    |  7369 | SMITH  | 7902 |<br>    |  7499 | ALLEN  | 7698 |<br>    |  7521 | WARD   | 7698 |<br>    |  7566 | JONES  | 7839 |<br>    |  7654 | MARTIN | 7698 |<br>    |  7698 | BLAKE  | 7839 |<br>    |  7782 | CLARK  | 7839 |<br>    |  7788 | SCOTT  | 7566 |<br>    |  7839 | KING   | NULL |<br>    |  7844 | TURNER | 7698 |<br>    |  7876 | ADAMS  | 7788 |<br>    |  7900 | JAMES  | 7698 |<br>    |  7902 | FORD   | 7566 |<br>    |  7934 | MILLER | 7782 |<br>    +-------+--------+------+<br>emp b 领导表<br>    +-------+--------+<br>    | empno | ename  |<br>    +-------+--------+<br>    |  7566 | JONES  |<br>    |  7698 | BLAKE  |<br>    |  7782 | CLARK  |<br>    |  7788 | SCOTT  |<br>    |  7839 | KING   |<br>    |  7902 | FORD   |<br>    +-------+--------+<br><br>内连接：<br>select a.ename &#x27;员工&#x27;, b.ename &#x27;领导&#x27; from emp a join emp b on a.mgr = b.empno;<br><br>外连接：（左外连接/左连接）<br>select a.ename &#x27;员工&#x27;, b.ename &#x27;领导&#x27; from emp a left join emp b on a.mgr = b.empno;<br>#left outer join，outer是可以省略的。<br>外连接：（右外连接/右连接）<br>select a.ename &#x27;员工&#x27;, b.ename &#x27;领导&#x27; from emp b right join emp a on a.mgr = b.empno;<br>#right outer join，outer是可以省略的。<br>    +--------+-------+<br>    | 员工      | 领导    |<br>    +--------+-------+<br>    | SMITH  | FORD  |<br>    | ALLEN  | BLAKE |<br>    | WARD   | BLAKE |<br>    | JONES  | KING  |<br>    | MARTIN | BLAKE |<br>    | BLAKE  | KING  |<br>    | CLARK  | KING  |<br>    | SCOTT  | JONES |<br>    | KING   | NULL  |<br>    | TURNER | BLAKE |<br>    | ADAMS  | SCOTT |<br>    | JAMES  | BLAKE |<br>    | FORD   | JONES |<br>    | MILLER | CLARK |<br>    +--------+-------+<br>    14 rows in set (0.00 sec)<br># 外连接最重要的特点是：主表的数据无条件的全部查询出来。虽然king的领导是null但是仍然可以查询出来<br><br>案例：找出哪个部门没有员工？<br>EMP表<br>+-------+--------+-----------+------+------------+---------+---------+--------+<br>| EMPNO | ENAME  | JOB       | MGR  | HIREDATE   | SAL     | COMM    | DEPTNO |<br>+-------+--------+-----------+------+------------+---------+---------+--------+<br>|  7369 | SMITH  | CLERK     | 7902 | 1980-12-17 |  800.00 |    NULL |     20 |<br>|  7499 | ALLEN  | SALESMAN  | 7698 | 1981-02-20 | 1600.00 |  300.00 |     30 |<br>|  7521 | WARD   | SALESMAN  | 7698 | 1981-02-22 | 1250.00 |  500.00 |     30 |<br>|  7566 | JONES  | MANAGER   | 7839 | 1981-04-02 | 2975.00 |    NULL |     20 |<br>|  7654 | MARTIN | SALESMAN  | 7698 | 1981-09-28 | 1250.00 | 1400.00 |     30 |<br>|  7698 | BLAKE  | MANAGER   | 7839 | 1981-05-01 | 2850.00 |    NULL |     30 |<br>|  7782 | CLARK  | MANAGER   | 7839 | 1981-06-09 | 2450.00 |    NULL |     10 |<br>|  7788 | SCOTT  | ANALYST   | 7566 | 1987-04-19 | 3000.00 |    NULL |     20 |<br>|  7839 | KING   | PRESIDENT | NULL | 1981-11-17 | 5000.00 |    NULL |     10 |<br>|  7844 | TURNER | SALESMAN  | 7698 | 1981-09-08 | 1500.00 |    0.00 |     30 |<br>|  7876 | ADAMS  | CLERK     | 7788 | 1987-05-23 | 1100.00 |    NULL |     20 |<br>|  7900 | JAMES  | CLERK     | 7698 | 1981-12-03 |  950.00 |    NULL |     30 |<br>|  7902 | FORD   | ANALYST   | 7566 | 1981-12-03 | 3000.00 |    NULL |     20 |<br>|  7934 | MILLER | CLERK     | 7782 | 1982-01-23 | 1300.00 |    NULL |     10 |<br>+-------+--------+-----------+------+------------+---------+---------+--------+<br>DEPT<br>    +--------+------------+----------+<br>    | DEPTNO | DNAME      | LOC      |<br>    +--------+------------+----------+<br>    |     10 | ACCOUNTING | NEW YORK |<br>    |     20 | RESEARCH   | DALLAS   |<br>    |     30 | SALES      | CHICAGO  |<br>    |     40 | OPERATIONS | BOSTON   |<br>    +--------+------------+----------+<br><br>select d.* from emp e right join dept d on e.deptno = d.deptno where e.empno is null;#外连接无条件查询主表中的所有元素。当副表中的数据没有和主表中的数据匹配上，副表自动模拟出NULL与之匹配。所以查询之后40号部门的emp中字段全是null<br>    +--------+------------+--------+<br>    | DEPTNO | DNAME      | LOC    |<br>    +--------+------------+--------+<br>    |     40 | OPERATIONS | BOSTON |<br>    +--------+------------+--------+<br></code></pre></td></tr></table></figure>
<p>9、三张表怎么连接查询</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br></pre></td><td class="code"><pre><code class="hljs mysql">案例：找出每一个员工的部门名称以及工资等级。<br>EMP e<br>    +-------+--------+---------+--------+<br>    | empno | ename  | sal     | deptno |<br>    +-------+--------+---------+--------+<br>    |  7369 | SMITH  |  800.00 |     20 |<br>    |  7499 | ALLEN  | 1600.00 |     30 |<br>    |  7521 | WARD   | 1250.00 |     30 |<br>    |  7566 | JONES  | 2975.00 |     20 |<br>    |  7654 | MARTIN | 1250.00 |     30 |<br>    |  7698 | BLAKE  | 2850.00 |     30 |<br>    |  7782 | CLARK  | 2450.00 |     10 |<br>    |  7788 | SCOTT  | 3000.00 |     20 |<br>    |  7839 | KING   | 5000.00 |     10 |<br>    |  7844 | TURNER | 1500.00 |     30 |<br>    |  7876 | ADAMS  | 1100.00 |     20 |<br>    |  7900 | JAMES  |  950.00 |     30 |<br>    |  7902 | FORD   | 3000.00 |     20 |<br>    |  7934 | MILLER | 1300.00 |     10 |<br>    +-------+--------+---------+--------+<br>DEPT d<br>    +--------+------------+----------+<br>    | DEPTNO | DNAME      | LOC      |<br>    +--------+------------+----------+<br>    |     10 | ACCOUNTING | NEW YORK |<br>    |     20 | RESEARCH   | DALLAS   |<br>    |     30 | SALES      | CHICAGO  |<br>    |     40 | OPERATIONS | BOSTON   |<br>    +--------+------------+----------+<br>SALGRADE s<br>    +-------+-------+-------+<br>    | GRADE | LOSAL | HISAL |<br>    +-------+-------+-------+<br>    |     1 |   700 |  1200 |<br>    |     2 |  1201 |  1400 |<br>    |     3 |  1401 |  2000 |<br>    |     4 |  2001 |  3000 |<br>    |     5 |  3001 |  9999 |<br>    +-------+-------+-------+<br><br>注意，解释一下：<br>	....<br>		A<br>	join<br>		B<br>	join<br>		C<br>	on<br>		...<br>#表示：A表和B表先进行表连接，连接之后A表继续和C表进行连接。<br>#注意：虽然是多张表，但是还是当做两张表的连接看，AB连接和AC连接<br>select e.ename,d.dname,s.grade from emp e join dept d<br>	on<br>		e.deptno = d.deptno<br>	join<br>		salgrade s<br>	on<br>		e.sal between s.losal and s.hisal;<br>	<br>	+--------+------------+-------+<br>	| ename  | dname      | grade |<br>	+--------+------------+-------+<br>	| SMITH  | RESEARCH   |     1 |<br>	| ALLEN  | SALES      |     3 |<br>	| WARD   | SALES      |     2 |<br>	| JONES  | RESEARCH   |     4 |<br>	| MARTIN | SALES      |     2 |<br>	| BLAKE  | SALES      |     4 |<br>	| CLARK  | ACCOUNTING |     4 |<br>	| SCOTT  | RESEARCH   |     4 |<br>	| KING   | ACCOUNTING |     5 |<br>	| TURNER | SALES      |     3 |<br>	| ADAMS  | RESEARCH   |     1 |<br>	| JAMES  | SALES      |     1 |<br>	| FORD   | RESEARCH   |     4 |<br>	| MILLER | ACCOUNTING |     2 |<br>	+--------+------------+-------+<br><br>案例：找出每一个员工的部门名称、工资等级、以及上级领导。<br>	select <br>		e.ename &#x27;员工&#x27;,d.dname,s.grade,e1.ename &#x27;领导&#x27;<br>	from<br>		emp e<br>	join<br>		dept d<br>	on<br>		e.deptno = d.deptno<br>	join<br>		salgrade s<br>	on<br>		e.sal between s.losal and s.hisal<br>	left join<br>		emp e1<br>	on<br>		e.mgr = e1.empno;<br><br>	+--------+------------+-------+-------+<br>	| 员工      | dname      | grade | 领导    |<br>	+--------+------------+-------+-------+<br>	| SMITH  | RESEARCH   |     1 | FORD  |<br>	| ALLEN  | SALES      |     3 | BLAKE |<br>	| WARD   | SALES      |     2 | BLAKE |<br>	| JONES  | RESEARCH   |     4 | KING  |<br>	| MARTIN | SALES      |     2 | BLAKE |<br>	| BLAKE  | SALES      |     4 | KING  |<br>	| CLARK  | ACCOUNTING |     4 | KING  |<br>	| SCOTT  | RESEARCH   |     4 | JONES |<br>	| KING   | ACCOUNTING |     5 | NULL  |<br>	| TURNER | SALES      |     3 | BLAKE |<br>	| ADAMS  | RESEARCH   |     1 | SCOTT |<br>	| JAMES  | SALES      |     1 | BLAKE |<br>	| FORD   | RESEARCH   |     4 | JONES |<br>	| MILLER | ACCOUNTING |     2 | CLARK |<br>	+--------+------------+-------+-------+<br></code></pre></td></tr></table></figure>
<h5 id="10、子查询"><a href="#10、子查询" class="headerlink" title="10、子查询"></a>10、子查询</h5><p>1、什么是子查询？子查询都可以出现在哪里？</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs mysql">select语句当中嵌套 select语句，被嵌套的 select语句是子查询。<br>子查询可以出现在哪里？<br>	select<br>		..(select).<br>	from<br>		..(select).<br>	where<br>		..(select).<br></code></pre></td></tr></table></figure>
<p>2、where子句中使用子查询</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs mysql">案例：找出高于平均薪资的员工信息。<br>select * from emp where sal &gt; avg(sal); #错误的写法，where后面不能直接使用分组函数。<br><br>第一步：找出平均薪资<br>select avg(sal) from emp;<br>	+-------------+<br>	| avg(sal)    |<br>	+-------------+<br>	| 2073.214286 |<br>	+-------------+<br>第二步：where过滤<br>select * from emp where sal &gt; 2073.214286;<br><br>第一步和第二步合并：<br>	select * from emp where sal &gt; (select avg(sal) from emp);<br></code></pre></td></tr></table></figure>
<p>3、from后面嵌套子查询 <strong>￥￥重点</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><code class="hljs mysql">案例：找出每个部门平均薪水的等级。<br>第一步：找出每个部门平均薪水（按照部门编号分组，求sal的平均值）<br>select deptno,avg(sal) as avgsal from emp group by deptno;<br>    +--------+-------------+<br>    | deptno | avgsal      |<br>    +--------+-------------+<br>    |     10 | 2916.666667 |<br>    |     20 | 2175.000000 |<br>    |     30 | 1566.666667 |<br>    +--------+-------------+<br>第二步：将以上的查询结果当做临时表t，让t表和salgrade s表连接，条件是：t.avgsal between s.losal and s.hisal<br>select <br>	t.*,s.grade<br>from<br>	(select deptno,avg(sal) as avgsal from emp group by deptno) t<br>join<br>	salgrade s<br>on<br>	t.avgsal between s.losal and s.hisal;<br>    +--------+-------------+-------+<br>    | deptno | avgsal      | grade |<br>    +--------+-------------+-------+<br>    |     30 | 1566.666667 |     3 |<br>    |     10 | 2916.666667 |     4 |<br>    |     20 | 2175.000000 |     4 |<br>    +--------+-------------+-------+<br><br>案例：找出每个部门平均的薪水等级（每个部门中所有员工的薪水等级的平均值）。<br>第一步：找出每个员工的薪水等级。<br>select e.ename &#x27;员工&#x27;,e.sal &#x27;薪水&#x27;,e.deptno &#x27;部门编号&#x27;,s.grade &#x27;薪资等级&#x27; from emp e join salgrade s on e.sal between s.losal and s.hisal;<br>    +--------+---------+--------+-------+<br>    | ename  | sal     | deptno | grade |<br>    +--------+---------+--------+-------+<br>    | SMITH  |  800.00 |     20 |     1 |<br>    | ALLEN  | 1600.00 |     30 |     3 |<br>    | WARD   | 1250.00 |     30 |     2 |<br>    | JONES  | 2975.00 |     20 |     4 |<br>    | MARTIN | 1250.00 |     30 |     2 |<br>    | BLAKE  | 2850.00 |     30 |     4 |<br>    | CLARK  | 2450.00 |     10 |     4 |<br>    | SCOTT  | 3000.00 |     20 |     4 |<br>    | KING   | 5000.00 |     10 |     5 |<br>    | TURNER | 1500.00 |     30 |     3 |<br>    | ADAMS  | 1100.00 |     20 |     1 |<br>    | JAMES  |  950.00 |     30 |     1 |<br>    | FORD   | 3000.00 |     20 |     4 |<br>    | MILLER | 1300.00 |     10 |     2 |<br>    +--------+---------+--------+-------+<br>第二步：基于以上结果，继续按照deptno分组，求grade平均值。<br>select <br>	e.deptno,avg(s.grade)<br>from <br>	emp e <br>join <br>	salgrade s <br>on <br>	e.sal between s.losal and s.hisal #先算了一下薪水等级<br>group by #然后分组。最后执行select后面的分组函数<br>	e.deptno;<br>    +--------+--------------+<br>    | deptno | avg(s.grade) |<br>    +--------+--------------+<br>    |     10 |       3.6667 |<br>    |     20 |       2.8000 |<br>    |     30 |       2.5000 |<br>    +--------+--------------+<br></code></pre></td></tr></table></figure>
<p>4、在select后面嵌套子查询。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs mysql">案例：找出每个员工所在的部门名称，要求显示员工名和部门名。<br>#一般使用下面语句<br>select <br>	e.ename,d.dname<br>from<br>	emp e<br>join<br>	dept d<br>on<br>	e.deptno = d.deptno;<br>#下面这个是不常用的写法，只是为了学习select后面嵌套子查询<br>select <br>	e.ename,(select d.dname from dept d where e.deptno = d.deptno) as dname <br>from <br>	emp e;<br><br>    +--------+------------+<br>    | ename  | dname      |<br>    +--------+------------+<br>    | SMITH  | RESEARCH   |<br>    | ALLEN  | SALES      |<br>    | WARD   | SALES      |<br>    | JONES  | RESEARCH   |<br>    | MARTIN | SALES      |<br>    | BLAKE  | SALES      |<br>    | CLARK  | ACCOUNTING |<br>    | SCOTT  | RESEARCH   |<br>    | KING   | ACCOUNTING |<br>    | TURNER | SALES      |<br>    | ADAMS  | RESEARCH   |<br>    | JAMES  | SALES      |<br>    | FORD   | RESEARCH   |<br>    | MILLER | ACCOUNTING |<br>    +--------+------------+<br></code></pre></td></tr></table></figure>
<h5 id="11、union"><a href="#11、union" class="headerlink" title="11、union"></a>11、union</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><code class="hljs mysql">#将查询结果集相加<br>案例：找出工作岗位是SALESMAN和MANAGER的员工？<br>第一种：select ename,job from emp where job = &#x27;MANAGER&#x27; or job = &#x27;SALESMAN&#x27;;<br>第二种：select ename,job from emp where job in(&#x27;MANAGER&#x27;,&#x27;SALESMAN&#x27;);<br>    +--------+----------+<br>    | ename  | job      |<br>    +--------+----------+<br>    | ALLEN  | SALESMAN |<br>    | WARD   | SALESMAN |<br>    | JONES  | MANAGER  |<br>    | MARTIN | SALESMAN |<br>    | BLAKE  | MANAGER  |<br>    | CLARK  | MANAGER  |<br>    | TURNER | SALESMAN |<br>    +--------+----------+<br>第三种：union<br>select ename,job from emp where job = &#x27;MANAGER&#x27;<br>union<br>select ename,job from emp where job = &#x27;SALESMAN&#x27;;<br>    +--------+----------+<br>    | ename  | job      |<br>    +--------+----------+<br>    | JONES  | MANAGER  |<br>    | BLAKE  | MANAGER  |<br>    | CLARK  | MANAGER  |<br>    | ALLEN  | SALESMAN |<br>    | WARD   | SALESMAN |<br>    | MARTIN | SALESMAN |<br>    | TURNER | SALESMAN |<br>    +--------+----------+<br><br>两张不相干的表中的数据拼接在一起显示？<br>select ename from emp<br>union<br>select dname from dept; #能把查询结果拼成一列，前提是列数相同才能拼接，虽然拼接在一起的数据可能没什么意义<br>    +------------+<br>    | ename      |<br>    +------------+<br>    | SMITH      |<br>    | ALLEN      |<br>    | WARD       |<br>    | JONES      |<br>    | MARTIN     |<br>    | BLAKE      |<br>    | CLARK      |<br>    | SCOTT      |<br>    | KING       |<br>    | TURNER     |<br>    | ADAMS      |<br>    | JAMES      |<br>    | FORD       |<br>    | MILLER     |<br>    | ACCOUNTING |<br>    | RESEARCH   |<br>    | SALES      |<br>    | OPERATIONS |<br>    +------------+<br><br>select ename,sal from emp<br>union<br>select dname from dept;#拼接时列数必须相同<br>#ERROR 1222 (21000): The used SELECT statements have a different number of columns<br></code></pre></td></tr></table></figure>
<h5 id="12、limit-（重点）"><a href="#12、limit-（重点）" class="headerlink" title="12、limit （重点）"></a>12、limit （重点）</h5><p>1、limit是mysql特有的，其他数据库中没有，不通用。（Oracle中有一个相同的机制，叫rownum）</p>
<p>2、作用：limit取结果集中的部分数据</p>
<p>3、语法机制：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs mysql">limit startIndex, length<br>	startIndex表示起始位置，从0开始，0表示第一条数据。<br>	length表示取几个<br>案例：取出工资前5名的员工（思路：降序取前5个）<br>select ename,sal from emp order by sal desc;<br>取前5个：<br>select ename,sal from emp order by sal desc limit 0, 5;<br>select ename,sal from emp order by sal desc limit 5;<br></code></pre></td></tr></table></figure>
<p>4、<code>limit</code> 是 sql 语句最后执行的一个环节：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs mysql">select			5<br>	...<br>from			1<br>	...		<br>where			2<br>	...	<br>group by		3<br>	...<br>having			4<br>	...<br>order by		6<br>	...<br>limit			7<br>	...;<br></code></pre></td></tr></table></figure>
<p>5、案例：找出工资排名在第4到第9名的员工？</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs mysql">select ename,sal from emp order by sal desc limit 3,6;<br>	+--------+---------+<br>	| ename  | sal     |<br>	+--------+---------+<br>	| JONES  | 2975.00 |<br>	| BLAKE  | 2850.00 |<br>	| CLARK  | 2450.00 |<br>	| ALLEN  | 1600.00 |<br>	| TURNER | 1500.00 |<br>	| MILLER | 1300.00 |<br>	+--------+---------+<br></code></pre></td></tr></table></figure>
<p>6、通用的标准分页sql？</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs mysql">每页显示3条记录：<br>第1页：0, 3<br>第2页：3, 3<br>第3页：6, 3<br>第4页：9, 3<br>第5页：12, 3<br><br>每页显示pageSize条记录：<br>第pageNo页：(pageNo - 1) * pageSize, pageSize<br><br>pageSize是什么？是每页显示多少条记录<br>pageNo是什么？显示第几页<br><br>java代码&#123;<br>	int pageNo = 2; // 页码是2<br>	int pageSize = 10; // 每页显示10条<br>	<br>	limit (pageNo - 1) * pageSize, pageSize<br><br>&#125;<br></code></pre></td></tr></table></figure>

<h4 id="5-2、数据定义语言（DDL）"><a href="#5-2、数据定义语言（DDL）" class="headerlink" title="5.2、数据定义语言（DDL）"></a>5.2、数据定义语言（DDL）</h4><h5 id="1、创建表"><a href="#1、创建表" class="headerlink" title="1、创建表"></a>1、创建表</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><code class="hljs mysql">建表语句的语法格式：<br>	create table 表名(<br>		字段名1 数据类型,<br>		字段名2 数据类型,<br>		字段名3 数据类型,<br>		....<br>	);<br><br>关于MySQL当中字段的数据类型？以下只说常见的<br>	int		整数型(java中的int)<br>	bigint	长整型(java中的long)<br>	float	浮点型(java中的float double)<br>	char	定长字符串(String)<br>	varchar	可变长字符串(StringBuffer/StringBuilder) 最多存储255个字符<br>	date	日期类型 （对应Java中的java.sql.Date类型）<br>	BLOB	二进制大对象（存储图片、视频等流媒体信息） Binary Large OBject （对应java中的Object）<br>	CLOB	字符大对象（存储较大文本，比如，可以存储4G的字符串。） Character Large OBject（对应java中的Object）<br>	......<br><br>char 和 varchar怎么选择？<br>	在实际的开发中，当某个字段中的数据长度不发生改变的时候，是定长的，例如：性别、生日等都是采用char。<br>	当一个字段的数据长度不确定，例如：简介、姓名等都是采用varchar。<br><br>BLOB 和 CLOB类型的使用？<br>	电影表: t_movie<br>	id(int)	name(varchar)<br>	playtime(date/char)		上映时间<br>	haibao(BLOB)			海报（图片） #图片必须使用java中的IO流才能放在表当中使用sql的insert不行，一般是将图片放在硬盘中，数据库中存储该图片的路径<br>	history(CLOB)			剧情梗概（大文本）<br><br>表名在数据库当中一般建议以：t_或者tbl_开始。<br><br>创建学生表：<br>	学生信息包括：<br>		学号、姓名、性别、班级编号、生日<br>		学号：bigint<br>		姓名：varchar<br>		性别：char<br>		班级编号：int<br>		生日：char<br>	<br>	create table t_student(<br>		no bigint,<br>		name varchar(255),<br>		sex char(1),<br>		classno varchar(255),<br>		birth char(10)<br>	);<br></code></pre></td></tr></table></figure>
<h5 id="2、对于表结构的修改"><a href="#2、对于表结构的修改" class="headerlink" title="2、对于表结构的修改"></a>2、对于表结构的修改</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs mysql">alter<br>这里不讲了，大家使用工具完成即可，因为在实际开发中表一旦<br>设计好之后，对表结构的修改是很少的，修改表结构就是对之前的设计进行了否定，即使<br>需要修改表结构，我们也可以直接使用工具操作。修改表结构的语句不会出现在Java代码当中。<br>出现在java代码当中的sql包括： insert delete update select（这些都是表中的数据操作。）<br><br>增删改查有一个术语：CRUD操作<br>Create（增） Retrieve（检索） Update（修改） Delete（删除）<br></code></pre></td></tr></table></figure>
<h5 id="3、约束-Constraint"><a href="#3、约束-Constraint" class="headerlink" title="3、约束(Constraint)"></a>3、约束(Constraint)</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br></pre></td><td class="code"><pre><code class="hljs mysql">1、什么是约束？常见的约束有哪些呢？<br>	在创建表的时候，可以给表的字段添加相应的约束，添加约束的目的是为了保证表中数据的<br>	合法性、有效性、完整性。<br>	常见的约束有哪些呢？<br>		非空约束(not null)：约束的字段不能为NULL<br>		唯一约束(unique)：约束的字段不能重复<br>		主键约束(primary key)：约束的字段既不能为NULL，也不能重复（简称PK）<br>		外键约束(foreign key)：...（简称FK）<br>		检查约束(check)：注意Oracle数据库有check约束，但是mysql没有，目前mysql不支持该约束。<br><br>2、非空约束 not null<br>drop table if exists t_user;<br>create table t_user(<br>	id int,<br>	username varchar(255) not null,<br>	password varchar(255)<br>);<br>insert into t_user(id,password) values(1,&#x27;123&#x27;);<br>	#ERROR 1364 (HY000): Field &#x27;username&#x27; doesn&#x27;t have a default value<br>insert into t_user(id,username,password) values(1,&#x27;lisi&#x27;,&#x27;123&#x27;);<br><br>3、唯一性约束（unique）<br>* 唯一约束修饰的字段具有唯一性，不能重复。但可以为NULL。<br>* 案例：给某一列添加unique<br>drop table if exists t_user;<br>create table t_user(<br>	id int,<br>	username varchar(255) unique  #列级约束<br>);<br>insert into t_user values(1,&#x27;zhangsan&#x27;);<br>insert into t_user values(2,&#x27;zhangsan&#x27;);<br>#ERROR 1062 (23000): Duplicate entry &#x27;zhangsan&#x27; for key &#x27;username&#x27;<br><br>insert into t_user(id) values(2);<br>insert into t_user(id) values(3);<br>insert into t_user(id) values(4);<br><br>* 案例：给两个列或者多个列添加unique<br>drop table if exists t_user;<br>create table t_user(<br>	id int, <br>	usercode varchar(255),<br>	username varchar(255),<br>	unique(usercode,username) // 多个字段联合起来添加1个约束unique 【表级约束】<br>);<br>insert into t_user values(1,&#x27;111&#x27;,&#x27;zs&#x27;);<br>insert into t_user values(2,&#x27;111&#x27;,&#x27;ls&#x27;);<br>insert into t_user values(3,&#x27;222&#x27;,&#x27;zs&#x27;);<br>select * from t_user;<br>insert into t_user values(4,&#x27;111&#x27;,&#x27;zs&#x27;);<br>#ERROR 1062 (23000): Duplicate entry &#x27;111-zs&#x27; for key &#x27;usercode&#x27;<br><br>drop table if exists t_user;<br>create table t_user(<br>	id int, <br>	usercode varchar(255) unique,<br>	username varchar(255) unique #两个列级约束<br>);<br>insert into t_user values(1,&#x27;111&#x27;,&#x27;zs&#x27;);<br>insert into t_user values(2,&#x27;111&#x27;,&#x27;ls&#x27;);<br>#ERROR 1062 (23000): Duplicate entry &#x27;111&#x27; for key &#x27;usercode&#x27;<br>* 注意： unique既有列级约束又有表级约束， not null约束只有列级约束。没有表级约束。<br><br>4、主键约束<br>* 怎么给一张表添加主键约束呢？<br>drop table if exists t_user;<br>create table t_user(<br>	id int primary key,  # 列级约束<br>	username varchar(255),<br>	email varchar(255)<br>);<br>insert into t_user(id,username,email) values(1,&#x27;zs&#x27;,&#x27;zs@123.com&#x27;);<br>insert into t_user(id,username,email) values(2,&#x27;ls&#x27;,&#x27;ls@123.com&#x27;);<br>insert into t_user(id,username,email) values(3,&#x27;ww&#x27;,&#x27;ww@123.com&#x27;);<br>select * from t_user;<br>	+----+----------+------------+<br>	| id | username | email      |<br>	+----+----------+------------+<br>	|  1 | zs       | zs@123.com |<br>	|  2 | ls       | ls@123.com |<br>	|  3 | ww       | ww@123.com |<br>	+----+----------+------------+<br><br>insert into t_user(id,username,email) values(1,&#x27;jack&#x27;,&#x27;jack@123.com&#x27;);<br>#ERROR 1062 (23000): Duplicate entry &#x27;1&#x27; for key &#x27;PRIMARY&#x27;<br><br>insert into t_user(username,email) values(&#x27;jack&#x27;,&#x27;jack@123.com&#x27;);<br>#ERROR 1364 (HY000): Field &#x27;id&#x27; doesn&#x27;t have a default value<br>	<br>根据以上的测试得出：id是主键，因为添加了主键约束，主键字段中的数据不能为NULL，也不能重复。<br>主键的特点：不能为NULL，也不能重复。<br><br>* 主键相关的术语？<br>	主键约束 : primary key<br>	主键字段 : id字段添加 primary key之后，id叫做主键字段<br>	主键值 : id字段中的每一个值都是主键值。<br><br>* 主键有什么作用？<br>	- 表的设计三范式中有要求，第一范式就要求任何一张表都应该有主键。<br>	- 主键的作用：主键值是这行记录在这张表当中的唯一标识。（就像一个人的身份证号码一样。）<br><br>* 主键的分类？<br>根据主键字段的字段数量来划分：<br>	单一主键（推荐的，常用的。）<br>	复合主键(多个字段联合起来添加一个主键约束)（复合主键不建议使用，因为复合主键违背三范式。）<br>根据主键性质来划分：<br>	自然主键：主键值最好就是一个和业务没有任何关系的自然数。（这种方式是推荐的）<br>	业务主键：主键值和系统的业务挂钩，例如：拿着银行卡的卡号做主键，拿着身份证号码作为主键。（不推荐用）<br>	#最好不要拿着和业务挂钩的字段作为主键。因为以后业务一旦发生改变的时候，主键值可能也需要随着发生变化，但有的时候没有办法变化，因为变化可能会导致主键值重复。<br><br>* 一张表的主键约束只能有1个。（必须记住）<br>* 使用表级约束方式定义主键：<br>drop table if exists t_user;<br>create table t_user(<br>	id int,<br>	username varchar(255),<br>	primary key(id)<br>);<br>insert into t_user(id,username) values(1,&#x27;zs&#x27;);<br>insert into t_user(id,username) values(2,&#x27;ls&#x27;);<br>insert into t_user(id,username) values(3,&#x27;ws&#x27;);<br>insert into t_user(id,username) values(4,&#x27;cs&#x27;);<br>select * from t_user;<br><br>insert into t_user(id,username) values(4,&#x27;cx&#x27;);<br>#ERROR 1062 (23000): Duplicate entry &#x27;4&#x27; for key &#x27;PRIMARY&#x27;<br><br>以下内容是演示以下复合主键，不需要掌握：<br>drop table if exists t_user;<br>create table t_user(<br>	id int,<br>	username varchar(255),<br>	password varchar(255),<br>	primary key(id,username)<br>);<br>insert .......<br><br>* mysql提供主键值自增：（非常重要。）<br>drop table if exists t_user;<br>create table t_user(<br>	id int primary key auto_increment, <br>    #id字段自动维护一个自增的数字，从1开始，以1递增。<br>	username varchar(255)<br>);<br>insert into t_user(username) values(&#x27;a&#x27;);<br>insert into t_user(username) values(&#x27;b&#x27;);<br>insert into t_user(username) values(&#x27;c&#x27;);<br>insert into t_user(username) values(&#x27;d&#x27;);<br>insert into t_user(username) values(&#x27;e&#x27;);<br>insert into t_user(username) values(&#x27;f&#x27;);<br>select * from t_user;<br>#提示:Oracle当中也提供了一个自增机制，叫做：序列（sequence）对象。<br><br>5、外键约束<br>* 关于外键约束的相关术语：<br>	外键约束: foreign key<br>	外键字段：添加有外键约束的字段<br>	外键值：外键字段中的每一个值。<br><br>* 业务背景：<br>请设计数据库表，用来维护学生和班级的信息？<br>	第一种方案：一张表存储所有数据<br>	no(pk)		name	classno		classname<br>	------------------------------------------------<br>	1			zs1		101			北京亦庄二中高三1班<br>	2			zs2		101			北京亦庄二中高三1班<br>	3			zs3		102			北京亦庄二中高三2班<br>	4			zs4		102			北京亦庄二中高三2班<br>	5			zs5		102			北京亦庄二中高三2班<br>	缺点：冗余。【不推荐】<br><br>	第二种方案：两张表（班级表和学生表）<br>	t_class 班级表<br>	cno(pk)		cname<br>	------------------------<br>	101		北京亦庄二中高三1班<br>	102		北京亦庄二中高三2班<br><br>	t_student 学生表<br>	sno(pk)		sname		classno(fk)#该字段添加外键约束<br>	--------------------------------------------------<br>	1			zs1			101<br>	2			zs2			101<br>	3			zs3			102<br>	4			zs4			102<br>	5			zs5			102<br>	<br>* 将以上表的建表语句写出来：<br>	t_student中的classno字段引用t_class表中的cno字段，此时t_student表叫做子表。t_class表叫做父表。<br>	顺序要求：<br>		删除数据的时候，先删除子表，再删除父表。<br>		添加数据的时候，先添加父表，再添加子表。<br>		创建表的时候，先创建父表，再创建子表。<br>		删除表的时候，先删除子表，再删除父表。<br>drop table if exists t_student;<br>drop table if exists t_class;<br>create table t_class(<br>	cno int,<br>	cname varchar(255),<br>	primary key(cno)<br>);<br><br>create table t_student(<br>	sno int,<br>	sname varchar(255),<br>	classno int,<br>	primary key(sno),<br>	foreign key(classno) references t_class(cno)<br>);<br><br>insert into t_class values(101,&#x27;xxxxxxx&#x27;);<br>insert into t_class values(102,&#x27;yyyyyyy&#x27;);<br><br>insert into t_student values(1,&#x27;zs1&#x27;,101);<br>insert into t_student values(2,&#x27;zs2&#x27;,101);<br>insert into t_student values(3,&#x27;zs3&#x27;,102);<br>insert into t_student values(4,&#x27;zs4&#x27;,102);<br>insert into t_student values(5,&#x27;zs5&#x27;,102);<br>insert into t_student values(6,&#x27;zs6&#x27;,102);<br>select * from t_class;<br>select * from t_student;<br><br>insert into t_student values(7,&#x27;lisi&#x27;,103);<br>#ERROR 1452 (23000): Cannot add or update a child row: a foreign key constraint fails (`bjpowernode`.INT `t_student_ibfk_1` FOREIGN KEY (`classno`) REFERENCES `t_class` (`cno`))<br><br>* 外键值可以为NULL<br><br>* 外键字段引用其他表的某个字段的时候，被引用的字段必须是主键吗？<br>	注意：被引用的字段不一定是主键，但至少具有unique约束。一般情况下都是引用主键<br></code></pre></td></tr></table></figure>
<h5 id="4、删除表"><a href="#4、删除表" class="headerlink" title="4、删除表"></a>4、删除表</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs mysql">drop table 表名; #这个通用。<br>drop table if exists 表名; #oracle不支持这种写法。<br></code></pre></td></tr></table></figure>

<h4 id="5-3、数据操作语言（DML）"><a href="#5-3、数据操作语言（DML）" class="headerlink" title="5.3、数据操作语言（DML）"></a>5.3、数据操作语言（DML）</h4><h5 id="1、insert语句插入数据"><a href="#1、insert语句插入数据" class="headerlink" title="1、insert语句插入数据"></a>1、insert语句插入数据</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br></pre></td><td class="code"><pre><code class="hljs mysql">语法格式：<br>insert into 表名(字段名1,字段名2,字段名3,....) values(值1,值2,值3,....)<br>	要求：字段的数量和值的数量相同，并且数据类型要对应相同。<br>insert into t_student(no,name,sex,classno,birth) values(1,&#x27;zhangsan&#x27;,&#x27;1&#x27;,&#x27;gaosan1ban&#x27;);<br>#ERROR 1136 (21S01): Column count doesn&#x27;t match value count at row 1<br><br>insert into t_student(no,name,sex,classno,birth) values(1,&#x27;zhangsan&#x27;,&#x27;1&#x27;,&#x27;gaosan1ban&#x27;, &#x27;1950-10-12&#x27;);<br>select * from t_student;<br>    +------+----------+------+------------+------------+<br>    | no   | name     | sex  | classno    | birth      |<br>    +------+----------+------+------------+------------+<br>    |    1 | zhangsan | 1    | gaosan1ban | 1950-10-12 |<br>    +------+----------+------+------------+------------+<br><br>insert into t_student(name,sex,classno,birth,no) values(&#x27;lisi&#x27;,&#x27;1&#x27;,&#x27;gaosan1ban&#x27;, &#x27;1950-10-12&#x27;,2);<br>select * from t_student;<br>    +------+----------+------+------------+------------+<br>    | no   | name     | sex  | classno    | birth      |<br>    +------+----------+------+------------+------------+<br>    |    1 | zhangsan | 1    | gaosan1ban | 1950-10-12 |<br>    |    2 | lisi     | 1    | gaosan1ban | 1950-10-12 |<br>    +------+----------+------+------------+------------+<br><br>insert into t_student(name) values(&#x27;wangwu&#x27;); #除name字段之外，剩下的所有字段自动插入NULL。<br>select * from t_student;<br>+------+----------+------+------------+------------+<br>| no   | name     | sex  | classno    | birth      |<br>+------+----------+------+------------+------------+<br>|    1 | zhangsan | 1    | gaosan1ban | 1950-10-12 |<br>|    2 | lisi     | 1    | gaosan1ban | 1950-10-12 |<br>| NULL | wangwu   | NULL | NULL       | NULL       |<br>+------+----------+------+------------+------------+<br><br>insert into t_student(no) values(3); <br>select * from t_student;<br>+------+----------+------+------------+------------+<br>| no   | name     | sex  | classno    | birth      |<br>+------+----------+------+------------+------------+<br>|    1 | zhangsan | 1    | gaosan1ban | 1950-10-12 |<br>|    2 | lisi     | 1    | gaosan1ban | 1950-10-12 |<br>| NULL | wangwu   | NULL | NULL       | NULL       |<br>|    3 | NULL     | NULL | NULL       | NULL       |<br>+------+----------+------+------------+------------+<br><br>drop table if exists t_student; #当这个表存在的话删除。<br>create table t_student(<br>	no bigint,<br>	name varchar(255),<br>	sex char(1) default 1,#不写default默认值是null<br>	classno varchar(255),<br>	birth char(10)<br>);<br><br>insert into t_student(name) values(&#x27;zhangsan&#x27;);<br>select * from t_student;<br>    +------+----------+------+---------+-------+<br>    | no   | name     | sex  | classno | birth |<br>    +------+----------+------+---------+-------+<br>    | NULL | zhangsan | 1    | NULL    | NULL  |<br>    +------+----------+------+---------+-------+<br><br>需要注意的地方：<br>	当一条insert语句执行成功之后，表格当中必然会多一行记录。<br>	即使多的这一行记录当中某些字段是NULL，后期也没有办法再执行<br>	insert语句插入数据后，只能使用update进行更新。<br><br>#字段可以省略不写，但是后面的value对数量和顺序都有要求。<br>insert into t_student values(1,&#x27;jack&#x27;,&#x27;0&#x27;,&#x27;gaosan2ban&#x27;,&#x27;1986-10-23&#x27;);<br>select * from t_student;<br>    +------+----------+------+------------+------------+<br>    | no   | name     | sex  | classno    | birth      |<br>    +------+----------+------+------------+------------+<br>    | NULL | zhangsan | 1    | NULL       | NULL       |<br>    |    1 | jack     | 0    | gaosan2ban | 1986-10-23 |<br>    +------+----------+------+------------+------------+<br><br>insert into t_student values(1,&#x27;jack&#x27;,&#x27;0&#x27;,&#x27;gaosan2ban&#x27;);<br>#ERROR 1136 (21S01): Column count doesn&#x27;t match value count at row 1<br><br># 一次插入多行数据<br>insert into t_student<br>	(no,name,sex,classno,birth) <br>values<br>	(3,&#x27;rose&#x27;,&#x27;1&#x27;,&#x27;gaosi2ban&#x27;,&#x27;1952-12-14&#x27;),(4,&#x27;laotie&#x27;,&#x27;1&#x27;,&#x27;gaosi2ban&#x27;,&#x27;1955-12-14&#x27;);<br><br>select * from t_student;<br>    +------+----------+------+------------+------------+<br>    | no   | name     | sex  | classno    | birth      |<br>    +------+----------+------+------------+------------+<br>    | NULL | zhangsan | 1    | NULL       | NULL       |<br>    |    1 | jack     | 0    | gaosan2ban | 1986-10-23 |<br>    |    3 | rose     | 1    | gaosi2ban  | 1952-12-14 |<br>    |    4 | laotie   | 1    | gaosi2ban  | 1955-12-14 |<br>    +------+----------+------+------------+------------+<br></code></pre></td></tr></table></figure>
<h5 id="2、表的复制"><a href="#2、表的复制" class="headerlink" title="2、表的复制"></a>2、表的复制</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs mysql">语法：<br>	create table 表名 as select语句;<br>	将查询结果当做表创建出来。<br>create table emp2 as select empno,ename from emp;<br></code></pre></td></tr></table></figure>

<h5 id="3、将查询结果插入到一张表中"><a href="#3、将查询结果插入到一张表中" class="headerlink" title="3、将查询结果插入到一张表中"></a>3、将查询结果插入到一张表中</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs mysql">create table dept1 as select * from dept;<br>insert into dept1 select * from dept;#将查询结果插入到一张表中<br>select * from dept1;<br>	+--------+------------+----------+<br>	| DEPTNO | DNAME      | LOC      |<br>	+--------+------------+----------+<br>	|     10 | ACCOUNTING | NEW YORK |<br>	|     20 | RESEARCH   | DALLAS   |<br>	|     30 | SALES      | CHICAGO  |<br>	|     40 | OPERATIONS | BOSTON   |<br>	|     10 | ACCOUNTING | NEW YORK |<br>	|     20 | RESEARCH   | DALLAS   |<br>	|     30 | SALES      | CHICAGO  |<br>	|     40 | OPERATIONS | BOSTON   |<br>	+--------+------------+----------+<br></code></pre></td></tr></table></figure>
<h5 id="4、修改数据：update"><a href="#4、修改数据：update" class="headerlink" title="4、修改数据：update"></a>4、修改数据：update</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs mysql">语法格式：<br>	update 表名 set 字段名1=值1,字段名2=值2... where 条件;<br>注意：没有条件整张表数据全部更新。<br>	<br>案例：将部门10的LOC修改为SHANGHAI，将部门名称修改为RENSHIBU<br>update dept1 set loc = &#x27;SHANGHAI&#x27;, dname = &#x27;RENSHIBU&#x27; where deptno = 10;<br>select * from dept1;<br>	+--------+------------+----------+<br>	| DEPTNO | DNAME      | LOC      |<br>	+--------+------------+----------+<br>	|     10 | RENSHIBU   | SHANGHAI |<br>	|     20 | RESEARCH   | DALLAS   |<br>	|     30 | SALES      | CHICAGO  |<br>	|     40 | OPERATIONS | BOSTON   |<br>	|     10 | RENSHIBU   | SHANGHAI |<br>	|     20 | RESEARCH   | DALLAS   |<br>	|     30 | SALES      | CHICAGO  |<br>	|     40 | OPERATIONS | BOSTON   |<br>	+--------+------------+----------+<br><br>更新所有记录<br>update dept1 set loc = &#x27;x&#x27;, dname = &#x27;y&#x27;;#没有加where条件修改所有记录<br>select * from dept1;<br>		+--------+-------+------+<br>		| DEPTNO | DNAME | LOC  |<br>		+--------+-------+------+<br>		|     10 | y     | x    |<br>		|     20 | y     | x    |<br>		|     30 | y     | x    |<br>		|     40 | y     | x    |<br>		|     10 | y     | x    |<br>		|     20 | y     | x    |<br>		|     30 | y     | x    |<br>		|     40 | y     | x    |<br>		+--------+-------+------+<br></code></pre></td></tr></table></figure>
<h5 id="5、删除数据"><a href="#5、删除数据" class="headerlink" title="5、删除数据"></a>5、删除数据</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs mysql">语法格式：<br>	delete from 表名 where 条件;<br>注意：没有条件全部删除。<br>	<br>删除10部门数据？<br>	delete from dept1 where deptno = 10;<br>删除所有记录？<br>	delete from dept1;<br>#delete 删除数据的时候速度慢，原因是没有真正的释放存储空间，可以回滚<br>怎么删除大表中的数据？（重点）<br>	truncate table 表名; #表被截断，不可回滚。永久丢失。<br></code></pre></td></tr></table></figure>

<h3 id="6、存储引擎（了解内容）"><a href="#6、存储引擎（了解内容）" class="headerlink" title="6、存储引擎（了解内容）"></a>6、存储引擎（了解内容）</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><code class="hljs mysql">6.1、完整的建表语句<br>	CREATE TABLE `t_x` (<br>	  `id` int(11) DEFAULT NULL<br>	) ENGINE=InnoDB DEFAULT CHARSET = utf8;<br>注意：在MySQL当中，凡是标识符是可以使用飘号`括起来的。最好别用，不通用。<br>	建表的时候可以指定存储引擎，也可以指定字符集。<br>	mysql默认使用的存储引擎是InnoDB方式。<br>	默认采用的字符集是UTF8<br><br>6.2、什么是存储引擎呢？<br>	存储引擎这个名字只有在mysql中存在。（Oracle中有对应的机制，但是不叫做存储引擎。Oracle中没有特殊的名字，就是“表的存储方式”）<br>	mysql支持很多存储引擎，每一个存储引擎都对应了一种不同的存储方式。<br>	每一个存储引擎都有自己的优缺点，需要在合适的时机选择合适的存储引擎。<br><br>6.3、查看当前mysql支持的存储引擎？<br>	show engines \G<br>	#5.5.62版本支持9个存储引擎<br>6.4、常见的存储引擎？<br><br>		Engine: MyISAM<br>			  Support: YES<br>			  Comment: MyISAM storage engine<br>		Transactions: NO<br>					 XA: NO<br>		  Savepoints: NO<br>		<br>		MyISAM这种存储引擎不支持事务。<br>		MyISAM是mysql最常用的存储引擎，但是这种引擎不是默认的。<br>		MyISAM采用三个文件组织一张表：<br>			xxx.frm（存储格式（表结构）的文件）<br>			xxx.MYD（存储表中数据的文件）<br>			xxx.MYI（存储表中索引的文件）<br>		优点：可被压缩，节省存储空间。并且可以转换为只读表，提高检索效率。<br>		缺点：不支持事务。<br>	-----------------------------------------------------------------------------<br>			  Engine: InnoDB<br>			  Support: DEFAULT<br>			  Comment: Supports transactions, row-level locking, and foreign keys<br>		Transactions: YES<br>					 XA: YES<br>		  Savepoints: YES<br>			<br>		优点：支持事务、行级锁、外键等。这种存储引擎数据的安全得到保障。<br>		<br>		表的结构存储在xxx.frm文件中<br>		数据存储在 tablespace这样的表空间中（逻辑概念），无法被压缩，无法转换成只读。<br>		这种 InnoDB存储引擎在MySQL数据库崩溃之后提供自动恢复机制。<br>		InnoDB支持级联删除和级联更新。<br>	-------------------------------------------------------------------------------------<br>				Engine: MEMORY<br>			  Support: YES<br>			  Comment: Hash based, stored in memory, useful for temporary tables<br>		Transactions: NO<br>					 XA: NO<br>		  Savepoints: NO<br>		<br>		缺点：不支持事务。数据容易丢失。因为所有数据和索引都是存储在内存当中的。<br>		优点：查询速度最快。<br>		以前叫做HEPA引擎。<br></code></pre></td></tr></table></figure>

<h4 id="6-1、面试题"><a href="#6-1、面试题" class="headerlink" title="6.1、面试题"></a>6.1、面试题</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs mysql">有 3 个表 S(学生表)，C（课程表），SC（学生选课表）<br>S（SNO，SNAME）代表（学号，姓名）<br>C（CNO，CNAME，CTEACHER）代表（课号，课名，教师）<br>SC（SNO，CNO，SCGRADE）代表（学号，课号，成绩）<br>问题：<br>1，找出没选过“黎明”老师的所有学生姓名。<br>select xx from sc <br>2，列出 2 门以上（含2 门）不及格学生姓名及平均成绩。<br>3，即学过 1 号课程又学过 2 号课所有学生的姓名。<br></code></pre></td></tr></table></figure>



<h3 id="7、事务（Transaction）"><a href="#7、事务（Transaction）" class="headerlink" title="7、事务（Transaction）"></a>7、事务（Transaction）</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br></pre></td><td class="code"><pre><code class="hljs mysql">7.1、什么是事务？<br>	一个事务是一个完整的业务逻辑单元，不可再分。<br><br>	比如：银行账户转账，从A账户向B账户转账10000.需要执行两条update语句：<br>update t_act set balance = balance - 10000 where actno = &#x27;act-001&#x27;;<br>update t_act set balance = balance + 10000 where actno = &#x27;act-002&#x27;;<br>	<br>	以上两条DML语句必须同时成功，或者同时失败，不允许出现一条成功，一条失败。<br>	要想保证以上的两条DML语句同时成功或者同时失败，那么就需要使用数据库的“事务机制”。<br><br>7.2、和事务相关的语句只有：DML语句。（ insert delete update）*****<br>	为什么？因为它们这三个语句都是和数据库表当中的“数据”相关的。<br>	事务的存在是为了保证数据的完整性，安全性。<br><br>7.3、假设所有的业务都能使用1条DML语句搞定，还需要事务机制吗？<br>	不需要事务。<br>	但实际情况不是这样的，通常一个“事儿（事务【业务】）”需要多条DML语句共同联合完成。<br><br>7.4、事务的特性？<br>	事务包括四大特性：ACID<br>	A: 原子性：事务是最小的工作单元，不可再分。<br>	C: 一致性：事务必须保证多条DML语句同时成功或者同时失败。<br>	I：隔离性：事务A与事务B之间具有隔离。<br>	D：持久性：持久性说的是最终数据必须持久化到硬盘文件中，事务才算成功的结束。<br><br>7.5、关于事务之间的隔离性<br>	事务隔离性存在隔离级别，理论上隔离级别包括4个：<br>		第一级别：读未提交（ read uncommitted）<br>			对方事务还没有提交，我们当前事务可以读取到对方未提交的数据。<br>			读未提交存在脏读（Dirty Read）现象：表示读到了脏的数据。<br>		第二级别：读已提交（ read committed）<br>			对方事务提交之后的数据我方可以读取到。<br>			这种隔离级别解决了: 脏读现象没有了。<br>			读已提交存在的问题是：不可重复读。<br>		第三级别：可重复读（ repeatable read）<br>			这种隔离级别解决了：不可重复读问题。<br>			这种隔离级别存在的问题是：读取到的数据是幻象。<br>		第四级别：序列化读/串行化读（ serializable） <br>			解决了所有问题。<br>			效率低。需要事务排队。<br>		<br>		oracle数据库默认的隔离级别是：读已提交。<br>		mysql数据库默认的隔离级别是：可重复读。<br><br>7.6、演示事务<br>	* mysql事务默认情况下是自动提交的。<br>		（什么是自动提交？只要执行任意一条DML语句则提交一次。）怎么关闭自动提交？ start transaction;<br>	<br>	* 准备表：<br>		drop table if exists t_user;<br>		create table t_user(<br>			id int primary key auto_increment,<br>			username varchar(255)<br>		);<br>	<br>	* 演示：mysql中的事务是支持自动提交的，只要执行一条DML，则提交一次。<br>		mysql&gt; insert into t_user(username) values(&#x27;zs&#x27;);<br>		Query OK, 1 row affected (0.03 sec)<br>#下面展示的是mysql是自动提交的，执行完一条insert语句之后自动提交，回滚回不去<br>		mysql&gt; select * from t_user;<br>		+----+----------+<br>		| id | username |<br>		+----+----------+<br>		|  1 | zs       |<br>		+----+----------+<br>		1 row in set (0.00 sec)<br><br>		mysql&gt; rollback;<br>		Query OK, 0 rows affected (0.00 sec)<br><br>		mysql&gt; select * from t_user;<br>		+----+----------+<br>		| id | username |<br>		+----+----------+<br>		|  1 | zs       |<br>		+----+----------+<br>		1 row in set (0.00 sec)<br>#下面演示的是关闭mysql的自动提交机制<br>#使用 start transaction 表示开始一个事务，一旦使用rollback或者commit则该事务结束。<br>	* 演示：使用 start transaction;关闭自动提交机制。<br>		mysql&gt; start transaction;<br>		Query OK, 0 rows affected (0.00 sec)<br><br>		mysql&gt; insert into t_user(username) values(&#x27;lisi&#x27;);<br>		Query OK, 1 row affected (0.00 sec)<br><br>		mysql&gt; select * from t_user;<br>		+----+----------+<br>		| id | username |<br>		+----+----------+<br>		|  1 | zs       |<br>		|  2 | lisi     |<br>		+----+----------+<br>		2 rows in set (0.00 sec)<br><br>		mysql&gt; insert into t_user(username) values(&#x27;wangwu&#x27;);<br>		Query OK, 1 row affected (0.00 sec)<br><br>		mysql&gt; select * from t_user;<br>		+----+----------+<br>		| id | username |<br>		+----+----------+<br>		|  1 | zs       |<br>		|  2 | lisi     |<br>		|  3 | wangwu   |<br>		+----+----------+<br>		3 rows in set (0.00 sec)<br><br>		mysql&gt; rollback;<br>		Query OK, 0 rows affected (0.02 sec)<br><br>		mysql&gt; select * from t_user;<br>		+----+----------+<br>		| id | username |<br>		+----+----------+<br>		|  1 | zs       |<br>		+----+----------+<br>		1 row in set (0.00 sec)<br>	#上面演示的是回滚（rollback）下面演示提交（commit）<br>		-------------------------------------------------------------------<br>		mysql&gt; start transaction;<br>		Query OK, 0 rows affected (0.00 sec)<br><br>		mysql&gt; insert into t_user(username) values(&#x27;wangwu&#x27;);<br>		Query OK, 1 row affected (0.00 sec)<br><br>		mysql&gt; insert into t_user(username) values(&#x27;rose&#x27;);<br>		Query OK, 1 row affected (0.00 sec)<br><br>		mysql&gt; insert into t_user(username) values(&#x27;jack&#x27;);<br>		Query OK, 1 row affected (0.00 sec)<br><br>		mysql&gt; select * from t_user;<br>		+----+----------+<br>		| id | username |<br>		+----+----------+<br>		|  1 | zs       |<br>		|  4 | wangwu   |<br>		|  5 | rose     |<br>		|  6 | jack     |<br>		+----+----------+<br>		4 rows in set (0.00 sec)<br><br>		mysql&gt; commit;<br>		Query OK, 0 rows affected (0.04 sec)<br><br>		mysql&gt; select * from t_user;<br>		+----+----------+<br>		| id | username |<br>		+----+----------+<br>		|  1 | zs       |<br>		|  4 | wangwu   |<br>		|  5 | rose     |<br>		|  6 | jack     |<br>		+----+----------+<br>		4 rows in set (0.00 sec)<br>		#此时已经提交rollback只能回滚到上次的提交点<br>		mysql&gt; rollback;<br>		Query OK, 0 rows affected (0.00 sec)<br><br>		mysql&gt; select * from t_user;<br>		+----+----------+<br>		| id | username |<br>		+----+----------+<br>		|  1 | zs       |<br>		|  4 | wangwu   |<br>		|  5 | rose     |<br>		|  6 | jack     |<br>		+----+----------+<br>		4 rows in set (0.00 sec)<br>		<br>#打开两个dos窗口演示事物隔离级别的效果<br>	设置事物的全局隔离级别：<br>		set global transaction isolation level read uncommited;<br>	查看事务的全局隔离级别：<br>		select @@global.tx_isolation;<br>		<br>	* 演示两个事务，假如隔离级别<br>		演示第1级别：读未提交<br>			set global transaction isolation level read uncommitted;<br>		演示第2级别：读已提交<br>			set global transaction isolation level read committed;<br>		演示第3级别：可重复读<br>			set global transaction isolation level repeatable read;<br>		演示第4级别：可重复读<br>			set global transaction isolation level serializable;<br>		<br>	* mysql远程登录：mysql -h192.168.151.18 -uroot -p444<br></code></pre></td></tr></table></figure>

<h3 id="8、索引"><a href="#8、索引" class="headerlink" title="8、索引"></a>8、索引</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><code class="hljs mysql">8.1、什么是索引？有什么用？<br>	索引就相当于一本书的目录，通过目录可以快速的找到对应的资源。<br>	在数据库方面，查询一张表的时候有两种检索方式：<br>		第一种方式：全表扫描<br>		第二种方式：根据索引检索（效率很高）<br><br>	索引为什么可以提高检索效率呢？<br>		其实最根本的原理是缩小了扫描的范围。<br>	<br>	索引虽然可以提高检索效率，但是不能随意的添加索引，因为索引也是数据库当中的对象，也需要数据库不断的维护。是有维护成本的。比如，表中的数据经常被修改，这样就不适合添加索引，因为数据一旦修改，索引需要重新排序，进行维护。<br><br>	添加索引是给某一个字段，或者说某些字段添加索引。<br>	select ename,sal from emp where ename = &#x27;SMITH&#x27;;<br>	当ename字段上没有添加索引的时候，以上sql语句会进行全表扫描，扫描ename字段中所有的值。<br>	当ename字段上添加索引的时候，以上sql语句会根据索引扫描，快速定位。<br><br>8.2、怎么创建索引对象？怎么删除索引对象？<br>	创建索引对象：<br>		create index 索引名称 on 表名(字段名);<br>	删除索引对象：<br>		drop index 索引名称 on 表名;<br><br>8.3、什么时候考虑给字段添加索引？（满足什么条件）<br>	* 数据量庞大。（根据客户的需求，根据线上的环境）<br>	* 该字段很少的DML操作。（因为字段进行修改操作，索引也需要维护）<br>	* 该字段经常出现在 where子句中。（经常根据哪个字段查询）<br><br>8.4、注意：主键和具有 unique约束的字段自动会添加索引。<br>	根据主键查询效率较高。尽量根据主键检索。<br><br>8.5、查看sql语句的执行计划：<br>	mysql&gt; explain select ename,sal from emp where sal = 5000;<br>	给薪资sal字段添加索引：<br>	create index emp_sal_index on emp(sal);<br>	mysql&gt; explain select ename,sal from emp where sal = 5000;<br>	#加了索引的执行计划和不加索引的执行计划有区别<br>8.6、索引底层采用的数据结构是：B + Tree<br><br>8.7、索引的实现原理？<br>	通过B Tree缩小扫描范围，底层索引进行了排序，分区，索引会携带数据在表中的“物理地址”，<br>	最终通过索引检索到数据之后，获取到关联的物理地址，通过物理地址定位表中的数据，效率<br>	是最高的。<br>		select ename from emp where ename = &#x27;SMITH&#x27;;<br>		通过索引转换为：<br>		select ename from emp where 物理地址 = 0x3;<br><br>8.8、索引的分类？<br>	单一索引：给单个字段添加索引<br>	复合索引: 给多个字段联合起来添加1个索引<br>	主键索引：主键上会自动添加索引<br>	唯一索引：有unique约束的字段上会自动添加索引<br>	....<br><br>8.9、索引什么时候失效？<br>	select ename from emp where ename like &#x27;%A%&#x27;;<br>	模糊查询的时候，第一个通配符使用的是%，这个时候索引是失效的。<br></code></pre></td></tr></table></figure>

<h3 id="9、视图-view"><a href="#9、视图-view" class="headerlink" title="9、视图(view)"></a>9、视图(view)</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs mysql">9.1、什么是视图？<br>	站在不同的角度去看到数据。（同一张表的数据，通过不同的角度去看待）。<br><br>9.2、怎么创建视图？怎么删除视图？<br>	create view myview as select empno,ename from emp;<br>	drop view myview;<br>	注意：只有DQL语句才能以视图对象的方式创建出来。<br><br>9.3、对视图进行增删改查，会影响到原表数据。（通过视图影响原表数据的，不是直接操作的原表）<br>可以对视图进行CRUD操作。<br><br>9.4、面向视图操作？<br>mysql&gt; select * from myview;<br>	+-------+--------+<br>	| empno | ename  |<br>	+-------+--------+<br>	|  7369 | SMITH  |<br>	|  7499 | ALLEN  |<br>	|  7521 | WARD   |<br>	|  7566 | JONES  |<br>	|  7654 | MARTIN |<br>	|  7698 | BLAKE  |<br>	|  7782 | CLARK  |<br>	|  7788 | SCOTT  |<br>	|  7839 | KING   |<br>	|  7844 | TURNER |<br>	|  7876 | ADAMS  |<br>	|  7900 | JAMES  |<br>	|  7902 | FORD   |<br>	|  7934 | MILLER |<br>	+-------+--------+<br>create table emp_bak as select * from emp;<br>create view myview1 as select empno,ename,sal from emp_bak;<br>update myview1 set ename=&#x27;hehe&#x27;,sal=1 where empno = 7369; # 通过视图修改原表数据。<br>delete from myview1 where empno = 7369; # 通过视图删除原表数据。<br><br>9.5、视图的作用？<br>	视图可以隐藏表的实现细节。保密级别较高的系统，数据库只对外提供相关的视图，java程序员只对视图对象进行CRUD。<br></code></pre></td></tr></table></figure>

<h3 id="10、DBA命令（DCL）"><a href="#10、DBA命令（DCL）" class="headerlink" title="10、DBA命令（DCL）"></a>10、DBA命令（DCL）</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs mysql">10.1、将数据库当中的数据导出<br>	在windows的dos命令窗口中执行：（导出整个库）#不是登录到mysql上执行<br>		mysqldump bjpowernode&gt;D:\bjpowernode.sql -uroot -p333<br>	<br>	在windows的dos命令窗口中执行：（导出指定数据库当中的指定表）#不是登录到mysql上执行<br>		mysqldump bjpowernode emp&gt;D:\bjpowernode.sql -uroot –p123<br>	#导出的是sql脚本，可以将这个sql脚本执行创建一个一模一样的表<br>10.2、导入数据<br>	create database bjpowernode;<br>	use bjpowernode;<br>	source D:\bjpowernode.sql<br></code></pre></td></tr></table></figure>

<h3 id="11、数据库设计三范式（重点内容，面试经常问）"><a href="#11、数据库设计三范式（重点内容，面试经常问）" class="headerlink" title="11、数据库设计三范式（重点内容，面试经常问）"></a>11、数据库设计三范式（重点内容，面试经常问）</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><code class="hljs mysql">11.1、什么是设计范式？<br>	设计表的依据。按照这个三范式设计的表不会出现数据冗余。<br><br>11.2、三范式都是哪些？<br><br>	第一范式：任何一张表都应该有主键，并且每一个字段原子性不可再分。<br>	第二范式：建立在第一范式的基础之上，所有非主键字段完全依赖主键，不能产生部分依赖。<br>********处理多对多情况？使用三张表，第三张表示关系表，关系表中有两个外键。********<br>		t_student学生表<br>		sno(pk)		sname<br>		-------------------<br>		1				张三<br>		2				李四<br>		3				王五<br><br>		t_teacher 讲师表<br>		tno(pk)		tname<br>		---------------------<br>		1				王老师<br>		2				张老师<br>		3				李老师<br><br>		t_student_teacher_relation 学生讲师关系表<br>		id(pk)		sno(fk)		tno(fk)<br>		----------------------------------<br>		1				1				3<br>		2				1				1<br>		3				2				2<br>		4				2				3<br>		5				3				1<br>		6				3				3<br>	<br>	第三范式：建立在第二范式的基础之上，所有非主键字段直接依赖主键，不能产生传递依赖。<br>		一对多？两张表，（一对多中）多对应的那个表加外键。<br>		#下面班级和学生是一对多的关系，所以学生表对应的是多，所以学生表加外键<br>		班级t_class<br>		cno(pk)			cname<br>		--------------------------<br>		1					班级1<br>		2					班级2<br><br>		学生t_student<br>		sno(pk)			sname				classno(fk)<br>		---------------------------------------------<br>		101				张1				1<br>		102				张2				1<br>		103				张3				2<br>		104				张4				2<br>		105				张5				2<br>	<br>	提醒：在实际的开发中，以满足客户的需求为主，有的时候会拿冗余换执行速度。<br><br>11.3、一对一怎么设计？<br><br>	一对一设计有两种方案：1.主键共享(pk + fk)<br>		t_user_login  用户登录表<br>		id(pk)		username			password<br>		--------------------------------------<br>		1				zs					123<br>		2				ls					456<br><br>		t_user_detail 用户详细信息表<br>		id(pk+fk)	realname			tel			....<br>		------------------------------------------------<br>		1				张三				1111111111<br>		2				李四				1111415621<br><br>	一对一设计有两种方案：2.外键唯一(unique)。<br>		t_user_login  用户登录表<br>		id(pk)		username			password<br>		--------------------------------------<br>		1				zs					123<br>		2				ls					456<br><br>		t_user_detail 用户详细信息表<br>		id(pk)		realname	 tel			 userid(fk+unique)....<br>		-----------------------------------------------------------<br>		1			张三			1111111111		2<br>		2			李四			1111415621		1<br></code></pre></td></tr></table></figure>

                
              </div>
            
            <hr/>
            <div>
              <div class="post-metas my-3">
  
    <div class="post-meta mr-3 d-flex align-items-center">
      <i class="iconfont icon-category"></i>
      

<span class="category-chains">
  
  
    
      <span class="category-chain">
        
  <a href="/categories/MySql/" class="category-chain-item">MySql</a>
  
  

      </span>
    
  
</span>

    </div>
  
  
    <div class="post-meta">
      <i class="iconfont icon-tags"></i>
      
        <a href="/tags/MySql/">#MySql</a>
      
    </div>
  
</div>


              
  

  <div class="license-box my-3">
    <div class="license-title">
      <div>MySQL学习笔记</div>
      <div>http://yoursite.com/2021/02/16/MySQL笔记/</div>
    </div>
    <div class="license-meta">
      
        <div class="license-meta-item">
          <div>Author</div>
          <div>ZSH</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>Posted on</div>
          <div>February 16, 2021</div>
        </div>
      
      
      <div class="license-meta-item">
        <div>Licensed under</div>
        <div>
          
            
            
              <a target="_blank" href="https://creativecommons.org/licenses/by/4.0/">
              <span class="hint--top hint--rounded" aria-label="BY - Attribution">
                <i class="iconfont icon-by"></i>
              </span>
              </a>
            
          
        </div>
      </div>
    </div>
    <div class="license-icon iconfont"></div>
  </div>



              
                <div class="post-prevnext my-3">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2022/07/29/%E7%8E%AF%E5%A2%83%E5%AE%89%E8%A3%85%E6%89%8B%E5%86%8C/" title="环境安装手册">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">环境安装手册</span>
                        <span class="visible-mobile">Previous</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2020/02/05/%E8%AE%A1%E8%92%9C%E5%AE%A2-%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%92%8C%E6%97%A5%E6%9C%9F/" title="计蒜客-字符串和日期">
                        <span class="hidden-mobile">计蒜客-字符串和日期</span>
                        <span class="visible-mobile">Next</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="margin-left: -1rem">
    <div id="toc">
  <p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;Table of Contents</p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>
  </div>
</div>





  



  



  



  



  







    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">Search</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">Keyword</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
    <div class="footer-content">
       <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
    </div>
  
  
  
  
</div>

  </footer>

  <!-- Scripts -->
  
  <script  src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://lib.baomitu.com/jquery/3.6.0/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>


  <script  src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var subtitle = document.getElementById('subtitle');
      if (!subtitle || !typing) {
        return;
      }
      var text = subtitle.getAttribute('data-typed-text');
      
        typing(text);
      
    })(window, document);
  </script>




  
    <script  src="/js/img-lazyload.js" ></script>
  




  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/tocbot/4.18.2/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      headingSelector : CONFIG.toc.headingSelector || 'h1,h2,h3,h4,h5,h6',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      collapseDepth   : CONFIG.toc.collapseDepth || 0,
      scrollSmooth    : true,
      headingsOffset  : -boardTop
    });
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }
  });
</script>


  <script src=https://lib.baomitu.com/clipboard.js/2.0.10/clipboard.min.js></script>

  <script>Fluid.plugins.codeWidget();</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/4.3.1/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script>Fluid.plugins.imageCaption();</script>

  <script  src="/js/local-search.js" ></script>





<!-- 主题的启动项，将它保持在最底部 -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">Blog works best with JavaScript enabled</div>
  </noscript>
</body>
</html>
