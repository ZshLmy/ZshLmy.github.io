<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>ZSH</title>
  
  <subtitle>ZSH&#39;s blog</subtitle>
  <link href="http://yoursite.com/atom.xml" rel="self"/>
  
  <link href="http://yoursite.com/"/>
  <updated>2022-08-01T14:13:23.000Z</updated>
  <id>http://yoursite.com/</id>
  
  <author>
    <name>ZSH</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>测试自动备份和自动打开md编辑器</title>
    <link href="http://yoursite.com/2022/08/01/%E6%B5%8B%E8%AF%95%E8%87%AA%E5%8A%A8%E5%A4%87%E4%BB%BD%E5%92%8C%E8%87%AA%E5%8A%A8%E6%89%93%E5%BC%80md%E7%BC%96%E8%BE%91%E5%99%A8/"/>
    <id>http://yoursite.com/2022/08/01/%E6%B5%8B%E8%AF%95%E8%87%AA%E5%8A%A8%E5%A4%87%E4%BB%BD%E5%92%8C%E8%87%AA%E5%8A%A8%E6%89%93%E5%BC%80md%E7%BC%96%E8%BE%91%E5%99%A8/</id>
    <published>2022-08-01T14:13:23.000Z</published>
    <updated>2022-08-01T14:13:23.000Z</updated>
    
    <content type="html"><![CDATA[<span id="more"></span><p>测试测试自动备份和自动打开md编辑器</p>]]></content>
    
    
      
      
    <summary type="html">&lt;span id=&quot;more&quot;&gt;&lt;/span&gt;

&lt;p&gt;测试测试自动备份和自动打开md编辑器&lt;/p&gt;
</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>测试</title>
    <link href="http://yoursite.com/2022/08/01/%E6%B5%8B%E8%AF%95/"/>
    <id>http://yoursite.com/2022/08/01/%E6%B5%8B%E8%AF%95/</id>
    <published>2022-08-01T12:48:37.000Z</published>
    <updated>2022-08-01T12:48:37.000Z</updated>
    
    <content type="html"><![CDATA[<span id="more"></span>]]></content>
    
    
      
      
    <summary type="html">&lt;span id=&quot;more&quot;&gt;&lt;/span&gt;

</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>环境安装手册</title>
    <link href="http://yoursite.com/2022/07/29/%E7%8E%AF%E5%A2%83%E5%AE%89%E8%A3%85%E6%89%8B%E5%86%8C/"/>
    <id>http://yoursite.com/2022/07/29/%E7%8E%AF%E5%A2%83%E5%AE%89%E8%A3%85%E6%89%8B%E5%86%8C/</id>
    <published>2022-07-29T13:51:26.000Z</published>
    <updated>2022-07-29T13:55:06.622Z</updated>
    
    <content type="html"><![CDATA[<p>配置各种安装环境速查</p><span id="more"></span><h1 id="编程环境安装手册——ubuntu"><a href="#编程环境安装手册——ubuntu" class="headerlink" title="编程环境安装手册——ubuntu"></a>编程环境安装手册——ubuntu</h1><h2 id="Ubuntu系统配置"><a href="#Ubuntu系统配置" class="headerlink" title="Ubuntu系统配置"></a>Ubuntu系统配置</h2><h3 id="更换镜像源"><a href="#更换镜像源" class="headerlink" title="更换镜像源"></a>更换镜像源</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#修改/etc/apt/目录下的sources.list文件</span></span><br><span class="line"><span class="variable">$cd</span> /etc/apt/</span><br><span class="line"><span class="comment">#做好备份</span></span><br><span class="line"><span class="variable">$sudo</span> <span class="built_in">mv</span> sources.list sources.list.bakup</span><br><span class="line"><span class="comment">#vim创建新的sources.list文件</span></span><br><span class="line"><span class="variable">$sudo</span> vim sources.list</span><br><span class="line"></span><br><span class="line"><span class="comment">#配置好文件后执行下面的命令</span></span><br><span class="line"><span class="comment">#会访问源列表sources.list里的每个网址，并读取软件列表，然后保存在本地</span></span><br><span class="line"><span class="variable">$sudo</span> apt-get update <span class="comment">#更新软件列表</span></span><br><span class="line"><span class="comment">#把本地已安装的软件，与刚下载的软件列表里对应软件进行对比，如果发现已安装的软件版本太低，就会提示你更新。</span></span><br><span class="line"><span class="variable">$sudo</span> apt-get upgrade <span class="comment">#更新软件</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#apt 可以看作 apt-get 和 apt-cache 命令的子集, 可以为包管理提供必要的命令选项。</span></span><br><span class="line"><span class="comment">#apt-get 虽然没被弃用，但作为普通用户，还是应该首先使用 apt。</span></span><br><span class="line"><span class="comment">#https://blog.csdn.net/liudsl/article/details/79200134</span></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#ubuntu20.04的阿里云网址</span></span><br><span class="line">deb http://mirrors.aliyun.com/ubuntu/ focal main restricted universe multiverse</span><br><span class="line">deb-src http://mirrors.aliyun.com/ubuntu/ focal main restricted universe multiverse</span><br><span class="line"></span><br><span class="line">deb http://mirrors.aliyun.com/ubuntu/ focal-security main restricted universe multiverse</span><br><span class="line">deb-src http://mirrors.aliyun.com/ubuntu/ focal-security main restricted universe multiverse</span><br><span class="line"></span><br><span class="line">deb http://mirrors.aliyun.com/ubuntu/ focal-updates main restricted universe multiverse</span><br><span class="line">deb-src http://mirrors.aliyun.com/ubuntu/ focal-updates main restricted universe multiverse</span><br><span class="line"></span><br><span class="line">deb http://mirrors.aliyun.com/ubuntu/ focal-proposed main restricted universe multiverse</span><br><span class="line">deb-src http://mirrors.aliyun.com/ubuntu/ focal-proposed main restricted universe multiverse</span><br><span class="line"></span><br><span class="line">deb http://mirrors.aliyun.com/ubuntu/ focal-backports main restricted universe multiverse</span><br><span class="line">deb-src http://mirrors.aliyun.com/ubuntu/ focal-backports main restricted universe multiverse</span><br></pre></td></tr></table></figure><hr><h3 id="配置ssh"><a href="#配置ssh" class="headerlink" title="配置ssh"></a>配置ssh</h3><p>ssh分为客户端和服务端程序，最流行的ssh协议实现是OpenSSH。即安装OpenSSH客户端和服务端程序。一般情况下windows作为客户端需要安装OpenSSH客户端程序，ubuntu作为服务端需要安装OpenSSH服务端程序。当然无论是windows还是ubuntu都可以即做客户端又做服务端，只需要安装对应程序即可。</p><h4 id="程序安装"><a href="#程序安装" class="headerlink" title="程序安装"></a>程序安装</h4><ul><li><p>windows安装OpenSSH程序可在 “设置-&gt;应用-&gt;可选功能-&gt;添加可选功能”中安装，其中有客户端和服务端程序</p></li><li><p>ubuntu作为服务端安装服务端程序</p></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">$ sudo apt install openssh-server</span><br><span class="line"><span class="comment">#ubuntu启动sshd服务</span></span><br><span class="line">--------------------------</span><br><span class="line">$ sshd</span><br><span class="line"><span class="comment">#上面的命令运行后，如果提示“sshd re-exec requires execution with an absolute path”，就需要使用绝对路径来启动。这是为了防止有人出于各种目的，放置同名软件在$PATH变量指向的目录中，代替真正的 sshd。</span></span><br><span class="line">$ /usr/sbin/sshd</span><br><span class="line"><span class="comment">#上面的命令运行以后，sshd 自动进入后台，所以命令后面不需要加上&amp;</span></span><br><span class="line">--------------------------</span><br><span class="line"><span class="comment">#除了直接运行可执行文件，也可以通过 Systemd 启动 sshd。</span></span><br><span class="line"><span class="comment"># 启动</span></span><br><span class="line">$ sudo systemctl start sshd.service</span><br><span class="line"><span class="comment"># 停止</span></span><br><span class="line">$ sudo systemctl stop sshd.service</span><br><span class="line"><span class="comment"># 重启</span></span><br><span class="line">$ sudo systemctl restart sshd.service</span><br><span class="line"><span class="comment">#下面的命令让 sshd 在计算机下次启动时自动运行。</span></span><br><span class="line">$ sudo systemctl <span class="built_in">enable</span> sshd.service</span><br></pre></td></tr></table></figure><ul><li>ubuntu作为客户端安装客户端程序</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure><ul><li><p>windows作为服务端配置服务端程序</p><p>windows安装好服务端程序后需要进行简单的配置启动服务程序</p></li></ul><h4 id="设置免密登录"><a href="#设置免密登录" class="headerlink" title="设置免密登录"></a>设置免密登录</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#先生成非对称秘钥</span></span><br><span class="line"><span class="variable">$ssh</span>-keygen <span class="comment">#执行该程序会在 ~/.ssh/ 目录下生成公私钥文件，将公钥文件传到服务器的~/.ssh/authorized_keys文件中即可实现免密登录</span></span><br><span class="line"><span class="comment">#ubuntu客户端可以使用下面的命令快速将公钥文件传到服务器，该命令会默认从~/.ssh/目录下去公钥传到服务器对应的~/.ssh/authorized_keys文件中。也可以使用-i参数指定公钥文件</span></span><br><span class="line"><span class="variable">$ssh</span>-copy-id user@host</span><br><span class="line"><span class="comment">#windows的OpenSSH客户端没有ssh-copy-id可用以下命令代替 注：修改命令中的user@host</span></span><br><span class="line">$ <span class="built_in">cat</span> ~/.ssh/id_rsa.pub | ssh user@host <span class="string">&quot;mkdir -p ~/.ssh &amp;&amp; cat &gt;&gt; ~/.ssh/authorized_keys&quot;</span></span><br><span class="line">$ <span class="built_in">chmod</span> 644 ~/.ssh/authorized_keys <span class="comment">#必要时需要修改服务器端的authorized_keys的权限，即只有文件所有者才能写。如果权限设置不对，SSH 服务器可能会拒绝读取该文件。</span></span><br></pre></td></tr></table></figure><p>为了安全性，启用密钥登录之后，最好关闭服务器的密码登录。对于 OpenSSH，具体方法就是打开服务器 sshd 的配置文件<code>/etc/ssh/sshd_config</code>，将<code>PasswordAuthentication</code>这一项设为<code>no</code>。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">PasswordAuthentication no</span><br></pre></td></tr></table></figure><p>修改配置文件以后，不要忘了重新启动 sshd，否则不会生效。</p><h4 id="客户端配置文件"><a href="#客户端配置文件" class="headerlink" title="客户端配置文件"></a>客户端配置文件</h4><p>SSH 客户端的全局配置文件是<code>/etc/ssh/ssh_config</code>（ubuntu），用户个人的配置文件在<code>~/.ssh/config</code>（ubuntu和windows），优先级高于全局配置文件。</p><p>用户个人的配置文件<code>~/.ssh/config</code>，可以按照不同服务器，列出各自的连接参数，从而不必每一次登录都输入重复的参数。下面是一个例子。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Host *</span><br><span class="line">     Port 2222</span><br><span class="line"></span><br><span class="line">Host remoteserver</span><br><span class="line">     HostName remote.example.com</span><br><span class="line">     User neo</span><br><span class="line">     Port 2112</span><br></pre></td></tr></table></figure><p>上面代码中，<code>Host *</code>表示对所有主机生效，后面的<code>Port 2222</code>表示所有主机的默认连接端口都是2222，这样就不用在登录时特别指定端口了。这里的缩进并不是必需的，只是为了视觉上，易于识别针对不同主机的设置。后面的<code>Host remoteserver</code>表示，下面的设置只对主机<code>remoteserver</code>生效。<code>remoteserver</code>只是一个别名，具体的主机由<code>HostName</code>命令指定，<code>User</code>和<code>Port</code>这两项分别表示用户名和端口。这里的<code>Port</code>会覆盖上面<code>Host *</code>部分的<code>Port</code>设置。以后，登录<code>remote.example.com</code>时，只要执行<code>ssh remoteserver</code>命令，就会自动套用 config 文件里面指定的参数。<br>单个主机的配置格式如下。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ ssh remoteserver</span><br><span class="line"><span class="comment"># 等同于</span></span><br><span class="line">$ ssh -p 2112 neo@remote.example.com</span><br></pre></td></tr></table></figure><p><code>Host</code>命令的值可以使用通配符，比如<code>Host *</code>表示对所有主机都有效的设置，<code>Host *.edu</code>表示只对一级域名为<code>.edu</code>的主机有效的设置。它们的设置都可以被单个主机的设置覆盖</p><h4 id="服务端配置文件"><a href="#服务端配置文件" class="headerlink" title="服务端配置文件"></a>服务端配置文件</h4><p>sshd 启动时会自动读取默认的配置文件。如果希望使用其他的配置文件，可以用 sshd 命令的<code>-f</code>参数指定。</p><p>sshd 的配置文件在<code>/etc/ssh</code>（ubuntu）目录，主配置文件是<code>sshd_config</code>，此外还有一些安装时生成的密钥。注意，如果重装 sshd，上面这些密钥都会重新生成，导致客户端重新连接 ssh 服务器时，会跳出警告，拒绝连接。为了避免这种情况，可以在重装 sshd 时，先备份<code>/etc/ssh</code>目录，重装后再恢复这个目录。</p><p>配置文件<code>sshd_config</code>的格式是，每个命令占据一行。每行都是配置项和对应的值，配置项的<strong>大小写不敏感</strong>，与值之间使用空格分隔。配置项中注释只能放在一行的开头，不能放在一行的结尾。</p><p><code>Port</code>指定 sshd 监听的端口，即客户端连接的端口，默认是22（<code>Port 22</code>）。出于安全考虑，可以改掉这个端口（比如<code>Port 8822</code>）。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#配置文件可以使用多个`Port`命令，同时监听多个端口。</span></span><br><span class="line">Port 22</span><br><span class="line">Port 80</span><br><span class="line">Port 443</span><br><span class="line">Port 8080</span><br></pre></td></tr></table></figure><p>修改配置文件以后，不要忘了重新启动 sshd，否则不会生效。</p><p><a href="https://wangdoc.com/ssh/server.html">其余服务端配置项参看这个链接</a></p><h4 id="端口转发"><a href="#端口转发" class="headerlink" title="端口转发"></a>端口转发</h4><p>SSH 除了登录服务器，还有一大用途，就是作为加密通信的中介，充当两台服务器之间的通信加密跳板，使得原本不加密的通信变成加密通信。这个功能称为端口转发（port forwarding），又称 SSH 隧道（tunnel）。</p><p>端口转发有两个主要作用：</p><ul><li>将不加密的数据放在 SSH 安全连接里面传输，使得原本不安全的网络服务增加了安全性，比如通过端口转发访问 Telnet、FTP 等明文服务，数据传输就都会加密。</li><li>作为数据通信的加密跳板，绕过网络防火墙。</li></ul><p>端口转发有三种使用方法：动态转发，本地转发，远程转发。下面逐一介绍。</p><ol><li><p>动态转发</p><p>动态转发指的是，本机与 SSH 服务器之间创建了一个加密连接，然后本机内部针对某个端口的通信，都通过这个加密连接转发。它的一个使用场景就是，访问所有外部网站，都通过 SSH 转发。</p><p>动态转发需要把本地端口绑定到 SSH 服务器。至于 SSH 服务器要去访问哪一个网站，完全是动态的，取决于原始通信，所以叫做动态转发。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ ssh -D local-port tunnel-host -N</span><br></pre></td></tr></table></figure><p>上面命令中，<code>-D</code>表示动态转发，<code>local-port</code>是本地端口，<code>tunnel-host</code>是 SSH 服务器，<code>-N</code>表示这个 SSH 连接只进行端口转发，不登录远程 Shell，不能执行远程命令，只能充当隧道。</p><p>举例来说，如果本地端口是<code>2121</code>，那么动态转发的命令就是下面这样。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ ssh -D 2121 tunnel-host -N</span><br></pre></td></tr></table></figure><p>注意，这种转发采用了 SOCKS5 协议。访问外部网站时，需要把 HTTP 请求转成 SOCKS5 协议，才能把本地端口的请求转发出去。</p><p>下面是 SSH 隧道<strong>建立后</strong>的一个使用实例。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ curl -x socks5://localhost:2121 http://www.example.com</span><br></pre></td></tr></table></figure><p>上面命令中，curl 的<code>-x</code>参数指定代理服务器，即通过 SOCKS5 协议的本地<code>2121</code>端口，访问<code>http://www.example.com</code>。</p><p>如果经常使用动态转发，可以将设置写入 SSH 客户端的用户个人配置文件（<code>~/.ssh/config</code>）。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">DynamicForward tunnel-host:local-port</span><br></pre></td></tr></table></figure></li><li><p>本地转发</p><p>本地转发（local forwarding）指的是，SSH 服务器作为中介的跳板机，建立本地计算机与特定目标网站之间的加密连接。本地转发是在本地计算机的 SSH 客户端建立的转发规则。</p><p>它会指定一个本地端口（local-port），所有发向那个端口的请求，都会转发到 SSH 跳板机（tunnel-host），然后 SSH 跳板机作为中介，将收到的请求发到目标服务器（target-host）的目标端口（target-port）。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ ssh -L local-port:target-host:target-port tunnel-host</span><br></pre></td></tr></table></figure><p>举例来说，现在有一台 SSH 跳板机<code>tunnel-host</code>，我们想要通过这台机器，在本地<code>2121</code>端口与目标网站<code>www.example.com</code>的80端口之间建立 SSH 隧道，就可以写成下面这样。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ ssh -L 2121:www.example.com:80 tunnel-host -N</span><br></pre></td></tr></table></figure><p>然后，访问本机的<code>2121</code>端口，就是访问<code>www.example.com</code>的80端口。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ curl http://localhost:2121</span><br></pre></td></tr></table></figure><p>注意，本地端口转发采用 HTTP 协议，不用转成 SOCKS5 协议。</p></li><li><p>远程转发</p><p>远程转发指的是在远程 SSH 服务器建立的转发规则。</p><p>它跟本地转发正好反过来。建立本地计算机到远程计算机的 SSH 隧道以后，本地转发是通过本地计算机访问远程计算机，而远程转发则是通过远程计算机访问本地计算机。它的命令格式如下。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ ssh -R remote-port:target-host:target-port -N remotehost</span><br></pre></td></tr></table></figure><p><strong>远程转发主要针对内网的情况</strong>。下面举两个例子。</p><p>第一个例子是内网某台服务器<code>localhost</code>在 80 端口开了一个服务，可以通过远程转发将这个 80 端口，映射到具有公网 IP 地址的<code>my.public.server</code>服务器的 8080 端口，使得访问<code>my.public.server:8080</code>这个地址，就可以访问到那台内网服务器的 80 端口。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ ssh -R 8080:localhost:80 -N my.public.server</span><br></pre></td></tr></table></figure><p>上面命令是在内网<code>localhost</code>服务器上执行，建立从<code>localhost</code>到<code>my.public.server</code>的 SSH 隧道。运行以后，用户访问<code>my.public.server:8080</code>，就会自动映射到<code>localhost:80</code>。</p><p>第二个例子是本地计算机<code>local</code>在外网，SSH 跳板机和目标服务器<code>my.private.server</code>都在内网，必须通过 SSH 跳板机才能访问目标服务器。但是，本地计算机<code>local</code>无法访问内网之中的 SSH 跳板机，而 SSH 跳板机可以访问本机计算机。</p><p>由于本机无法访问内网 SSH 跳板机，就无法从外网发起 SSH 隧道，建立端口转发。必须反过来，从 SSH 跳板机发起隧道，建立端口转发，这时就形成了远程端口转发。跳板机执行下面的命令，绑定本地计算机<code>local</code>的<code>2121</code>端口，去访问<code>my.private.server:80</code>。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ ssh -R 2121:my.private.server:80 -N <span class="built_in">local</span></span><br></pre></td></tr></table></figure><p>上面命令是在 SSH 跳板机上执行的，建立跳板机到<code>local</code>的隧道，并且这条隧道的出口映射到<code>my.private.server:80</code>。</p><p>显然，远程转发要求本地计算机<code>local</code>也安装了 SSH 服务器，这样才能接受 SSH 跳板机的远程登录。</p><p>执行上面的命令以后，跳板机到<code>local</code>的隧道已经建立了。然后，就可以从本地计算机访问目标服务器了，即在本机执行下面的命令。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ curl http://localhost:2121</span><br></pre></td></tr></table></figure><p>本机执行上面的命令以后，就会输出服务器<code>my.private.server</code>的 80 端口返回的内容。</p><p>如果经常执行远程端口转发，可以将设置写入 SSH 客户端的用户个人配置文件（<code>~/.ssh/config</code>）。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Host remote-forward</span><br><span class="line">  HostName test.example.com</span><br><span class="line">  RemoteForward remote-port target-host:target-port</span><br></pre></td></tr></table></figure><p>完成上面的设置后，执行下面的命令就会建立远程转发。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ ssh -N remote-forward</span><br><span class="line"></span><br><span class="line"><span class="comment"># 等同于</span></span><br><span class="line">$ ssh -R remote-port:target-host:target-port -N test.example.com</span><br></pre></td></tr></table></figure></li></ol><h4 id="scp传输文件"><a href="#scp传输文件" class="headerlink" title="scp传输文件"></a>scp传输文件</h4><p><a href="https://wangdoc.com/ssh/scp.html">scp 命令 - SSH 教程 - 网道 (wangdoc.com)</a></p><hr><h2 id="java"><a href="#java" class="headerlink" title="java"></a>java</h2><hr><h2 id="go"><a href="#go" class="headerlink" title="go"></a>go</h2><hr><h2 id="node-js"><a href="#node-js" class="headerlink" title="node.js"></a>node.js</h2><p>使用NVM安装Node.js，NVM可以帮助我们方便的在Node的不同版本之间进行切换，这样我们就可以同时工作在不同的项目上。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># To download and install the nvm script run:</span></span><br><span class="line"><span class="comment"># 下载并安装nvm脚本：</span></span><br><span class="line"></span><br><span class="line">$ curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.35.2/install.sh | bash</span><br><span class="line"><span class="comment">#上面的网址打不开极有可能是被墙了，里面其实就是一个安装脚本，手动翻墙下载之后用bash执行以下即可</span></span><br><span class="line"><span class="comment"># close and reopen the terminal or run the commands to add the path to nvm script to the current shell session.</span></span><br><span class="line"><span class="comment"># 切记nvm安装完毕，要么重新打开终端，要么设置nvm环境变量：</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Using nvm install node</span></span><br><span class="line"><span class="comment"># default install npm</span></span><br><span class="line"><span class="comment"># 使用nvm安装node：</span></span><br><span class="line">$ nvm install node 8.0.0</span><br><span class="line">$ nvm install node 10.0.0</span><br><span class="line"></span><br><span class="line"><span class="comment">#To list installed Node.js versions type:</span></span><br><span class="line"><span class="comment">#显示已经安装node版本：</span></span><br><span class="line">$ nvm <span class="built_in">ls</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#You can change the currently active version with:</span></span><br><span class="line"><span class="comment">#选择使用node版本，这里使用了10.0.0版本：</span></span><br><span class="line">$ nvm use 10.0.0</span><br></pre></td></tr></table></figure><p>node版本维护可以参照官方文档： <a href="https://nodejs.org/en/about/releases/">https://nodejs.org/en/about/releases/</a></p><h2 id="docker"><a href="#docker" class="headerlink" title="docker"></a>docker</h2><p>[docker安装参考](<a href="https://learnblockchain.cn/books/enterprise/chapter3_02_part1">https://learnblockchain.cn/books/enterprise/chapter3_02_part1</a> hyperledger_fabric_network_prerequisites.html#hyperledger-fabric-网络体验-系统环境配置)</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#卸载旧版本的docker，如果安装了的话</span></span><br><span class="line">$ sudo apt-get remove docker docker-engine docker.io containerd runc</span><br><span class="line"><span class="comment">#使用脚本自动安装最新版docker</span></span><br><span class="line">$ curl -fsSL https://get.docker.com -o get-docker.sh</span><br><span class="line">$ sudo sh get-docker.sh</span><br><span class="line"><span class="comment">#Ubuntu安装好之后docker会自动启动，centos需要使用systemctl或者service手动启动docker服务</span></span><br></pre></td></tr></table></figure><p>建立docker组：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo groupadd docker</span><br></pre></td></tr></table></figure><p>将当前用户加入 docker 组：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo usermod -aG docker <span class="variable">$USER</span></span><br></pre></td></tr></table></figure><p>执行上述用户组的添加操作是为了给当前用户运行docker时赋予root权限，这样执行docker命令的时候就不需要添加sudo了，这是docker的默认配置。</p><p>国内下载镜像的速度比较慢，可以使用国内镜像加速器。具体方式修改daemon配置文件&#x2F;etc&#x2F;docker&#x2F;daemon.json使用加速器。下面以阿里云加速器地址为例。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$ sudo <span class="built_in">mkdir</span> -p /etc/docker</span><br><span class="line">$ sudo <span class="built_in">tee</span> /etc/docker/daemon.json &lt;&lt;-<span class="string">&#x27;EOF&#x27;</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="string">&quot;registry-mirrors&quot;</span>: [<span class="string">&quot;https://hnm*****.mirror.aliyuncs.com&quot;</span>]</span><br><span class="line">&#125;</span><br><span class="line">EOF</span><br><span class="line">$ sudo systemctl daemon-reload</span><br><span class="line">$ sudo systemctl restart docker</span><br></pre></td></tr></table></figure><p>镜像加速器地址可以从阿里云网站获取。</p><p>官网地址： <a href="https://cr.console.aliyun.com/cn-hangzhou/instances/mirrors">https://cr.console.aliyun.com/cn-hangzhou/instances/mirrors</a></p><p>Docker compose的安装可以采用如下命令： 官方文档：<a href="https://docs.docker.com/compose/install/">https://docs.docker.com/compose/install/</a></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Run this command to download the current stable release of Docker</span></span><br><span class="line"><span class="comment"># compose:</span></span><br><span class="line"><span class="variable">$sudo</span> curl -L <span class="string">&quot;https://github.com/docker/compose/releases/download/1.25.3/docker-compose-<span class="subst">$(uname -s)</span>-<span class="subst">$(uname -m)</span>&quot;</span> -o /usr/local/bin/docker-compose</span><br><span class="line"></span><br><span class="line"><span class="comment"># Apply executable permissions to the binary:</span></span><br><span class="line">sudo <span class="built_in">chmod</span> +x /usr/local/bin/docker-compose</span><br></pre></td></tr></table></figure><p><a href="https://blog.csdn.net/best_luxi/article/details/122648473">几款 Docker 图形化工具</a></p><hr><h2 id="fabric"><a href="#fabric" class="headerlink" title="fabric"></a>fabric</h2>]]></content>
    
    
    <summary type="html">&lt;p&gt;配置各种安装环境速查&lt;/p&gt;</summary>
    
    
    
    
    <category term="环境配置" scheme="http://yoursite.com/tags/%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/"/>
    
  </entry>
  
  <entry>
    <title>MySQL学习笔记</title>
    <link href="http://yoursite.com/2021/02/16/MySQL%E7%AC%94%E8%AE%B0/"/>
    <id>http://yoursite.com/2021/02/16/MySQL%E7%AC%94%E8%AE%B0/</id>
    <published>2021-02-16T14:11:30.000Z</published>
    <updated>2021-09-14T07:40:31.655Z</updated>
    
    <content type="html"><![CDATA[<h1 id="MySQL笔记"><a href="#MySQL笔记" class="headerlink" title="MySQL笔记"></a>MySQL笔记</h1><span id="more"></span><h3 id="1、sql、DB、DBMS？"><a href="#1、sql、DB、DBMS？" class="headerlink" title="1、sql、DB、DBMS？"></a>1、sql、DB、DBMS？</h3><pre><code>DB:     DataBase（数据库，数据库实际上在硬盘上以文件的形式存在）DBMS:     DataBase Management System（数据库管理系统，常见的有：MySQL Oracle DB2 Sybase SqlServer...）SQL:     结构化查询语言，是一门标准通用的语言。标准的sql适合于所有的数据库产品。    SQL属于高级语言。只要能看懂英语单词的，写出来的sql语句，可以读懂什么意思。    SQL语句在执行的时候，实际上内部也会先进行编译，然后再执行sql。（sql语句的编译由DBMS完成。）DBMS负责执行sql语句，通过执行sql语句来操作DB当中的数据。DBMS -(执行)-&gt; SQL -(操作)-&gt; DB</code></pre><h3 id="2、什么是表？"><a href="#2、什么是表？" class="headerlink" title="2、什么是表？"></a>2、什么是表？</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">表：table是数据库的基本组成单元，所有的数据都以表格的形式组织，目的是可读性强。</span><br><span class="line">一个表包括行和列：</span><br><span class="line">行：被称为 数据/记录(data)</span><br><span class="line">列：被称为 字段(column)</span><br><span class="line"></span><br><span class="line">学号(int)姓名(varchar)年龄(int)</span><br><span class="line">------------------------------------</span><br><span class="line">110张三20</span><br><span class="line">120李四21</span><br><span class="line"></span><br><span class="line">每一个字段应该包括哪些属性？</span><br><span class="line">字段名（学号）、数据类型（int）、相关的约束（是否缺省）。</span><br></pre></td></tr></table></figure><h3 id="3、SQL语句分类"><a href="#3、SQL语句分类" class="headerlink" title="3、SQL语句分类"></a>3、SQL语句分类</h3><p>​DQL（数据查询语言）: 查询语句，凡是<code>select</code>语句都是DQL。<br>​DML（数据操作语言）：<code>insert delete update</code>，对<strong>表当中的数据</strong>进行增删改。<br>​DDL（数据定义语言）：<code>create drop alter</code>，对<strong>表结构</strong>的增删改。<br>​TCL（事务控制语言）：<code>commit</code>提交事务，<code>rollback</code> 回滚事务。(TCL中的T是Transaction)<br>​DCL（数据控制语言）: <code>grant</code>授权、<code>revoke</code>撤销权限等。</p><h3 id="4、MySQL命令"><a href="#4、MySQL命令" class="headerlink" title="4、MySQL命令"></a>4、MySQL命令</h3><h4 id="1、导入数据"><a href="#1、导入数据" class="headerlink" title="1、导入数据"></a>1、导入数据</h4><p>​第一步：登录mysql数据库管理系统</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">dos命令窗口：</span><br><span class="line">mysql -uroot -p333</span><br></pre></td></tr></table></figure><p>​第二步：查看有哪些数据库</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">show databases; (这个不是SQL语句，属于MySQL的命令。)</span><br><span class="line">+--------------------+</span><br><span class="line">| Database           |</span><br><span class="line">+--------------------+</span><br><span class="line">| information_schema |</span><br><span class="line">| mysql              |</span><br><span class="line">| performance_schema |</span><br><span class="line">| test               |</span><br><span class="line">+--------------------+</span><br></pre></td></tr></table></figure><p>​第三步：创建属于我们自己的数据库</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">create database bjpowernode; (这个不是SQL语句，属于MySQL的命令。)</span><br></pre></td></tr></table></figure><p>​第四步：使用bjpowernode数据</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">use bjpowernode; (这个不是SQL语句，属于MySQL的命令。)</span><br></pre></td></tr></table></figure><p>第五步：查看当前使用的数据库中有哪些表？</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">show tables; (这个不是SQL语句，属于MySQL的命令。)</span><br></pre></td></tr></table></figure><p>​第六步：初始化数据</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; source D:\course\05-MySQL\resources\bjpowernode.sql</span><br><span class="line">注意：数据初始化完成之后，有三张表：</span><br><span class="line">+-----------------------+</span><br><span class="line">| Tables_in_bjpowernode |</span><br><span class="line">+-----------------------+</span><br><span class="line">| dept                  |</span><br><span class="line">| emp                   |</span><br><span class="line">| salgrade              |</span><br><span class="line">+-----------------------+</span><br></pre></td></tr></table></figure><h4 id="2、sql脚本"><a href="#2、sql脚本" class="headerlink" title="2、sql脚本"></a>2、sql脚本</h4><p>bjpowernode.sql，这个文件以sql结尾，这样的文件被称为“sql脚本”。什么是sql脚本呢？</p><p>​当一个文件的扩展名是.sql，并且该文件中编写了大量的sql语句，我们称这样的文件为sql脚本。<br>​注意：直接使用source命令可以执行sql脚本。<br>​sql脚本中的数据量太大的时候，无法打开，请使用source命令完成初始化。</p><h4 id="3、删除数据库"><a href="#3、删除数据库" class="headerlink" title="3、删除数据库"></a>3、删除数据库</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">drop database bjpowernode;</span><br></pre></td></tr></table></figure><h4 id="4、查看表结构："><a href="#4、查看表结构：" class="headerlink" title="4、查看表结构："></a>4、查看表结构：</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; use bjpowernode;</span><br><span class="line">mysql&gt; show tables;</span><br><span class="line">+-----------------------+</span><br><span class="line">| Tables_in_bjpowernode |</span><br><span class="line">+-----------------------+</span><br><span class="line">| dept                  |   (部门表)</span><br><span class="line">| emp                   |   (员工表)</span><br><span class="line">| salgrade              |   (工资等级表)</span><br><span class="line">+-----------------------+</span><br><span class="line"></span><br><span class="line">mysql&gt; desc dept;  #查看表结构(部门表)</span><br><span class="line">+--------+-------------+------+-----+---------+-------+</span><br><span class="line">| Field  | Type        | Null | Key | Default | Extra |</span><br><span class="line">+--------+-------------+------+-----+---------+-------+</span><br><span class="line">| DEPTNO | int(2)      | NO   | PRI | NULL    |       |部门编号</span><br><span class="line">| DNAME  | varchar(14) | YES  |     | NULL    |       |部门名称</span><br><span class="line">| LOC    | varchar(13) | YES  |     | NULL    |       |部门位置</span><br><span class="line">+--------+-------------+------+-----+---------+-------+</span><br></pre></td></tr></table></figure><h4 id="5、表中的数据？"><a href="#5、表中的数据？" class="headerlink" title="5、表中的数据？"></a>5、表中的数据？</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from emp;#查看表中数据(部门表)</span><br><span class="line">+-------+--------+-----------+------+------------+---------+---------+--------+</span><br><span class="line">| EMPNO | ENAME  | JOB       | MGR  | HIREDATE   | SAL     | COMM    | DEPTNO |</span><br><span class="line">+-------+--------+-----------+------+------------+---------+---------+--------+</span><br><span class="line">|  7369 | SMITH  | CLERK     | 7902 | 1980-12-17 |  800.00 |    NULL |     20 |</span><br><span class="line">|  7499 | ALLEN  | SALESMAN  | 7698 | 1981-02-20 | 1600.00 |  300.00 |     30 |</span><br><span class="line">|  7521 | WARD   | SALESMAN  | 7698 | 1981-02-22 | 1250.00 |  500.00 |     30 |</span><br><span class="line">|  7566 | JONES  | MANAGER   | 7839 | 1981-04-02 | 2975.00 |    NULL |     20 |</span><br><span class="line">|  7654 | MARTIN | SALESMAN  | 7698 | 1981-09-28 | 1250.00 | 1400.00 |     30 |</span><br><span class="line">|  7698 | BLAKE  | MANAGER   | 7839 | 1981-05-01 | 2850.00 |    NULL |     30 |</span><br><span class="line">|  7782 | CLARK  | MANAGER   | 7839 | 1981-06-09 | 2450.00 |    NULL |     10 |</span><br><span class="line">|  7788 | SCOTT  | ANALYST   | 7566 | 1987-04-19 | 3000.00 |    NULL |     20 |</span><br><span class="line">|  7839 | KING   | PRESIDENT | NULL | 1981-11-17 | 5000.00 |    NULL |     10 |</span><br><span class="line">|  7844 | TURNER | SALESMAN  | 7698 | 1981-09-08 | 1500.00 |    0.00 |     30 |</span><br><span class="line">|  7876 | ADAMS  | CLERK     | 7788 | 1987-05-23 | 1100.00 |    NULL |     20 |</span><br><span class="line">|  7900 | JAMES  | CLERK     | 7698 | 1981-12-03 |  950.00 |    NULL |     30 |</span><br><span class="line">|  7902 | FORD   | ANALYST   | 7566 | 1981-12-03 | 3000.00 |    NULL |     20 |</span><br><span class="line">|  7934 | MILLER | CLERK     | 7782 | 1982-01-23 | 1300.00 |    NULL |     10 |</span><br><span class="line">+-------+--------+-----------+------+------------+---------+---------+--------+</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from dept;#查看表中数据(员工表)</span><br><span class="line">+--------+------------+----------+</span><br><span class="line">| DEPTNO | DNAME      | LOC      |</span><br><span class="line">+--------+------------+----------+</span><br><span class="line">|     10 | ACCOUNTING | NEW YORK |</span><br><span class="line">|     20 | RESEARCH   | DALLAS   |</span><br><span class="line">|     30 | SALES      | CHICAGO  |</span><br><span class="line">|     40 | OPERATIONS | BOSTON   |</span><br><span class="line">+--------+------------+----------+</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from salgrade;#查看表中数据(工资等级表)</span><br><span class="line">+-------+-------+-------+</span><br><span class="line">| GRADE | LOSAL | HISAL |</span><br><span class="line">+-------+-------+-------+</span><br><span class="line">|     1 |   700 |  1200 |</span><br><span class="line">|     2 |  1201 |  1400 |</span><br><span class="line">|     3 |  1401 |  2000 |</span><br><span class="line">|     4 |  2001 |  3000 |</span><br><span class="line">|     5 |  3001 |  9999 |</span><br><span class="line">+-------+-------+-------+</span><br></pre></td></tr></table></figure><h4 id="6、常用命令？"><a href="#6、常用命令？" class="headerlink" title="6、常用命令？"></a>6、常用命令？</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select database(); #查看当前使用的是哪个数据库</span><br><span class="line">+-------------+</span><br><span class="line">| database()  |</span><br><span class="line">+-------------+</span><br><span class="line">| bjpowernode |</span><br><span class="line">+-------------+</span><br><span class="line"></span><br><span class="line">mysql&gt; select version(); #查看mysql的版本号。</span><br><span class="line">+-----------+</span><br><span class="line">| version() |</span><br><span class="line">+-----------+</span><br><span class="line">| 5.5.62    |</span><br><span class="line">+-----------+</span><br><span class="line"></span><br><span class="line">\c   #mysql命令，结束一条语句。</span><br><span class="line">exit #mysql命令，退出mysql。</span><br></pre></td></tr></table></figure><h4 id="7、查看创建表的语句："><a href="#7、查看创建表的语句：" class="headerlink" title="7、查看创建表的语句："></a>7、查看创建表的语句：</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">show create table emp;</span><br></pre></td></tr></table></figure><p>​</p><h3 id="5、SQL语句"><a href="#5、SQL语句" class="headerlink" title="5、SQL语句"></a>5、SQL语句</h3><p>sql语句不区分大小写，但是表中的数据是有大小写区分的，虽然mysql中用小写也能查询出大写的数据，但是对于Oracle来说是严格区分大小写的，用小写查不出大写数据。相对来说MySQL的语法是松散的不那么严格</p><h4 id="5-1、数据查询语句（DQL）"><a href="#5-1、数据查询语句（DQL）" class="headerlink" title="5.1、数据查询语句（DQL）"></a>5.1、数据查询语句（DQL）</h4><h5 id="1、简单的查询语句"><a href="#1、简单的查询语句" class="headerlink" title="1、简单的查询语句"></a>1、简单的查询语句</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line">语法格式：</span><br><span class="line">select 字段名1,字段名2,字段名3,.... from 表名;</span><br><span class="line"></span><br><span class="line">提示：</span><br><span class="line">1、任何一条sql语句以“;”结尾。</span><br><span class="line">2、sql语句不区分大小写。</span><br><span class="line"></span><br><span class="line">查询员工的年薪？（字段可以参与数学运算。）</span><br><span class="line">select ename,sal * 12 from emp;</span><br><span class="line">+--------+----------+</span><br><span class="line">| ename  | sal * 12 |</span><br><span class="line">+--------+----------+</span><br><span class="line">| SMITH  |  9600.00 |</span><br><span class="line">| ALLEN  | 19200.00 |</span><br><span class="line">| WARD   | 15000.00 |</span><br><span class="line">| JONES  | 35700.00 |</span><br><span class="line">| MARTIN | 15000.00 |</span><br><span class="line">| BLAKE  | 34200.00 |</span><br><span class="line">| CLARK  | 29400.00 |</span><br><span class="line">| SCOTT  | 36000.00 |</span><br><span class="line">| KING   | 60000.00 |</span><br><span class="line">| TURNER | 18000.00 |</span><br><span class="line">| ADAMS  | 13200.00 |</span><br><span class="line">| JAMES  | 11400.00 |</span><br><span class="line">| FORD   | 36000.00 |</span><br><span class="line">| MILLER | 15600.00 |</span><br><span class="line">+--------+----------+</span><br><span class="line"></span><br><span class="line">给查询结果的列重命名？</span><br><span class="line">select ename,sal * 12 as yearsal from emp;</span><br><span class="line"></span><br><span class="line">别名中有中文？</span><br><span class="line">select ename,sal * 12 as 年薪 from emp; # 错误</span><br><span class="line">select ename,sal * 12 as &#x27;年薪&#x27; from emp;</span><br><span class="line">#可以使用中文但是必须用字符串表示，sql中的字符串使用单引号虽然在mysql当中可以使用双引号但是为了通用性要使用单引号</span><br><span class="line">#注意：标准sql语句中要求字符串使用单引号括起来。虽然mysql支持双引号，尽量别用。</span><br><span class="line">+--------+----------+</span><br><span class="line">| ename  | 年薪        |</span><br><span class="line">+--------+----------+</span><br><span class="line">| SMITH  |  9600.00 |</span><br><span class="line">| ALLEN  | 19200.00 |</span><br><span class="line">| WARD   | 15000.00 |</span><br><span class="line">| JONES  | 35700.00 |</span><br><span class="line">| MARTIN | 15000.00 |</span><br><span class="line">| BLAKE  | 34200.00 |</span><br><span class="line">| CLARK  | 29400.00 |</span><br><span class="line">| SCOTT  | 36000.00 |</span><br><span class="line">| KING   | 60000.00 |</span><br><span class="line">| TURNER | 18000.00 |</span><br><span class="line">| ADAMS  | 13200.00 |</span><br><span class="line">| JAMES  | 11400.00 |</span><br><span class="line">| FORD   | 36000.00 |</span><br><span class="line">| MILLER | 15600.00 |</span><br><span class="line">+--------+----------+</span><br><span class="line"></span><br><span class="line">as关键字可以省略？</span><br><span class="line">mysql&gt; select empno,ename,sal * 12 yearsal from emp;</span><br><span class="line">+-------+--------+----------+</span><br><span class="line">| empno | ename  | yearsal  |</span><br><span class="line">+-------+--------+----------+</span><br><span class="line">|  7369 | SMITH  |  9600.00 |</span><br><span class="line">|  7499 | ALLEN  | 19200.00 |</span><br><span class="line">|  7521 | WARD   | 15000.00 |</span><br><span class="line">|  7566 | JONES  | 35700.00 |</span><br><span class="line">|  7654 | MARTIN | 15000.00 |</span><br><span class="line">|  7698 | BLAKE  | 34200.00 |</span><br><span class="line">|  7782 | CLARK  | 29400.00 |</span><br><span class="line">|  7788 | SCOTT  | 36000.00 |</span><br><span class="line">|  7839 | KING   | 60000.00 |</span><br><span class="line">|  7844 | TURNER | 18000.00 |</span><br><span class="line">|  7876 | ADAMS  | 13200.00 |</span><br><span class="line">|  7900 | JAMES  | 11400.00 |</span><br><span class="line">|  7902 | FORD   | 36000.00 |</span><br><span class="line">|  7934 | MILLER | 15600.00 |</span><br><span class="line">+-------+--------+----------+</span><br><span class="line"></span><br><span class="line">查询所有字段？</span><br><span class="line">select * from emp; // 实际开发中不建议使用*，效率较低。</span><br></pre></td></tr></table></figure><h5 id="2、条件查询。"><a href="#2、条件查询。" class="headerlink" title="2、条件查询。"></a>2、条件查询。</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br></pre></td><td class="code"><pre><span class="line">语法格式：</span><br><span class="line">select 字段名1,字段名2,... from 表名 where 条件;</span><br><span class="line">执行顺序：先 from，然后 where，最后 select</span><br><span class="line"></span><br><span class="line">查询工资等于5000的员工姓名？</span><br><span class="line">select ename from emp where sal = 5000;</span><br><span class="line">+-------+</span><br><span class="line">| ename |</span><br><span class="line">+-------+</span><br><span class="line">| KING  |</span><br><span class="line">+-------+</span><br><span class="line"></span><br><span class="line">查询SMITH的工资？</span><br><span class="line">select sal from emp where ename = &#x27;SMITH&#x27;;#字符串使用单引号括起来。SMITH是一个varchar字符串</span><br><span class="line">+--------+</span><br><span class="line">| sal    |</span><br><span class="line">+--------+</span><br><span class="line">| 800.00 |</span><br><span class="line">+--------+</span><br><span class="line">找出工资高于3000的员工？</span><br><span class="line">select ename,sal from emp where sal &gt; 3000;</span><br><span class="line">select ename,sal from emp where sal &gt;= 3000;</span><br><span class="line">select ename,sal from emp where sal &lt; 3000;</span><br><span class="line">select ename,sal from emp where sal &lt;= 3000;</span><br><span class="line"></span><br><span class="line">找出工资不等于3000的？</span><br><span class="line">select ename,sal from emp where sal &lt;&gt; 3000;</span><br><span class="line">select ename,sal from emp where sal != 3000;</span><br><span class="line"></span><br><span class="line">找出工资在1100和3000之间的员工，包括1100和3000？</span><br><span class="line">select ename,sal from emp where sal &gt;= 1100 and sal &lt;= 3000;</span><br><span class="line">select ename,sal from emp where sal between 1100 and 3000; # between...and...是闭区间 [1100 ~ 3000]</span><br><span class="line">select ename,sal from emp where sal between 3000 and 1100; # 查询不到任何数据</span><br><span class="line">between and #在使用的时候必须左小右大。</span><br><span class="line">between and #除了可以使用在数字方面之外，还可以使用在字符串方面。</span><br><span class="line">select ename from emp where ename between &#x27;A&#x27; and &#x27;C&#x27;;</span><br><span class="line">+-------+</span><br><span class="line">| ename |</span><br><span class="line">+-------+</span><br><span class="line">| ALLEN |</span><br><span class="line">| BLAKE |</span><br><span class="line">| ADAMS |</span><br><span class="line">+-------+</span><br><span class="line">select ename from emp where ename between &#x27;A&#x27; and &#x27;D&#x27;; #左闭右开。</span><br><span class="line"></span><br><span class="line">找出哪些人津贴为NULL？</span><br><span class="line">在数据库当中NULL不是一个值，代表什么也没有，为空。</span><br><span class="line">空不是一个值，不能用等号衡量。</span><br><span class="line">必须使用 is null或者is not null</span><br><span class="line">select ename,sal,comm from emp where comm is null;</span><br><span class="line">+--------+---------+------+</span><br><span class="line">| ename  | sal     | comm |</span><br><span class="line">+--------+---------+------+</span><br><span class="line">| SMITH  |  800.00 | NULL |</span><br><span class="line">| JONES  | 2975.00 | NULL |</span><br><span class="line">| BLAKE  | 2850.00 | NULL |</span><br><span class="line">| CLARK  | 2450.00 | NULL |</span><br><span class="line">| SCOTT  | 3000.00 | NULL |</span><br><span class="line">| KING   | 5000.00 | NULL |</span><br><span class="line">| ADAMS  | 1100.00 | NULL |</span><br><span class="line">| JAMES  |  950.00 | NULL |</span><br><span class="line">| FORD   | 3000.00 | NULL |</span><br><span class="line">| MILLER | 1300.00 | NULL |</span><br><span class="line">+--------+---------+------+</span><br><span class="line">select ename,sal,comm from emp where comm = null;#如果使用=查询null那么结果一定是空</span><br><span class="line">Empty set (0.00 sec)</span><br><span class="line"></span><br><span class="line">找出哪些人津贴不为NULL？</span><br><span class="line">select ename,sal,comm from emp where comm is not null;</span><br><span class="line">+--------+---------+---------+</span><br><span class="line">| ename  | sal     | comm    |</span><br><span class="line">+--------+---------+---------+</span><br><span class="line">| ALLEN  | 1600.00 |  300.00 |</span><br><span class="line">| WARD   | 1250.00 |  500.00 |</span><br><span class="line">| MARTIN | 1250.00 | 1400.00 |</span><br><span class="line">| TURNER | 1500.00 |    0.00 |</span><br><span class="line">+--------+---------+---------+</span><br><span class="line"></span><br><span class="line">找出哪些人没有津贴？</span><br><span class="line">select ename,sal,comm from emp where comm is null or comm = 0;</span><br><span class="line">+--------+---------+------+</span><br><span class="line">| ename  | sal     | comm |</span><br><span class="line">+--------+---------+------+</span><br><span class="line">| SMITH  |  800.00 | NULL |</span><br><span class="line">| JONES  | 2975.00 | NULL |</span><br><span class="line">| BLAKE  | 2850.00 | NULL |</span><br><span class="line">| CLARK  | 2450.00 | NULL |</span><br><span class="line">| SCOTT  | 3000.00 | NULL |</span><br><span class="line">| KING   | 5000.00 | NULL |</span><br><span class="line">| TURNER | 1500.00 | 0.00 |</span><br><span class="line">| ADAMS  | 1100.00 | NULL |</span><br><span class="line">| JAMES  |  950.00 | NULL |</span><br><span class="line">| FORD   | 3000.00 | NULL |</span><br><span class="line">| MILLER | 1300.00 | NULL |</span><br><span class="line">+--------+---------+------+</span><br><span class="line"></span><br><span class="line">找出工作岗位是MANAGER和SALESMAN的员工？</span><br><span class="line">select ename,job from emp where job = &#x27;MANAGER&#x27; or job = &#x27;SALESMAN&#x27;;</span><br><span class="line">+--------+----------+</span><br><span class="line">| ename  | job      |</span><br><span class="line">+--------+----------+</span><br><span class="line">| ALLEN  | SALESMAN |</span><br><span class="line">| WARD   | SALESMAN |</span><br><span class="line">| JONES  | MANAGER  |</span><br><span class="line">| MARTIN | SALESMAN |</span><br><span class="line">| BLAKE  | MANAGER  |</span><br><span class="line">| CLARK  | MANAGER  |</span><br><span class="line">| TURNER | SALESMAN |</span><br><span class="line">+--------+----------+</span><br><span class="line"></span><br><span class="line">and 和 or联合起来用：找出薪资大于1000的并且部门编号是20或30部门的员工。</span><br><span class="line">select ename,sal,deptno from emp where sal &gt; 1000 and deptno = 20 or deptno = 30; # 错误的</span><br><span class="line">select ename,sal,deptno from emp where sal &gt; 1000 and (deptno = 20 or deptno = 30); # 正确的。</span><br><span class="line">#注意：当运算符的优先级不确定的时候加小括号。无论and和or的位置如何and的优先级总是高于or</span><br><span class="line"></span><br><span class="line">in 等同于 or：找出工作岗位是MANAGER和SALESMAN的员工？</span><br><span class="line">select ename,job from emp where job = &#x27;SALESMAN&#x27; or job = &#x27;MANAGER&#x27;;</span><br><span class="line">select ename,job from emp where job in(&#x27;SALESMAN&#x27;, &#x27;MANAGER&#x27;);</span><br><span class="line">select ename,job from emp where sal in(800, 5000); # in后面的值不是区间，是具体的值。</span><br><span class="line">+-------+-----------+</span><br><span class="line">| ename | job       |</span><br><span class="line">+-------+-----------+</span><br><span class="line">| SMITH | CLERK     |</span><br><span class="line">| KING  | PRESIDENT |</span><br><span class="line">+-------+-----------+</span><br><span class="line"></span><br><span class="line">not in: 不在这几个值当中。</span><br><span class="line">select ename,job from emp where sal not in(800, 5000);</span><br><span class="line"></span><br><span class="line">模糊查询like ? </span><br><span class="line"> 找出名字当中含有O的？</span><br><span class="line">（在模糊查询当中，必须掌握两个特殊的符号，一个是%，一个是_）</span><br><span class="line"> %代表任意多个字符，_代表任意1个字符。</span><br><span class="line">select ename from emp where ename like &#x27;%O%&#x27;;</span><br><span class="line">+-------+</span><br><span class="line">| ename |</span><br><span class="line">+-------+</span><br><span class="line">| JONES |</span><br><span class="line">| SCOTT |</span><br><span class="line">| FORD  |</span><br><span class="line">+-------+</span><br><span class="line">找出名字中第二个字母是A的？</span><br><span class="line">select ename from emp where ename like &#x27;_A%&#x27;;</span><br><span class="line">+--------+</span><br><span class="line">| ename  |</span><br><span class="line">+--------+</span><br><span class="line">| WARD   |</span><br><span class="line">| MARTIN |</span><br><span class="line">| JAMES  |</span><br><span class="line">+--------+</span><br><span class="line">找出名字中有下划线的？</span><br><span class="line">mysql&gt; select * from t_user;</span><br><span class="line">+------+----------+</span><br><span class="line">| id   | name     |</span><br><span class="line">+------+----------+</span><br><span class="line">|    1 | zhangsan |</span><br><span class="line">|    2 | lisi     |</span><br><span class="line">|    3 | WANG_WU  |</span><br><span class="line">+------+----------+</span><br><span class="line">select name from t_user where name like &#x27;%_%&#x27;;</span><br><span class="line">+----------+</span><br><span class="line">| name     |</span><br><span class="line">+----------+</span><br><span class="line">| zhangsan |</span><br><span class="line">| lisi     |</span><br><span class="line">| WANG_WU  |</span><br><span class="line">+----------+</span><br><span class="line">select name from t_user where name like &#x27;%\_%&#x27;;</span><br><span class="line">+---------+</span><br><span class="line">| name    |</span><br><span class="line">+---------+</span><br><span class="line">| WANG_WU |</span><br><span class="line">+---------+</span><br><span class="line"></span><br><span class="line">找出名字中最后一个字母是T的？</span><br><span class="line">select ename from emp where ename like &#x27;%T&#x27;;</span><br><span class="line">+-------+</span><br><span class="line">| ename |</span><br><span class="line">+-------+</span><br><span class="line">| SCOTT | </span><br><span class="line">+-------+</span><br></pre></td></tr></table></figure><h5 id="3、排序（升序、降序）"><a href="#3、排序（升序、降序）" class="headerlink" title="3、排序（升序、降序）"></a>3、排序（升序、降序）</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line">按照工资升序，找出员工名和薪资？</span><br><span class="line">select ename,sal from emp order by sal;</span><br><span class="line">    +--------+---------+</span><br><span class="line">    | ename  | sal     |</span><br><span class="line">    +--------+---------+</span><br><span class="line">    | SMITH  |  800.00 |</span><br><span class="line">    | JAMES  |  950.00 |</span><br><span class="line">    | ADAMS  | 1100.00 |</span><br><span class="line">    | WARD   | 1250.00 |</span><br><span class="line">    | MARTIN | 1250.00 |</span><br><span class="line">    | MILLER | 1300.00 |</span><br><span class="line">    | TURNER | 1500.00 |</span><br><span class="line">    | ALLEN  | 1600.00 |</span><br><span class="line">    | CLARK  | 2450.00 |</span><br><span class="line">    | BLAKE  | 2850.00 |</span><br><span class="line">    | JONES  | 2975.00 |</span><br><span class="line">    | FORD   | 3000.00 |</span><br><span class="line">    | SCOTT  | 3000.00 |</span><br><span class="line">    | KING   | 5000.00 |</span><br><span class="line">    +--------+---------+</span><br><span class="line"></span><br><span class="line">注意：默认是升序。怎么指定升序或者降序呢？asc表示升序，desc表示降序。</span><br><span class="line">select ename , sal from emp order by sal; // 升序</span><br><span class="line">select ename , sal from emp order by sal asc; // 升序</span><br><span class="line">select ename , sal from emp order by sal desc; // 降序。</span><br><span class="line"></span><br><span class="line">按照工资的降序排列，当工资相同的时候再按照名字的升序排列。</span><br><span class="line">select ename,sal from emp order by sal desc;</span><br><span class="line">select ename,sal from emp order by sal desc , ename asc;</span><br><span class="line">注意：越靠前的字段越能起到主导作用。只有当前面的字段无法完成排序的时候，才会启用后面的字段。</span><br><span class="line"></span><br><span class="line">找出工作岗位是SALESMAN的员工，并且要求按照薪资的降序排列。</span><br><span class="line">select ename,job,sal from emp where job = &#x27;SALESMAN&#x27; order by sal desc;</span><br><span class="line">+--------+----------+---------+</span><br><span class="line">| ename  | job      | sal     |</span><br><span class="line">+--------+----------+---------+</span><br><span class="line">| ALLEN  | SALESMAN | 1600.00 |</span><br><span class="line">| TURNER | SALESMAN | 1500.00 |</span><br><span class="line">| WARD   | SALESMAN | 1250.00 |</span><br><span class="line">| MARTIN | SALESMAN | 1250.00 |</span><br><span class="line">+--------+----------+---------+</span><br><span class="line"></span><br><span class="line">select </span><br><span class="line">字段3</span><br><span class="line">from</span><br><span class="line">表名  1</span><br><span class="line">where</span><br><span class="line">条件2</span><br><span class="line">order by</span><br><span class="line">.... 4</span><br><span class="line"></span><br><span class="line"># 执行顺序是1、2、3、4; order by是最后执行的。最后排序输出</span><br><span class="line">select ename,sal as salary from emp order by salary;</span><br></pre></td></tr></table></figure><h5 id="4、分组函数"><a href="#4、分组函数" class="headerlink" title="4、分组函数"></a>4、分组函数</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br></pre></td><td class="code"><pre><span class="line">count 计数</span><br><span class="line">sum 求和</span><br><span class="line">avg 平均值</span><br><span class="line">max 最大值</span><br><span class="line">min 最小值</span><br><span class="line">记住：分组函数一共5个所有的分组函数都是对“某一组”数据进行操作的。分组函数自动忽略NULL。</span><br><span class="line"></span><br><span class="line">找出工资总和？</span><br><span class="line">select sum(sal) from emp;</span><br><span class="line">找出最高工资？</span><br><span class="line">select max(sal) from emp;</span><br><span class="line">找出最低工资？</span><br><span class="line">select min(sal) from emp;</span><br><span class="line">找出平均工资？</span><br><span class="line">select avg(sal) from emp;</span><br><span class="line">找出总人数？</span><br><span class="line">select count(*) from emp;</span><br><span class="line">select count(ename) from emp;</span><br><span class="line">分组函数还有另一个名字：多行处理函数。</span><br><span class="line">多行处理函数的特点：输入多行，最终输出的结果是1行。</span><br><span class="line">select count(comm) from emp;</span><br><span class="line">+-------------+</span><br><span class="line">| count(comm) |</span><br><span class="line">+-------------+</span><br><span class="line">|           4 |</span><br><span class="line">+-------------+</span><br><span class="line"></span><br><span class="line">select sum(comm) from emp;</span><br><span class="line">+-----------+</span><br><span class="line">| sum(comm) |</span><br><span class="line">+-----------+</span><br><span class="line">|   2200.00 |</span><br><span class="line">+-----------+</span><br><span class="line"></span><br><span class="line">select sum(comm) from emp where comm is not null; # 不需要额外添加这个过滤条件。sum函数自动忽略NULL。 &amp;&amp;&amp;笔试重点</span><br><span class="line"></span><br><span class="line">找出工资高于平均工资的员工？</span><br><span class="line">select avg(sal) from emp; # 平均工资</span><br><span class="line">+-------------+</span><br><span class="line">| avg(sal)    |</span><br><span class="line">+-------------+</span><br><span class="line">| 2073.214286 |</span><br><span class="line">+-------------+</span><br><span class="line"></span><br><span class="line">select ename,sal from emp where sal &gt; avg(sal); #ERROR 1111 (HY000): Invalid use of group function</span><br><span class="line">思考以上的错误信息：无效的使用了分组函数？</span><br><span class="line">原因：SQL语句当中有一个语法规则，分组函数不可直接使用在where子句当中。</span><br><span class="line">怎么解释？</span><br><span class="line">因为 group by是在 where 执行之后才会执行的。（参看第6条 group by 和 having）</span><br><span class="line">...</span><br><span class="line">...</span><br><span class="line">...</span><br><span class="line">select 5 from 1 where 2 group by 3 having 4 order by 6</span><br><span class="line"># 在1那张表里查，经过2条件过滤之后，3分组，分组之后不满意再进行4过滤，之后5查出来，最后6排序输出</span><br><span class="line"></span><br><span class="line">找出工资高于平均工资的员工？</span><br><span class="line">第一步：找出平均工资</span><br><span class="line">select avg(sal) from emp;</span><br><span class="line">+-------------+</span><br><span class="line">| avg(sal)    |</span><br><span class="line">+-------------+</span><br><span class="line">| 2073.214286 |</span><br><span class="line">+-------------+</span><br><span class="line">第二步：找出高于平均工资的员工</span><br><span class="line">select ename,sal from emp where sal &gt; 2073.214286;</span><br><span class="line">+-------+---------+</span><br><span class="line">| ename | sal     |</span><br><span class="line">+-------+---------+</span><br><span class="line">| JONES | 2975.00 |</span><br><span class="line">| BLAKE | 2850.00 |</span><br><span class="line">| CLARK | 2450.00 |</span><br><span class="line">| SCOTT | 3000.00 |</span><br><span class="line">| KING  | 5000.00 |</span><br><span class="line">| FORD  | 3000.00 |</span><br><span class="line">+-------+---------+</span><br><span class="line">select ename,sal from emp where sal &gt; (select avg(sal) from emp);</span><br><span class="line">#算出结果之后再套进去</span><br><span class="line"></span><br><span class="line">count(*)和count(具体的某个字段)，他们有什么区别？# &amp;&amp;&amp;笔试重点</span><br><span class="line">count(*):不是统计某个字段中数据的个数，而是统计总记录条数。（和某个字段无关）</span><br><span class="line">count(comm): 表示统计comm字段中不为NULL的数据总数量。</span><br><span class="line"></span><br><span class="line">分组函数也能组合起来用：</span><br><span class="line">select count(*),sum(sal),avg(sal),max(sal),min(sal) from emp;</span><br><span class="line">+----------+----------+-------------+----------+----------+</span><br><span class="line">| count(*) | sum(sal) | avg(sal)    | max(sal) | min(sal) |</span><br><span class="line">+----------+----------+-------------+----------+----------+</span><br><span class="line">|       14 | 29025.00 | 2073.214286 |  5000.00 |   800.00 |</span><br><span class="line">+----------+----------+-------------+----------+----------+</span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="5、单行处理函数"><a href="#5、单行处理函数" class="headerlink" title="5、单行处理函数"></a>5、单行处理函数</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">输入一行，输出一行。</span><br><span class="line"></span><br><span class="line">计算每个员工的年薪？</span><br><span class="line">select ename,(sal+comm)*12 as yearsal from emp;</span><br><span class="line">重点：所有数据库都是这样规定的，只要有NULL参与的运算结果一定是NULL。</span><br><span class="line">使用ifnull函数：</span><br><span class="line">select ename,(sal+ifnull(comm,0))*12 as yearsal from emp;</span><br><span class="line"></span><br><span class="line">ifnull() 空处理函数？ ifnull(可能为NULL的数据,被当做什么处理)：属于单行处理函数。</span><br><span class="line">select ename,ifnull(comm,0) as comm from emp;</span><br><span class="line">+--------+---------+</span><br><span class="line">| ename  | comm    |</span><br><span class="line">+--------+---------+</span><br><span class="line">| SMITH  |    0.00 |</span><br><span class="line">| ALLEN  |  300.00 |</span><br><span class="line">| WARD   |  500.00 |</span><br><span class="line">| JONES  |    0.00 |</span><br><span class="line">| MARTIN | 1400.00 |</span><br><span class="line">| BLAKE  |    0.00 |</span><br><span class="line">| CLARK  |    0.00 |</span><br><span class="line">| SCOTT  |    0.00 |</span><br><span class="line">| KING   |    0.00 |</span><br><span class="line">| TURNER |    0.00 |</span><br><span class="line">| ADAMS  |    0.00 |</span><br><span class="line">| JAMES  |    0.00 |</span><br><span class="line">| FORD   |    0.00 |</span><br><span class="line">| MILLER |    0.00 |</span><br><span class="line">+--------+---------+</span><br></pre></td></tr></table></figure><h5 id="6、group-by-和-having"><a href="#6、group-by-和-having" class="headerlink" title="6、group by 和 having"></a>6、group by 和 having</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br></pre></td><td class="code"><pre><span class="line">group by ： 按照某个字段或者某些字段进行分组。</span><br><span class="line">having ： 对分组之后的数据进行再次过滤。</span><br><span class="line"></span><br><span class="line">案例：找出每个工作岗位的最高薪资。</span><br><span class="line">select max(sal),job from emp group by job;</span><br><span class="line">+----------+-----------+</span><br><span class="line">| max(sal) | job       |</span><br><span class="line">+----------+-----------+</span><br><span class="line">|  3000.00 | ANALYST   |</span><br><span class="line">|  1300.00 | CLERK     |</span><br><span class="line">|  2975.00 | MANAGER   |</span><br><span class="line">|  5000.00 | PRESIDENT |</span><br><span class="line">|  1600.00 | SALESMAN  |</span><br><span class="line">+----------+-----------+</span><br><span class="line">注意：</span><br><span class="line">*分组函数一般都会和 group by联合使用，这也是为什么它被称为分组函数的原因。</span><br><span class="line">*并且任何一个分组函数（ count sum avg max min）都是在 group by语句执行结束之后才会执行的。</span><br><span class="line">*当一条sql语句没有 group by的话，整张表的数据会自成一组。</span><br><span class="line"></span><br><span class="line">select ename,max(sal),job from emp group by job;</span><br><span class="line">以上在mysql当中，查询结果是有的，但是结果没有意义，查询出的结果与实际结果并不相符，在Oracle数据库当中会报错。语法错误。Oracle的语法规则比MySQL语法规则严谨。</span><br><span class="line">***记住一个规则：当一条语句中有 group by的话， select后面只能跟1、分组函数和2、参与分组的字段。</span><br><span class="line"></span><br><span class="line">每个工作岗位的平均薪资？</span><br><span class="line">select job,avg(sal) from emp group by job;</span><br><span class="line">+-----------+-------------+</span><br><span class="line">| job       | avg(sal)    |</span><br><span class="line">+-----------+-------------+</span><br><span class="line">| ANALYST   | 3000.000000 |</span><br><span class="line">| CLERK     | 1037.500000 |</span><br><span class="line">| MANAGER   | 2758.333333 |</span><br><span class="line">| PRESIDENT | 5000.000000 |</span><br><span class="line">| SALESMAN  | 1400.000000 |</span><br><span class="line">+-----------+-------------+</span><br><span class="line"></span><br><span class="line">多个字段能不能联合起来一块分组？</span><br><span class="line">案例：找出每个部门不同工作岗位的最高薪资。（和找出每个工作岗位的最高薪资不同）</span><br><span class="line">select deptno,job,max(sal) from emp group by deptno,job;</span><br><span class="line"></span><br><span class="line">找出每个部门的最高薪资，要求显示薪资大于2900的数据。</span><br><span class="line">第一步：找出每个部门的最高薪资</span><br><span class="line">select max(sal),deptno from emp group by deptno;</span><br><span class="line">+----------+--------+</span><br><span class="line">| max(sal) | deptno |</span><br><span class="line">+----------+--------+</span><br><span class="line">|  5000.00 |     10 |</span><br><span class="line">|  3000.00 |     20 |</span><br><span class="line">|  2850.00 |     30 |</span><br><span class="line">+----------+--------+</span><br><span class="line"></span><br><span class="line">第二步：找出薪资大于2900</span><br><span class="line">select max(sal),deptno from emp group by deptno having max(sal) &gt; 2900;#这种方式效率低。</span><br><span class="line">+----------+--------+</span><br><span class="line">| max(sal) | deptno |</span><br><span class="line">+----------+--------+</span><br><span class="line">|  5000.00 |     10 |</span><br><span class="line">|  3000.00 |     20 |</span><br><span class="line">+----------+--------+</span><br><span class="line"></span><br><span class="line">select max(sal),deptno from emp where sal &gt; 2900 group by deptno;#效率较高，因为where是在group by之前执行的，先筛选之后再分组，如果使用having的话，先分组再过滤的效率较低（分好组的数据却被过滤了，那就白分组了），建议能够使用where过滤的尽量使用where。但是如果where之后要用的数据是分完组之后算出来的那么没办法只能用having</span><br><span class="line">+----------+--------+</span><br><span class="line">| max(sal) | deptno |</span><br><span class="line">+----------+--------+</span><br><span class="line">|  5000.00 |     10 |</span><br><span class="line">|  3000.00 |     20 |</span><br><span class="line">+----------+--------+</span><br><span class="line"></span><br><span class="line">找出每个部门的平均薪资，要求显示薪资大于2000的数据。</span><br><span class="line">第一步：找出每个部门的平均薪资</span><br><span class="line">select deptno,avg(sal) from emp group by deptno;</span><br><span class="line">+--------+-------------+</span><br><span class="line">| deptno | avg(sal)    |</span><br><span class="line">+--------+-------------+</span><br><span class="line">|     10 | 2916.666667 |</span><br><span class="line">|     20 | 2175.000000 |</span><br><span class="line">|     30 | 1566.666667 |</span><br><span class="line">+--------+-------------+</span><br><span class="line"></span><br><span class="line">第二步：要求显示薪资大于2000的数据</span><br><span class="line">select deptno,avg(sal) from emp group by deptno having avg(sal) &gt; 2000;</span><br><span class="line">+--------+-------------+</span><br><span class="line">| deptno | avg(sal)    |</span><br><span class="line">+--------+-------------+</span><br><span class="line">|     10 | 2916.666667 |</span><br><span class="line">|     20 | 2175.000000 |</span><br><span class="line">+--------+-------------+</span><br><span class="line"></span><br><span class="line">where后面不能使用分组函数：</span><br><span class="line">select deptno,avg(sal) from emp where avg(sal) &gt; 2000 group by deptno; #错误了。</span><br><span class="line">这种情况只能使用having过滤。</span><br></pre></td></tr></table></figure><h5 id="7、总结一个完整的DQL语句怎么写？"><a href="#7、总结一个完整的DQL语句怎么写？" class="headerlink" title="7、总结一个完整的DQL语句怎么写？"></a>7、总结一个完整的DQL语句怎么写？</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">select5</span><br><span class="line">..</span><br><span class="line">from1</span><br><span class="line">..</span><br><span class="line">where2</span><br><span class="line">..</span><br><span class="line">group by3</span><br><span class="line">..</span><br><span class="line">having4  #having和group by是绑定的，用having之前必须先分组</span><br><span class="line">..</span><br><span class="line">order by6</span><br><span class="line">..</span><br></pre></td></tr></table></figure><h5 id="8、查询结果集去重"><a href="#8、查询结果集去重" class="headerlink" title="8、查询结果集去重"></a>8、查询结果集去重</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">select distinct job from emp; // distinct关键字去除重复记录。</span><br><span class="line">+-----------+</span><br><span class="line">| job       |</span><br><span class="line">+-----------+</span><br><span class="line">| CLERK     |</span><br><span class="line">| SALESMAN  |</span><br><span class="line">| MANAGER   |</span><br><span class="line">| ANALYST   |</span><br><span class="line">| PRESIDENT |</span><br><span class="line">+-----------+</span><br><span class="line"></span><br><span class="line">select ename,distinct job from emp;</span><br><span class="line">以上的sql语句是错误的。</span><br><span class="line">***记住：</span><br><span class="line">1、distinct只能出现在所有字段的最前面。</span><br><span class="line">2、distinct出现在最前方表示后面所有的字段联合起来去重</span><br><span class="line"></span><br><span class="line">select distinct deptno,job from emp;</span><br><span class="line">+--------+-----------+</span><br><span class="line">| deptno | job       |</span><br><span class="line">+--------+-----------+</span><br><span class="line">|     20 | CLERK     |</span><br><span class="line">|     30 | SALESMAN  |</span><br><span class="line">|     20 | MANAGER   |</span><br><span class="line">|     30 | MANAGER   |</span><br><span class="line">|     10 | MANAGER   |</span><br><span class="line">|     20 | ANALYST   |</span><br><span class="line">|     10 | PRESIDENT |</span><br><span class="line">|     30 | CLERK     |</span><br><span class="line">|     10 | CLERK     |</span><br><span class="line">+--------+-----------+</span><br><span class="line"></span><br><span class="line">案例：统计岗位的数量？</span><br><span class="line">select count(distinct job) from emp;</span><br><span class="line">    +---------------------+</span><br><span class="line">    | count(distinct job) |</span><br><span class="line">    +---------------------+</span><br><span class="line">    |                   5 |</span><br><span class="line">    +---------------------+</span><br></pre></td></tr></table></figure><h5 id="9、连接查询"><a href="#9、连接查询" class="headerlink" title="9、连接查询"></a>9、连接查询</h5><p>1、什么是连接查询？<br>    在实际开发中，大部分的情况下都不是从单表中查询数据，一般都是多张表联合查询取出最终的结果。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">在实际开发中，一般一个业务都会对应多张表，比如：学生和班级，起码两张表。</span><br><span class="line">stunostunameclassnoclassname</span><br><span class="line">---------------------------------------------------------------------</span><br><span class="line">1zs1第二中学高三1班</span><br><span class="line">2ls1第二中学高三1班</span><br><span class="line">学生和班级信息存储到一张表中，结果就像上面一样，数据会存在大量的重复，导致数据的冗余。（班级序号和名字都冗余了）</span><br></pre></td></tr></table></figure><p>2、连接查询的分类？</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">根据语法出现的年代来划分的话，包括：</span><br><span class="line">SQL92（一些老的DBA可能还在使用这种语法。DBA：DataBase Administrator，数据库管理员）</span><br><span class="line">SQL99（比较新的语法）</span><br><span class="line">根据表的连接方式来划分，包括：</span><br><span class="line">1、内连接：</span><br><span class="line">等值连接</span><br><span class="line">非等值连接</span><br><span class="line">自连接</span><br><span class="line">2、外连接：</span><br><span class="line">左外连接（左连接）</span><br><span class="line">右外连接（右连接）</span><br><span class="line">3、全连接（这个不讲，很少用！）</span><br></pre></td></tr></table></figure><p>3、在表的连接查询方面有一种现象被称为：笛卡尔积现象。（笛卡尔乘积现象）</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">案例：找出每一个员工的部门名称，要求显示员工名和部门名。</span><br><span class="line">EMP表</span><br><span class="line">    +--------+--------+</span><br><span class="line">    | ename  | deptno |</span><br><span class="line">    +--------+--------+</span><br><span class="line">    | SMITH  |     20 |</span><br><span class="line">    | ALLEN  |     30 |</span><br><span class="line">    | WARD   |     30 |</span><br><span class="line">    | JONES  |     20 |</span><br><span class="line">    | MARTIN |     30 |</span><br><span class="line">    | BLAKE  |     30 |</span><br><span class="line">    | CLARK  |     10 |</span><br><span class="line">    | SCOTT  |     20 |</span><br><span class="line">    | KING   |     10 |</span><br><span class="line">    | TURNER |     30 |</span><br><span class="line">    | ADAMS  |     20 |</span><br><span class="line">    | JAMES  |     30 |</span><br><span class="line">    | FORD   |     20 |</span><br><span class="line">    | MILLER |     10 |</span><br><span class="line">    +--------+--------+</span><br><span class="line">DEPT表</span><br><span class="line">    +--------+------------+----------+</span><br><span class="line">    | DEPTNO | DNAME      | LOC      |</span><br><span class="line">    +--------+------------+----------+</span><br><span class="line">    |     10 | ACCOUNTING | NEW YORK |</span><br><span class="line">    |     20 | RESEARCH   | DALLAS   |</span><br><span class="line">    |     30 | SALES      | CHICAGO  |</span><br><span class="line">    |     40 | OPERATIONS | BOSTON   |</span><br><span class="line">    +--------+------------+----------+</span><br><span class="line"></span><br><span class="line">select ename,dname from emp,dept;</span><br><span class="line">    +--------+------------+</span><br><span class="line">    | ename  | dname      |</span><br><span class="line">    +--------+------------+</span><br><span class="line">    | SMITH  | ACCOUNTING |</span><br><span class="line">    | SMITH  | RESEARCH   |</span><br><span class="line">    | SMITH  | SALES      |</span><br><span class="line">    | SMITH  | OPERATIONS |</span><br><span class="line">    | ALLEN  | ACCOUNTING |</span><br><span class="line">    | ALLEN  | RESEARCH   |</span><br><span class="line">    ............</span><br><span class="line">    56 rows in set (0.00 sec)</span><br><span class="line"></span><br><span class="line">笛卡尔积现象：当两张表进行连接查询的时候，*没有任何条件进行限制*，最终的查询结果条数是两张表记录条数的乘积。</span><br><span class="line"></span><br><span class="line">关于表的别名：</span><br><span class="line">select e.ename,d.dname from emp e,dept d;#ename和dname要联合显示</span><br><span class="line">表的别名（和字段别名一样）有什么好处？</span><br><span class="line">第一：执行效率高。不加别名的话ename不但在第一张表中找，还会在第二张表中找</span><br><span class="line">第二：可读性好。</span><br></pre></td></tr></table></figure><p>4、怎么避免笛卡尔积现象？当然是加条件进行过滤，但是这样并不会减少匹配次数。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">思考：避免了笛卡尔积现象，会减少记录的匹配次数吗？</span><br><span class="line">不会，次数还是56次。只不过显示的是有效记录。</span><br><span class="line"></span><br><span class="line">案例：找出每一个员工的部门名称，要求显示员工名和部门名。</span><br><span class="line">selecte.ename,d.dname from emp e , dept d where e.deptno = d.deptno; #SQL92的语法，以后不用。</span><br><span class="line">+--------+------------+</span><br><span class="line">| ename  | dname      |</span><br><span class="line">+--------+------------+</span><br><span class="line">| CLARK  | ACCOUNTING |</span><br><span class="line">| KING   | ACCOUNTING |</span><br><span class="line">| MILLER | ACCOUNTING |</span><br><span class="line">| SMITH  | RESEARCH   |</span><br><span class="line">| JONES  | RESEARCH   |</span><br><span class="line">| SCOTT  | RESEARCH   |</span><br><span class="line">| ADAMS  | RESEARCH   |</span><br><span class="line">| FORD   | RESEARCH   |</span><br><span class="line">| ALLEN  | SALES      |</span><br><span class="line">| WARD   | SALES      |</span><br><span class="line">| MARTIN | SALES      |</span><br><span class="line">| BLAKE  | SALES      |</span><br><span class="line">| TURNER | SALES      |</span><br><span class="line">| JAMES  | SALES      |</span><br><span class="line">+--------+------------+</span><br></pre></td></tr></table></figure><p>5、内连接之等值连接：最大特点是：条件是等量关系。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">案例：查询每个员工的部门名称，要求显示员工名和部门名。</span><br><span class="line">SQL92:（太老，不用了）</span><br><span class="line">select e.ename,d.dname from emp e, dept d where e.deptno = d.deptno;</span><br><span class="line"></span><br><span class="line">SQL99：（常用的）</span><br><span class="line">select e.ename,d.dname from emp e join dept d on e.deptno = d.deptno;</span><br><span class="line"></span><br><span class="line">#join on 语法，on后加表的连接条件</span><br><span class="line">#inner可以省略的，带着inner目的是可读性好一些。</span><br><span class="line">select e.ename,d.dname from emp e inner join dept d on e.deptno = d.deptno;</span><br><span class="line"></span><br><span class="line">SQL99 语法：</span><br><span class="line"> ... A join B on 连接条件 where ...</span><br><span class="line">SQL99语法结构更清晰一些：表的连接条件和后来的where条件分离了，表的连接就是表的连接，后面再过滤使用where。</span><br><span class="line">+--------+------------+</span><br><span class="line">| ename  | dname      |</span><br><span class="line">+--------+------------+</span><br><span class="line">| CLARK  | ACCOUNTING |</span><br><span class="line">| KING   | ACCOUNTING |</span><br><span class="line">| MILLER | ACCOUNTING |</span><br><span class="line">| SMITH  | RESEARCH   |</span><br><span class="line">| JONES  | RESEARCH   |</span><br><span class="line">| SCOTT  | RESEARCH   |</span><br><span class="line">| ADAMS  | RESEARCH   |</span><br><span class="line">| FORD   | RESEARCH   |</span><br><span class="line">| ALLEN  | SALES      |</span><br><span class="line">| WARD   | SALES      |</span><br><span class="line">| MARTIN | SALES      |</span><br><span class="line">| BLAKE  | SALES      |</span><br><span class="line">| TURNER | SALES      |</span><br><span class="line">| JAMES  | SALES      |</span><br><span class="line">+--------+------------+</span><br></pre></td></tr></table></figure><p>6、内连接之非等值连接：最大的特点是：连接条件中的关系是非等量关系。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line">案例：找出每个员工的工资等级，要求显示员工名、工资、工资等级。</span><br><span class="line"></span><br><span class="line">mysql&gt; select ename,sal from emp;</span><br><span class="line">    +--------+---------+</span><br><span class="line">    | ename  | sal     |</span><br><span class="line">    +--------+---------+</span><br><span class="line">    | SMITH  |  800.00 |</span><br><span class="line">    | ALLEN  | 1600.00 |</span><br><span class="line">    | WARD   | 1250.00 |</span><br><span class="line">    | JONES  | 2975.00 |</span><br><span class="line">    | MARTIN | 1250.00 |</span><br><span class="line">    | BLAKE  | 2850.00 |</span><br><span class="line">    | CLARK  | 2450.00 |</span><br><span class="line">    | SCOTT  | 3000.00 |</span><br><span class="line">    | KING   | 5000.00 |</span><br><span class="line">    | TURNER | 1500.00 |</span><br><span class="line">    | ADAMS  | 1100.00 |</span><br><span class="line">    | JAMES  |  950.00 |</span><br><span class="line">    | FORD   | 3000.00 |</span><br><span class="line">    | MILLER | 1300.00 |</span><br><span class="line">    +--------+---------+</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from salgrade;</span><br><span class="line">    +-------+-------+-------+ </span><br><span class="line">    | GRADE | LOSAL | HISAL |</span><br><span class="line">    +-------+-------+-------+</span><br><span class="line">    |     1 |   700 |  1200 |</span><br><span class="line">    |     2 |  1201 |  1400 |</span><br><span class="line">    |     3 |  1401 |  2000 |</span><br><span class="line">    |     4 |  2001 |  3000 |</span><br><span class="line">    |     5 |  3001 |  9999 |</span><br><span class="line">    +-------+-------+-------+</span><br><span class="line">    </span><br><span class="line">select </span><br><span class="line">e.ename,e.sal,s.grade</span><br><span class="line">from</span><br><span class="line">emp e</span><br><span class="line">join # inner可以省略</span><br><span class="line">salgrade s</span><br><span class="line">on</span><br><span class="line">e.sal between s.losal and s.hisal;</span><br><span class="line">        +--------+---------+-------+</span><br><span class="line">        | ename  | sal     | grade |</span><br><span class="line">        +--------+---------+-------+</span><br><span class="line">        | SMITH  |  800.00 |     1 |</span><br><span class="line">        | ALLEN  | 1600.00 |     3 |</span><br><span class="line">        | WARD   | 1250.00 |     2 |</span><br><span class="line">        | JONES  | 2975.00 |     4 |</span><br><span class="line">        | MARTIN | 1250.00 |     2 |</span><br><span class="line">        | BLAKE  | 2850.00 |     4 |</span><br><span class="line">        | CLARK  | 2450.00 |     4 |</span><br><span class="line">        | SCOTT  | 3000.00 |     4 |</span><br><span class="line">        | KING   | 5000.00 |     5 |</span><br><span class="line">        | TURNER | 1500.00 |     3 |</span><br><span class="line">        | ADAMS  | 1100.00 |     1 |</span><br><span class="line">        | JAMES  |  950.00 |     1 |</span><br><span class="line">        | FORD   | 3000.00 |     4 |</span><br><span class="line">        | MILLER | 1300.00 |     2 |</span><br><span class="line">        +--------+---------+-------+</span><br></pre></td></tr></table></figure><p>7、自连接：最大的特点是：一张表看做两张表。自己连接自己（起别名）。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line">案例：找出每个员工的上级领导，要求显示员工名和对应的领导名。</span><br><span class="line">mysql&gt; select empno,ename,mgr from emp;</span><br><span class="line">emp a员工表</span><br><span class="line">    +-------+--------+------+</span><br><span class="line">    | empno | ename  | mgr  |</span><br><span class="line">    +-------+--------+------+</span><br><span class="line">    |  7369 | SMITH  | 7902 |</span><br><span class="line">    |  7499 | ALLEN  | 7698 |</span><br><span class="line">    |  7521 | WARD   | 7698 |</span><br><span class="line">    |  7566 | JONES  | 7839 |</span><br><span class="line">    |  7654 | MARTIN | 7698 |</span><br><span class="line">    |  7698 | BLAKE  | 7839 |</span><br><span class="line">    |  7782 | CLARK  | 7839 |</span><br><span class="line">    |  7788 | SCOTT  | 7566 |</span><br><span class="line">    |  7839 | KING   | NULL |</span><br><span class="line">    |  7844 | TURNER | 7698 |</span><br><span class="line">    |  7876 | ADAMS  | 7788 |</span><br><span class="line">    |  7900 | JAMES  | 7698 |</span><br><span class="line">    |  7902 | FORD   | 7566 |</span><br><span class="line">    |  7934 | MILLER | 7782 |</span><br><span class="line">    +-------+--------+------+</span><br><span class="line">emp b 领导表 （员工表当中只有以下6个员工是领导。下面的表是上面表的子表）</span><br><span class="line">    +-------+--------+</span><br><span class="line">    | empno | ename  |</span><br><span class="line">    +-------+--------+</span><br><span class="line">    |  7566 | JONES  |</span><br><span class="line">    |  7698 | BLAKE  |</span><br><span class="line">    |  7782 | CLARK  |</span><br><span class="line">    |  7788 | SCOTT  |</span><br><span class="line">    |  7839 | KING   |</span><br><span class="line">    |  7902 | FORD   |</span><br><span class="line">    +-------+--------+</span><br><span class="line">员工的领导编号 = 领导的员工编号</span><br><span class="line"></span><br><span class="line">select </span><br><span class="line">a.ename as &#x27;员工名&#x27;,b.ename as &#x27;领导名&#x27;</span><br><span class="line">from</span><br><span class="line">emp a</span><br><span class="line">inner join</span><br><span class="line">emp b</span><br><span class="line">on</span><br><span class="line">a.mgr = b.empno;</span><br><span class="line">        +--------+--------+</span><br><span class="line">        | 员工名 | 领导名 |</span><br><span class="line">        +--------+--------+</span><br><span class="line">        | SMITH  | FORD   |</span><br><span class="line">        | ALLEN  | BLAKE  |</span><br><span class="line">        | WARD   | BLAKE  |</span><br><span class="line">        | JONES  | KING   |</span><br><span class="line">        | MARTIN | BLAKE  |</span><br><span class="line">        | BLAKE  | KING   |</span><br><span class="line">        | CLARK  | KING   |</span><br><span class="line">        | SCOTT  | JONES  |</span><br><span class="line">        | TURNER | BLAKE  |</span><br><span class="line">        | ADAMS  | SCOTT  |</span><br><span class="line">        | JAMES  | BLAKE  |</span><br><span class="line">        | FORD   | JONES  |</span><br><span class="line">        | MILLER | CLARK  |</span><br><span class="line">        +--------+--------+</span><br><span class="line">        13 rows in set (0.00 sec)</span><br><span class="line">#只有13条记录。这就是内连接，匹配的上就查出来匹配不上就不查了</span><br></pre></td></tr></table></figure><p>8、外连接</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br></pre></td><td class="code"><pre><span class="line">什么是外连接，和内连接有什么区别？</span><br><span class="line">1、内连接：</span><br><span class="line">假设A和B表进行连接，使用内连接的话，凡是A表和B表能够匹配上的记录查询出来，这就是内连接。AB两张表没有主副之分，两张表是平等的。</span><br><span class="line">2、外连接：</span><br><span class="line"> 假设A和B表进行连接，使用外连接的话，AB两张表中有一张表是主表，一张表是副表，主要查询主表中的数据，捎带着查询副表，当副表中的数据没有和主表中的数据匹配上，副表自动模拟出NULL与之匹配。</span><br><span class="line">3、外连接的分类</span><br><span class="line">左外连接（左连接）：表示左边的这张表是主表。</span><br><span class="line">右外连接（右连接）：表示右边的这张表是主表。</span><br><span class="line">左连接有右连接的写法，右连接也会有对应的左连接的写法。</span><br><span class="line"></span><br><span class="line">案例：找出每个员工的上级领导？（所有员工必须全部查询出来。）</span><br><span class="line">emp a 员工表</span><br><span class="line">    +-------+--------+------+</span><br><span class="line">    | empno | ename  | mgr  |</span><br><span class="line">    +-------+--------+------+</span><br><span class="line">    |  7369 | SMITH  | 7902 |</span><br><span class="line">    |  7499 | ALLEN  | 7698 |</span><br><span class="line">    |  7521 | WARD   | 7698 |</span><br><span class="line">    |  7566 | JONES  | 7839 |</span><br><span class="line">    |  7654 | MARTIN | 7698 |</span><br><span class="line">    |  7698 | BLAKE  | 7839 |</span><br><span class="line">    |  7782 | CLARK  | 7839 |</span><br><span class="line">    |  7788 | SCOTT  | 7566 |</span><br><span class="line">    |  7839 | KING   | NULL |</span><br><span class="line">    |  7844 | TURNER | 7698 |</span><br><span class="line">    |  7876 | ADAMS  | 7788 |</span><br><span class="line">    |  7900 | JAMES  | 7698 |</span><br><span class="line">    |  7902 | FORD   | 7566 |</span><br><span class="line">    |  7934 | MILLER | 7782 |</span><br><span class="line">    +-------+--------+------+</span><br><span class="line">emp b 领导表</span><br><span class="line">    +-------+--------+</span><br><span class="line">    | empno | ename  |</span><br><span class="line">    +-------+--------+</span><br><span class="line">    |  7566 | JONES  |</span><br><span class="line">    |  7698 | BLAKE  |</span><br><span class="line">    |  7782 | CLARK  |</span><br><span class="line">    |  7788 | SCOTT  |</span><br><span class="line">    |  7839 | KING   |</span><br><span class="line">    |  7902 | FORD   |</span><br><span class="line">    +-------+--------+</span><br><span class="line"></span><br><span class="line">内连接：</span><br><span class="line">select a.ename &#x27;员工&#x27;, b.ename &#x27;领导&#x27; from emp a join emp b on a.mgr = b.empno;</span><br><span class="line"></span><br><span class="line">外连接：（左外连接/左连接）</span><br><span class="line">select a.ename &#x27;员工&#x27;, b.ename &#x27;领导&#x27; from emp a left join emp b on a.mgr = b.empno;</span><br><span class="line">#left outer join，outer是可以省略的。</span><br><span class="line">外连接：（右外连接/右连接）</span><br><span class="line">select a.ename &#x27;员工&#x27;, b.ename &#x27;领导&#x27; from emp b right join emp a on a.mgr = b.empno;</span><br><span class="line">#right outer join，outer是可以省略的。</span><br><span class="line">    +--------+-------+</span><br><span class="line">    | 员工      | 领导    |</span><br><span class="line">    +--------+-------+</span><br><span class="line">    | SMITH  | FORD  |</span><br><span class="line">    | ALLEN  | BLAKE |</span><br><span class="line">    | WARD   | BLAKE |</span><br><span class="line">    | JONES  | KING  |</span><br><span class="line">    | MARTIN | BLAKE |</span><br><span class="line">    | BLAKE  | KING  |</span><br><span class="line">    | CLARK  | KING  |</span><br><span class="line">    | SCOTT  | JONES |</span><br><span class="line">    | KING   | NULL  |</span><br><span class="line">    | TURNER | BLAKE |</span><br><span class="line">    | ADAMS  | SCOTT |</span><br><span class="line">    | JAMES  | BLAKE |</span><br><span class="line">    | FORD   | JONES |</span><br><span class="line">    | MILLER | CLARK |</span><br><span class="line">    +--------+-------+</span><br><span class="line">    14 rows in set (0.00 sec)</span><br><span class="line"># 外连接最重要的特点是：主表的数据无条件的全部查询出来。虽然king的领导是null但是仍然可以查询出来</span><br><span class="line"></span><br><span class="line">案例：找出哪个部门没有员工？</span><br><span class="line">EMP表</span><br><span class="line">+-------+--------+-----------+------+------------+---------+---------+--------+</span><br><span class="line">| EMPNO | ENAME  | JOB       | MGR  | HIREDATE   | SAL     | COMM    | DEPTNO |</span><br><span class="line">+-------+--------+-----------+------+------------+---------+---------+--------+</span><br><span class="line">|  7369 | SMITH  | CLERK     | 7902 | 1980-12-17 |  800.00 |    NULL |     20 |</span><br><span class="line">|  7499 | ALLEN  | SALESMAN  | 7698 | 1981-02-20 | 1600.00 |  300.00 |     30 |</span><br><span class="line">|  7521 | WARD   | SALESMAN  | 7698 | 1981-02-22 | 1250.00 |  500.00 |     30 |</span><br><span class="line">|  7566 | JONES  | MANAGER   | 7839 | 1981-04-02 | 2975.00 |    NULL |     20 |</span><br><span class="line">|  7654 | MARTIN | SALESMAN  | 7698 | 1981-09-28 | 1250.00 | 1400.00 |     30 |</span><br><span class="line">|  7698 | BLAKE  | MANAGER   | 7839 | 1981-05-01 | 2850.00 |    NULL |     30 |</span><br><span class="line">|  7782 | CLARK  | MANAGER   | 7839 | 1981-06-09 | 2450.00 |    NULL |     10 |</span><br><span class="line">|  7788 | SCOTT  | ANALYST   | 7566 | 1987-04-19 | 3000.00 |    NULL |     20 |</span><br><span class="line">|  7839 | KING   | PRESIDENT | NULL | 1981-11-17 | 5000.00 |    NULL |     10 |</span><br><span class="line">|  7844 | TURNER | SALESMAN  | 7698 | 1981-09-08 | 1500.00 |    0.00 |     30 |</span><br><span class="line">|  7876 | ADAMS  | CLERK     | 7788 | 1987-05-23 | 1100.00 |    NULL |     20 |</span><br><span class="line">|  7900 | JAMES  | CLERK     | 7698 | 1981-12-03 |  950.00 |    NULL |     30 |</span><br><span class="line">|  7902 | FORD   | ANALYST   | 7566 | 1981-12-03 | 3000.00 |    NULL |     20 |</span><br><span class="line">|  7934 | MILLER | CLERK     | 7782 | 1982-01-23 | 1300.00 |    NULL |     10 |</span><br><span class="line">+-------+--------+-----------+------+------------+---------+---------+--------+</span><br><span class="line">DEPT</span><br><span class="line">    +--------+------------+----------+</span><br><span class="line">    | DEPTNO | DNAME      | LOC      |</span><br><span class="line">    +--------+------------+----------+</span><br><span class="line">    |     10 | ACCOUNTING | NEW YORK |</span><br><span class="line">    |     20 | RESEARCH   | DALLAS   |</span><br><span class="line">    |     30 | SALES      | CHICAGO  |</span><br><span class="line">    |     40 | OPERATIONS | BOSTON   |</span><br><span class="line">    +--------+------------+----------+</span><br><span class="line"></span><br><span class="line">select d.* from emp e right join dept d on e.deptno = d.deptno where e.empno is null;#外连接无条件查询主表中的所有元素。当副表中的数据没有和主表中的数据匹配上，副表自动模拟出NULL与之匹配。所以查询之后40号部门的emp中字段全是null</span><br><span class="line">    +--------+------------+--------+</span><br><span class="line">    | DEPTNO | DNAME      | LOC    |</span><br><span class="line">    +--------+------------+--------+</span><br><span class="line">    |     40 | OPERATIONS | BOSTON |</span><br><span class="line">    +--------+------------+--------+</span><br></pre></td></tr></table></figure><p>9、三张表怎么连接查询</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br></pre></td><td class="code"><pre><span class="line">案例：找出每一个员工的部门名称以及工资等级。</span><br><span class="line">EMP e</span><br><span class="line">    +-------+--------+---------+--------+</span><br><span class="line">    | empno | ename  | sal     | deptno |</span><br><span class="line">    +-------+--------+---------+--------+</span><br><span class="line">    |  7369 | SMITH  |  800.00 |     20 |</span><br><span class="line">    |  7499 | ALLEN  | 1600.00 |     30 |</span><br><span class="line">    |  7521 | WARD   | 1250.00 |     30 |</span><br><span class="line">    |  7566 | JONES  | 2975.00 |     20 |</span><br><span class="line">    |  7654 | MARTIN | 1250.00 |     30 |</span><br><span class="line">    |  7698 | BLAKE  | 2850.00 |     30 |</span><br><span class="line">    |  7782 | CLARK  | 2450.00 |     10 |</span><br><span class="line">    |  7788 | SCOTT  | 3000.00 |     20 |</span><br><span class="line">    |  7839 | KING   | 5000.00 |     10 |</span><br><span class="line">    |  7844 | TURNER | 1500.00 |     30 |</span><br><span class="line">    |  7876 | ADAMS  | 1100.00 |     20 |</span><br><span class="line">    |  7900 | JAMES  |  950.00 |     30 |</span><br><span class="line">    |  7902 | FORD   | 3000.00 |     20 |</span><br><span class="line">    |  7934 | MILLER | 1300.00 |     10 |</span><br><span class="line">    +-------+--------+---------+--------+</span><br><span class="line">DEPT d</span><br><span class="line">    +--------+------------+----------+</span><br><span class="line">    | DEPTNO | DNAME      | LOC      |</span><br><span class="line">    +--------+------------+----------+</span><br><span class="line">    |     10 | ACCOUNTING | NEW YORK |</span><br><span class="line">    |     20 | RESEARCH   | DALLAS   |</span><br><span class="line">    |     30 | SALES      | CHICAGO  |</span><br><span class="line">    |     40 | OPERATIONS | BOSTON   |</span><br><span class="line">    +--------+------------+----------+</span><br><span class="line">SALGRADE s</span><br><span class="line">    +-------+-------+-------+</span><br><span class="line">    | GRADE | LOSAL | HISAL |</span><br><span class="line">    +-------+-------+-------+</span><br><span class="line">    |     1 |   700 |  1200 |</span><br><span class="line">    |     2 |  1201 |  1400 |</span><br><span class="line">    |     3 |  1401 |  2000 |</span><br><span class="line">    |     4 |  2001 |  3000 |</span><br><span class="line">    |     5 |  3001 |  9999 |</span><br><span class="line">    +-------+-------+-------+</span><br><span class="line"></span><br><span class="line">注意，解释一下：</span><br><span class="line">....</span><br><span class="line">A</span><br><span class="line">join</span><br><span class="line">B</span><br><span class="line">join</span><br><span class="line">C</span><br><span class="line">on</span><br><span class="line">...</span><br><span class="line">#表示：A表和B表先进行表连接，连接之后A表继续和C表进行连接。</span><br><span class="line">#注意：虽然是多张表，但是还是当做两张表的连接看，AB连接和AC连接</span><br><span class="line">select e.ename,d.dname,s.grade from emp e join dept d</span><br><span class="line">on</span><br><span class="line">e.deptno = d.deptno</span><br><span class="line">join</span><br><span class="line">salgrade s</span><br><span class="line">on</span><br><span class="line">e.sal between s.losal and s.hisal;</span><br><span class="line"></span><br><span class="line">+--------+------------+-------+</span><br><span class="line">| ename  | dname      | grade |</span><br><span class="line">+--------+------------+-------+</span><br><span class="line">| SMITH  | RESEARCH   |     1 |</span><br><span class="line">| ALLEN  | SALES      |     3 |</span><br><span class="line">| WARD   | SALES      |     2 |</span><br><span class="line">| JONES  | RESEARCH   |     4 |</span><br><span class="line">| MARTIN | SALES      |     2 |</span><br><span class="line">| BLAKE  | SALES      |     4 |</span><br><span class="line">| CLARK  | ACCOUNTING |     4 |</span><br><span class="line">| SCOTT  | RESEARCH   |     4 |</span><br><span class="line">| KING   | ACCOUNTING |     5 |</span><br><span class="line">| TURNER | SALES      |     3 |</span><br><span class="line">| ADAMS  | RESEARCH   |     1 |</span><br><span class="line">| JAMES  | SALES      |     1 |</span><br><span class="line">| FORD   | RESEARCH   |     4 |</span><br><span class="line">| MILLER | ACCOUNTING |     2 |</span><br><span class="line">+--------+------------+-------+</span><br><span class="line"></span><br><span class="line">案例：找出每一个员工的部门名称、工资等级、以及上级领导。</span><br><span class="line">select </span><br><span class="line">e.ename &#x27;员工&#x27;,d.dname,s.grade,e1.ename &#x27;领导&#x27;</span><br><span class="line">from</span><br><span class="line">emp e</span><br><span class="line">join</span><br><span class="line">dept d</span><br><span class="line">on</span><br><span class="line">e.deptno = d.deptno</span><br><span class="line">join</span><br><span class="line">salgrade s</span><br><span class="line">on</span><br><span class="line">e.sal between s.losal and s.hisal</span><br><span class="line">left join</span><br><span class="line">emp e1</span><br><span class="line">on</span><br><span class="line">e.mgr = e1.empno;</span><br><span class="line"></span><br><span class="line">+--------+------------+-------+-------+</span><br><span class="line">| 员工      | dname      | grade | 领导    |</span><br><span class="line">+--------+------------+-------+-------+</span><br><span class="line">| SMITH  | RESEARCH   |     1 | FORD  |</span><br><span class="line">| ALLEN  | SALES      |     3 | BLAKE |</span><br><span class="line">| WARD   | SALES      |     2 | BLAKE |</span><br><span class="line">| JONES  | RESEARCH   |     4 | KING  |</span><br><span class="line">| MARTIN | SALES      |     2 | BLAKE |</span><br><span class="line">| BLAKE  | SALES      |     4 | KING  |</span><br><span class="line">| CLARK  | ACCOUNTING |     4 | KING  |</span><br><span class="line">| SCOTT  | RESEARCH   |     4 | JONES |</span><br><span class="line">| KING   | ACCOUNTING |     5 | NULL  |</span><br><span class="line">| TURNER | SALES      |     3 | BLAKE |</span><br><span class="line">| ADAMS  | RESEARCH   |     1 | SCOTT |</span><br><span class="line">| JAMES  | SALES      |     1 | BLAKE |</span><br><span class="line">| FORD   | RESEARCH   |     4 | JONES |</span><br><span class="line">| MILLER | ACCOUNTING |     2 | CLARK |</span><br><span class="line">+--------+------------+-------+-------+</span><br></pre></td></tr></table></figure><h5 id="10、子查询"><a href="#10、子查询" class="headerlink" title="10、子查询"></a>10、子查询</h5><p>1、什么是子查询？子查询都可以出现在哪里？</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">select语句当中嵌套 select语句，被嵌套的 select语句是子查询。</span><br><span class="line">子查询可以出现在哪里？</span><br><span class="line">select</span><br><span class="line">..(select).</span><br><span class="line">from</span><br><span class="line">..(select).</span><br><span class="line">where</span><br><span class="line">..(select).</span><br></pre></td></tr></table></figure><p>2、where子句中使用子查询</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">案例：找出高于平均薪资的员工信息。</span><br><span class="line">select * from emp where sal &gt; avg(sal); #错误的写法，where后面不能直接使用分组函数。</span><br><span class="line"></span><br><span class="line">第一步：找出平均薪资</span><br><span class="line">select avg(sal) from emp;</span><br><span class="line">+-------------+</span><br><span class="line">| avg(sal)    |</span><br><span class="line">+-------------+</span><br><span class="line">| 2073.214286 |</span><br><span class="line">+-------------+</span><br><span class="line">第二步：where过滤</span><br><span class="line">select * from emp where sal &gt; 2073.214286;</span><br><span class="line"></span><br><span class="line">第一步和第二步合并：</span><br><span class="line">select * from emp where sal &gt; (select avg(sal) from emp);</span><br></pre></td></tr></table></figure><p>3、from后面嵌套子查询 <strong>￥￥重点</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line">案例：找出每个部门平均薪水的等级。</span><br><span class="line">第一步：找出每个部门平均薪水（按照部门编号分组，求sal的平均值）</span><br><span class="line">select deptno,avg(sal) as avgsal from emp group by deptno;</span><br><span class="line">    +--------+-------------+</span><br><span class="line">    | deptno | avgsal      |</span><br><span class="line">    +--------+-------------+</span><br><span class="line">    |     10 | 2916.666667 |</span><br><span class="line">    |     20 | 2175.000000 |</span><br><span class="line">    |     30 | 1566.666667 |</span><br><span class="line">    +--------+-------------+</span><br><span class="line">第二步：将以上的查询结果当做临时表t，让t表和salgrade s表连接，条件是：t.avgsal between s.losal and s.hisal</span><br><span class="line">select </span><br><span class="line">t.*,s.grade</span><br><span class="line">from</span><br><span class="line">(select deptno,avg(sal) as avgsal from emp group by deptno) t</span><br><span class="line">join</span><br><span class="line">salgrade s</span><br><span class="line">on</span><br><span class="line">t.avgsal between s.losal and s.hisal;</span><br><span class="line">    +--------+-------------+-------+</span><br><span class="line">    | deptno | avgsal      | grade |</span><br><span class="line">    +--------+-------------+-------+</span><br><span class="line">    |     30 | 1566.666667 |     3 |</span><br><span class="line">    |     10 | 2916.666667 |     4 |</span><br><span class="line">    |     20 | 2175.000000 |     4 |</span><br><span class="line">    +--------+-------------+-------+</span><br><span class="line"></span><br><span class="line">案例：找出每个部门平均的薪水等级（每个部门中所有员工的薪水等级的平均值）。</span><br><span class="line">第一步：找出每个员工的薪水等级。</span><br><span class="line">select e.ename &#x27;员工&#x27;,e.sal &#x27;薪水&#x27;,e.deptno &#x27;部门编号&#x27;,s.grade &#x27;薪资等级&#x27; from emp e join salgrade s on e.sal between s.losal and s.hisal;</span><br><span class="line">    +--------+---------+--------+-------+</span><br><span class="line">    | ename  | sal     | deptno | grade |</span><br><span class="line">    +--------+---------+--------+-------+</span><br><span class="line">    | SMITH  |  800.00 |     20 |     1 |</span><br><span class="line">    | ALLEN  | 1600.00 |     30 |     3 |</span><br><span class="line">    | WARD   | 1250.00 |     30 |     2 |</span><br><span class="line">    | JONES  | 2975.00 |     20 |     4 |</span><br><span class="line">    | MARTIN | 1250.00 |     30 |     2 |</span><br><span class="line">    | BLAKE  | 2850.00 |     30 |     4 |</span><br><span class="line">    | CLARK  | 2450.00 |     10 |     4 |</span><br><span class="line">    | SCOTT  | 3000.00 |     20 |     4 |</span><br><span class="line">    | KING   | 5000.00 |     10 |     5 |</span><br><span class="line">    | TURNER | 1500.00 |     30 |     3 |</span><br><span class="line">    | ADAMS  | 1100.00 |     20 |     1 |</span><br><span class="line">    | JAMES  |  950.00 |     30 |     1 |</span><br><span class="line">    | FORD   | 3000.00 |     20 |     4 |</span><br><span class="line">    | MILLER | 1300.00 |     10 |     2 |</span><br><span class="line">    +--------+---------+--------+-------+</span><br><span class="line">第二步：基于以上结果，继续按照deptno分组，求grade平均值。</span><br><span class="line">select </span><br><span class="line">e.deptno,avg(s.grade)</span><br><span class="line">from </span><br><span class="line">emp e </span><br><span class="line">join </span><br><span class="line">salgrade s </span><br><span class="line">on </span><br><span class="line">e.sal between s.losal and s.hisal #先算了一下薪水等级</span><br><span class="line">group by #然后分组。最后执行select后面的分组函数</span><br><span class="line">e.deptno;</span><br><span class="line">    +--------+--------------+</span><br><span class="line">    | deptno | avg(s.grade) |</span><br><span class="line">    +--------+--------------+</span><br><span class="line">    |     10 |       3.6667 |</span><br><span class="line">    |     20 |       2.8000 |</span><br><span class="line">    |     30 |       2.5000 |</span><br><span class="line">    +--------+--------------+</span><br></pre></td></tr></table></figure><p>4、在select后面嵌套子查询。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">案例：找出每个员工所在的部门名称，要求显示员工名和部门名。</span><br><span class="line">#一般使用下面语句</span><br><span class="line">select </span><br><span class="line">e.ename,d.dname</span><br><span class="line">from</span><br><span class="line">emp e</span><br><span class="line">join</span><br><span class="line">dept d</span><br><span class="line">on</span><br><span class="line">e.deptno = d.deptno;</span><br><span class="line">#下面这个是不常用的写法，只是为了学习select后面嵌套子查询</span><br><span class="line">select </span><br><span class="line">e.ename,(select d.dname from dept d where e.deptno = d.deptno) as dname </span><br><span class="line">from </span><br><span class="line">emp e;</span><br><span class="line"></span><br><span class="line">    +--------+------------+</span><br><span class="line">    | ename  | dname      |</span><br><span class="line">    +--------+------------+</span><br><span class="line">    | SMITH  | RESEARCH   |</span><br><span class="line">    | ALLEN  | SALES      |</span><br><span class="line">    | WARD   | SALES      |</span><br><span class="line">    | JONES  | RESEARCH   |</span><br><span class="line">    | MARTIN | SALES      |</span><br><span class="line">    | BLAKE  | SALES      |</span><br><span class="line">    | CLARK  | ACCOUNTING |</span><br><span class="line">    | SCOTT  | RESEARCH   |</span><br><span class="line">    | KING   | ACCOUNTING |</span><br><span class="line">    | TURNER | SALES      |</span><br><span class="line">    | ADAMS  | RESEARCH   |</span><br><span class="line">    | JAMES  | SALES      |</span><br><span class="line">    | FORD   | RESEARCH   |</span><br><span class="line">    | MILLER | ACCOUNTING |</span><br><span class="line">    +--------+------------+</span><br></pre></td></tr></table></figure><h5 id="11、union"><a href="#11、union" class="headerlink" title="11、union"></a>11、union</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line">#将查询结果集相加</span><br><span class="line">案例：找出工作岗位是SALESMAN和MANAGER的员工？</span><br><span class="line">第一种：select ename,job from emp where job = &#x27;MANAGER&#x27; or job = &#x27;SALESMAN&#x27;;</span><br><span class="line">第二种：select ename,job from emp where job in(&#x27;MANAGER&#x27;,&#x27;SALESMAN&#x27;);</span><br><span class="line">    +--------+----------+</span><br><span class="line">    | ename  | job      |</span><br><span class="line">    +--------+----------+</span><br><span class="line">    | ALLEN  | SALESMAN |</span><br><span class="line">    | WARD   | SALESMAN |</span><br><span class="line">    | JONES  | MANAGER  |</span><br><span class="line">    | MARTIN | SALESMAN |</span><br><span class="line">    | BLAKE  | MANAGER  |</span><br><span class="line">    | CLARK  | MANAGER  |</span><br><span class="line">    | TURNER | SALESMAN |</span><br><span class="line">    +--------+----------+</span><br><span class="line">第三种：union</span><br><span class="line">select ename,job from emp where job = &#x27;MANAGER&#x27;</span><br><span class="line">union</span><br><span class="line">select ename,job from emp where job = &#x27;SALESMAN&#x27;;</span><br><span class="line">    +--------+----------+</span><br><span class="line">    | ename  | job      |</span><br><span class="line">    +--------+----------+</span><br><span class="line">    | JONES  | MANAGER  |</span><br><span class="line">    | BLAKE  | MANAGER  |</span><br><span class="line">    | CLARK  | MANAGER  |</span><br><span class="line">    | ALLEN  | SALESMAN |</span><br><span class="line">    | WARD   | SALESMAN |</span><br><span class="line">    | MARTIN | SALESMAN |</span><br><span class="line">    | TURNER | SALESMAN |</span><br><span class="line">    +--------+----------+</span><br><span class="line"></span><br><span class="line">两张不相干的表中的数据拼接在一起显示？</span><br><span class="line">select ename from emp</span><br><span class="line">union</span><br><span class="line">select dname from dept; #能把查询结果拼成一列，前提是列数相同才能拼接，虽然拼接在一起的数据可能没什么意义</span><br><span class="line">    +------------+</span><br><span class="line">    | ename      |</span><br><span class="line">    +------------+</span><br><span class="line">    | SMITH      |</span><br><span class="line">    | ALLEN      |</span><br><span class="line">    | WARD       |</span><br><span class="line">    | JONES      |</span><br><span class="line">    | MARTIN     |</span><br><span class="line">    | BLAKE      |</span><br><span class="line">    | CLARK      |</span><br><span class="line">    | SCOTT      |</span><br><span class="line">    | KING       |</span><br><span class="line">    | TURNER     |</span><br><span class="line">    | ADAMS      |</span><br><span class="line">    | JAMES      |</span><br><span class="line">    | FORD       |</span><br><span class="line">    | MILLER     |</span><br><span class="line">    | ACCOUNTING |</span><br><span class="line">    | RESEARCH   |</span><br><span class="line">    | SALES      |</span><br><span class="line">    | OPERATIONS |</span><br><span class="line">    +------------+</span><br><span class="line"></span><br><span class="line">select ename,sal from emp</span><br><span class="line">union</span><br><span class="line">select dname from dept;#拼接时列数必须相同</span><br><span class="line">#ERROR 1222 (21000): The used SELECT statements have a different number of columns</span><br></pre></td></tr></table></figure><h5 id="12、limit-（重点）"><a href="#12、limit-（重点）" class="headerlink" title="12、limit （重点）"></a>12、limit （重点）</h5><p>1、limit是mysql特有的，其他数据库中没有，不通用。（Oracle中有一个相同的机制，叫rownum）</p><p>2、作用：limit取结果集中的部分数据</p><p>3、语法机制：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">limit startIndex, length</span><br><span class="line">startIndex表示起始位置，从0开始，0表示第一条数据。</span><br><span class="line">length表示取几个</span><br><span class="line">案例：取出工资前5名的员工（思路：降序取前5个）</span><br><span class="line">select ename,sal from emp order by sal desc;</span><br><span class="line">取前5个：</span><br><span class="line">select ename,sal from emp order by sal desc limit 0, 5;</span><br><span class="line">select ename,sal from emp order by sal desc limit 5;</span><br></pre></td></tr></table></figure><p>4、<code>limit</code> 是 sql 语句最后执行的一个环节：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">select5</span><br><span class="line">...</span><br><span class="line">from1</span><br><span class="line">...</span><br><span class="line">where2</span><br><span class="line">...</span><br><span class="line">group by3</span><br><span class="line">...</span><br><span class="line">having4</span><br><span class="line">...</span><br><span class="line">order by6</span><br><span class="line">...</span><br><span class="line">limit7</span><br><span class="line">...;</span><br></pre></td></tr></table></figure><p>5、案例：找出工资排名在第4到第9名的员工？</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">select ename,sal from emp order by sal desc limit 3,6;</span><br><span class="line">+--------+---------+</span><br><span class="line">| ename  | sal     |</span><br><span class="line">+--------+---------+</span><br><span class="line">| JONES  | 2975.00 |</span><br><span class="line">| BLAKE  | 2850.00 |</span><br><span class="line">| CLARK  | 2450.00 |</span><br><span class="line">| ALLEN  | 1600.00 |</span><br><span class="line">| TURNER | 1500.00 |</span><br><span class="line">| MILLER | 1300.00 |</span><br><span class="line">+--------+---------+</span><br></pre></td></tr></table></figure><p>6、通用的标准分页sql？</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">每页显示3条记录：</span><br><span class="line">第1页：0, 3</span><br><span class="line">第2页：3, 3</span><br><span class="line">第3页：6, 3</span><br><span class="line">第4页：9, 3</span><br><span class="line">第5页：12, 3</span><br><span class="line"></span><br><span class="line">每页显示pageSize条记录：</span><br><span class="line">第pageNo页：(pageNo - 1) * pageSize, pageSize</span><br><span class="line"></span><br><span class="line">pageSize是什么？是每页显示多少条记录</span><br><span class="line">pageNo是什么？显示第几页</span><br><span class="line"></span><br><span class="line">java代码&#123;</span><br><span class="line">int pageNo = 2; // 页码是2</span><br><span class="line">int pageSize = 10; // 每页显示10条</span><br><span class="line"></span><br><span class="line">limit (pageNo - 1) * pageSize, pageSize</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="5-2、数据定义语言（DDL）"><a href="#5-2、数据定义语言（DDL）" class="headerlink" title="5.2、数据定义语言（DDL）"></a>5.2、数据定义语言（DDL）</h4><h5 id="1、创建表"><a href="#1、创建表" class="headerlink" title="1、创建表"></a>1、创建表</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">建表语句的语法格式：</span><br><span class="line">create table 表名(</span><br><span class="line">字段名1 数据类型,</span><br><span class="line">字段名2 数据类型,</span><br><span class="line">字段名3 数据类型,</span><br><span class="line">....</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">关于MySQL当中字段的数据类型？以下只说常见的</span><br><span class="line">int整数型(java中的int)</span><br><span class="line">bigint长整型(java中的long)</span><br><span class="line">float浮点型(java中的float double)</span><br><span class="line">char定长字符串(String)</span><br><span class="line">varchar可变长字符串(StringBuffer/StringBuilder) 最多存储255个字符</span><br><span class="line">date日期类型 （对应Java中的java.sql.Date类型）</span><br><span class="line">BLOB二进制大对象（存储图片、视频等流媒体信息） Binary Large OBject （对应java中的Object）</span><br><span class="line">CLOB字符大对象（存储较大文本，比如，可以存储4G的字符串。） Character Large OBject（对应java中的Object）</span><br><span class="line">......</span><br><span class="line"></span><br><span class="line">char 和 varchar怎么选择？</span><br><span class="line">在实际的开发中，当某个字段中的数据长度不发生改变的时候，是定长的，例如：性别、生日等都是采用char。</span><br><span class="line">当一个字段的数据长度不确定，例如：简介、姓名等都是采用varchar。</span><br><span class="line"></span><br><span class="line">BLOB 和 CLOB类型的使用？</span><br><span class="line">电影表: t_movie</span><br><span class="line">id(int)name(varchar)</span><br><span class="line">playtime(date/char)上映时间</span><br><span class="line">haibao(BLOB)海报（图片） #图片必须使用java中的IO流才能放在表当中使用sql的insert不行，一般是将图片放在硬盘中，数据库中存储该图片的路径</span><br><span class="line">history(CLOB)剧情梗概（大文本）</span><br><span class="line"></span><br><span class="line">表名在数据库当中一般建议以：t_或者tbl_开始。</span><br><span class="line"></span><br><span class="line">创建学生表：</span><br><span class="line">学生信息包括：</span><br><span class="line">学号、姓名、性别、班级编号、生日</span><br><span class="line">学号：bigint</span><br><span class="line">姓名：varchar</span><br><span class="line">性别：char</span><br><span class="line">班级编号：int</span><br><span class="line">生日：char</span><br><span class="line"></span><br><span class="line">create table t_student(</span><br><span class="line">no bigint,</span><br><span class="line">name varchar(255),</span><br><span class="line">sex char(1),</span><br><span class="line">classno varchar(255),</span><br><span class="line">birth char(10)</span><br><span class="line">);</span><br></pre></td></tr></table></figure><h5 id="2、对于表结构的修改"><a href="#2、对于表结构的修改" class="headerlink" title="2、对于表结构的修改"></a>2、对于表结构的修改</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">alter</span><br><span class="line">这里不讲了，大家使用工具完成即可，因为在实际开发中表一旦</span><br><span class="line">设计好之后，对表结构的修改是很少的，修改表结构就是对之前的设计进行了否定，即使</span><br><span class="line">需要修改表结构，我们也可以直接使用工具操作。修改表结构的语句不会出现在Java代码当中。</span><br><span class="line">出现在java代码当中的sql包括： insert delete update select（这些都是表中的数据操作。）</span><br><span class="line"></span><br><span class="line">增删改查有一个术语：CRUD操作</span><br><span class="line">Create（增） Retrieve（检索） Update（修改） Delete（删除）</span><br></pre></td></tr></table></figure><h5 id="3、约束-Constraint"><a href="#3、约束-Constraint" class="headerlink" title="3、约束(Constraint)"></a>3、约束(Constraint)</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br></pre></td><td class="code"><pre><span class="line">1、什么是约束？常见的约束有哪些呢？</span><br><span class="line">在创建表的时候，可以给表的字段添加相应的约束，添加约束的目的是为了保证表中数据的</span><br><span class="line">合法性、有效性、完整性。</span><br><span class="line">常见的约束有哪些呢？</span><br><span class="line">非空约束(not null)：约束的字段不能为NULL</span><br><span class="line">唯一约束(unique)：约束的字段不能重复</span><br><span class="line">主键约束(primary key)：约束的字段既不能为NULL，也不能重复（简称PK）</span><br><span class="line">外键约束(foreign key)：...（简称FK）</span><br><span class="line">检查约束(check)：注意Oracle数据库有check约束，但是mysql没有，目前mysql不支持该约束。</span><br><span class="line"></span><br><span class="line">2、非空约束 not null</span><br><span class="line">drop table if exists t_user;</span><br><span class="line">create table t_user(</span><br><span class="line">id int,</span><br><span class="line">username varchar(255) not null,</span><br><span class="line">password varchar(255)</span><br><span class="line">);</span><br><span class="line">insert into t_user(id,password) values(1,&#x27;123&#x27;);</span><br><span class="line">#ERROR 1364 (HY000): Field &#x27;username&#x27; doesn&#x27;t have a default value</span><br><span class="line">insert into t_user(id,username,password) values(1,&#x27;lisi&#x27;,&#x27;123&#x27;);</span><br><span class="line"></span><br><span class="line">3、唯一性约束（unique）</span><br><span class="line">* 唯一约束修饰的字段具有唯一性，不能重复。但可以为NULL。</span><br><span class="line">* 案例：给某一列添加unique</span><br><span class="line">drop table if exists t_user;</span><br><span class="line">create table t_user(</span><br><span class="line">id int,</span><br><span class="line">username varchar(255) unique  #列级约束</span><br><span class="line">);</span><br><span class="line">insert into t_user values(1,&#x27;zhangsan&#x27;);</span><br><span class="line">insert into t_user values(2,&#x27;zhangsan&#x27;);</span><br><span class="line">#ERROR 1062 (23000): Duplicate entry &#x27;zhangsan&#x27; for key &#x27;username&#x27;</span><br><span class="line"></span><br><span class="line">insert into t_user(id) values(2);</span><br><span class="line">insert into t_user(id) values(3);</span><br><span class="line">insert into t_user(id) values(4);</span><br><span class="line"></span><br><span class="line">* 案例：给两个列或者多个列添加unique</span><br><span class="line">drop table if exists t_user;</span><br><span class="line">create table t_user(</span><br><span class="line">id int, </span><br><span class="line">usercode varchar(255),</span><br><span class="line">username varchar(255),</span><br><span class="line">unique(usercode,username) // 多个字段联合起来添加1个约束unique 【表级约束】</span><br><span class="line">);</span><br><span class="line">insert into t_user values(1,&#x27;111&#x27;,&#x27;zs&#x27;);</span><br><span class="line">insert into t_user values(2,&#x27;111&#x27;,&#x27;ls&#x27;);</span><br><span class="line">insert into t_user values(3,&#x27;222&#x27;,&#x27;zs&#x27;);</span><br><span class="line">select * from t_user;</span><br><span class="line">insert into t_user values(4,&#x27;111&#x27;,&#x27;zs&#x27;);</span><br><span class="line">#ERROR 1062 (23000): Duplicate entry &#x27;111-zs&#x27; for key &#x27;usercode&#x27;</span><br><span class="line"></span><br><span class="line">drop table if exists t_user;</span><br><span class="line">create table t_user(</span><br><span class="line">id int, </span><br><span class="line">usercode varchar(255) unique,</span><br><span class="line">username varchar(255) unique #两个列级约束</span><br><span class="line">);</span><br><span class="line">insert into t_user values(1,&#x27;111&#x27;,&#x27;zs&#x27;);</span><br><span class="line">insert into t_user values(2,&#x27;111&#x27;,&#x27;ls&#x27;);</span><br><span class="line">#ERROR 1062 (23000): Duplicate entry &#x27;111&#x27; for key &#x27;usercode&#x27;</span><br><span class="line">* 注意： unique既有列级约束又有表级约束， not null约束只有列级约束。没有表级约束。</span><br><span class="line"></span><br><span class="line">4、主键约束</span><br><span class="line">* 怎么给一张表添加主键约束呢？</span><br><span class="line">drop table if exists t_user;</span><br><span class="line">create table t_user(</span><br><span class="line">id int primary key,  # 列级约束</span><br><span class="line">username varchar(255),</span><br><span class="line">email varchar(255)</span><br><span class="line">);</span><br><span class="line">insert into t_user(id,username,email) values(1,&#x27;zs&#x27;,&#x27;zs@123.com&#x27;);</span><br><span class="line">insert into t_user(id,username,email) values(2,&#x27;ls&#x27;,&#x27;ls@123.com&#x27;);</span><br><span class="line">insert into t_user(id,username,email) values(3,&#x27;ww&#x27;,&#x27;ww@123.com&#x27;);</span><br><span class="line">select * from t_user;</span><br><span class="line">+----+----------+------------+</span><br><span class="line">| id | username | email      |</span><br><span class="line">+----+----------+------------+</span><br><span class="line">|  1 | zs       | zs@123.com |</span><br><span class="line">|  2 | ls       | ls@123.com |</span><br><span class="line">|  3 | ww       | ww@123.com |</span><br><span class="line">+----+----------+------------+</span><br><span class="line"></span><br><span class="line">insert into t_user(id,username,email) values(1,&#x27;jack&#x27;,&#x27;jack@123.com&#x27;);</span><br><span class="line">#ERROR 1062 (23000): Duplicate entry &#x27;1&#x27; for key &#x27;PRIMARY&#x27;</span><br><span class="line"></span><br><span class="line">insert into t_user(username,email) values(&#x27;jack&#x27;,&#x27;jack@123.com&#x27;);</span><br><span class="line">#ERROR 1364 (HY000): Field &#x27;id&#x27; doesn&#x27;t have a default value</span><br><span class="line"></span><br><span class="line">根据以上的测试得出：id是主键，因为添加了主键约束，主键字段中的数据不能为NULL，也不能重复。</span><br><span class="line">主键的特点：不能为NULL，也不能重复。</span><br><span class="line"></span><br><span class="line">* 主键相关的术语？</span><br><span class="line">主键约束 : primary key</span><br><span class="line">主键字段 : id字段添加 primary key之后，id叫做主键字段</span><br><span class="line">主键值 : id字段中的每一个值都是主键值。</span><br><span class="line"></span><br><span class="line">* 主键有什么作用？</span><br><span class="line">- 表的设计三范式中有要求，第一范式就要求任何一张表都应该有主键。</span><br><span class="line">- 主键的作用：主键值是这行记录在这张表当中的唯一标识。（就像一个人的身份证号码一样。）</span><br><span class="line"></span><br><span class="line">* 主键的分类？</span><br><span class="line">根据主键字段的字段数量来划分：</span><br><span class="line">单一主键（推荐的，常用的。）</span><br><span class="line">复合主键(多个字段联合起来添加一个主键约束)（复合主键不建议使用，因为复合主键违背三范式。）</span><br><span class="line">根据主键性质来划分：</span><br><span class="line">自然主键：主键值最好就是一个和业务没有任何关系的自然数。（这种方式是推荐的）</span><br><span class="line">业务主键：主键值和系统的业务挂钩，例如：拿着银行卡的卡号做主键，拿着身份证号码作为主键。（不推荐用）</span><br><span class="line">#最好不要拿着和业务挂钩的字段作为主键。因为以后业务一旦发生改变的时候，主键值可能也需要随着发生变化，但有的时候没有办法变化，因为变化可能会导致主键值重复。</span><br><span class="line"></span><br><span class="line">* 一张表的主键约束只能有1个。（必须记住）</span><br><span class="line">* 使用表级约束方式定义主键：</span><br><span class="line">drop table if exists t_user;</span><br><span class="line">create table t_user(</span><br><span class="line">id int,</span><br><span class="line">username varchar(255),</span><br><span class="line">primary key(id)</span><br><span class="line">);</span><br><span class="line">insert into t_user(id,username) values(1,&#x27;zs&#x27;);</span><br><span class="line">insert into t_user(id,username) values(2,&#x27;ls&#x27;);</span><br><span class="line">insert into t_user(id,username) values(3,&#x27;ws&#x27;);</span><br><span class="line">insert into t_user(id,username) values(4,&#x27;cs&#x27;);</span><br><span class="line">select * from t_user;</span><br><span class="line"></span><br><span class="line">insert into t_user(id,username) values(4,&#x27;cx&#x27;);</span><br><span class="line">#ERROR 1062 (23000): Duplicate entry &#x27;4&#x27; for key &#x27;PRIMARY&#x27;</span><br><span class="line"></span><br><span class="line">以下内容是演示以下复合主键，不需要掌握：</span><br><span class="line">drop table if exists t_user;</span><br><span class="line">create table t_user(</span><br><span class="line">id int,</span><br><span class="line">username varchar(255),</span><br><span class="line">password varchar(255),</span><br><span class="line">primary key(id,username)</span><br><span class="line">);</span><br><span class="line">insert .......</span><br><span class="line"></span><br><span class="line">* mysql提供主键值自增：（非常重要。）</span><br><span class="line">drop table if exists t_user;</span><br><span class="line">create table t_user(</span><br><span class="line">id int primary key auto_increment, </span><br><span class="line">    #id字段自动维护一个自增的数字，从1开始，以1递增。</span><br><span class="line">username varchar(255)</span><br><span class="line">);</span><br><span class="line">insert into t_user(username) values(&#x27;a&#x27;);</span><br><span class="line">insert into t_user(username) values(&#x27;b&#x27;);</span><br><span class="line">insert into t_user(username) values(&#x27;c&#x27;);</span><br><span class="line">insert into t_user(username) values(&#x27;d&#x27;);</span><br><span class="line">insert into t_user(username) values(&#x27;e&#x27;);</span><br><span class="line">insert into t_user(username) values(&#x27;f&#x27;);</span><br><span class="line">select * from t_user;</span><br><span class="line">#提示:Oracle当中也提供了一个自增机制，叫做：序列（sequence）对象。</span><br><span class="line"></span><br><span class="line">5、外键约束</span><br><span class="line">* 关于外键约束的相关术语：</span><br><span class="line">外键约束: foreign key</span><br><span class="line">外键字段：添加有外键约束的字段</span><br><span class="line">外键值：外键字段中的每一个值。</span><br><span class="line"></span><br><span class="line">* 业务背景：</span><br><span class="line">请设计数据库表，用来维护学生和班级的信息？</span><br><span class="line">第一种方案：一张表存储所有数据</span><br><span class="line">no(pk)nameclassnoclassname</span><br><span class="line">------------------------------------------------</span><br><span class="line">1zs1101北京亦庄二中高三1班</span><br><span class="line">2zs2101北京亦庄二中高三1班</span><br><span class="line">3zs3102北京亦庄二中高三2班</span><br><span class="line">4zs4102北京亦庄二中高三2班</span><br><span class="line">5zs5102北京亦庄二中高三2班</span><br><span class="line">缺点：冗余。【不推荐】</span><br><span class="line"></span><br><span class="line">第二种方案：两张表（班级表和学生表）</span><br><span class="line">t_class 班级表</span><br><span class="line">cno(pk)cname</span><br><span class="line">------------------------</span><br><span class="line">101北京亦庄二中高三1班</span><br><span class="line">102北京亦庄二中高三2班</span><br><span class="line"></span><br><span class="line">t_student 学生表</span><br><span class="line">sno(pk)snameclassno(fk)#该字段添加外键约束</span><br><span class="line">--------------------------------------------------</span><br><span class="line">1zs1101</span><br><span class="line">2zs2101</span><br><span class="line">3zs3102</span><br><span class="line">4zs4102</span><br><span class="line">5zs5102</span><br><span class="line"></span><br><span class="line">* 将以上表的建表语句写出来：</span><br><span class="line">t_student中的classno字段引用t_class表中的cno字段，此时t_student表叫做子表。t_class表叫做父表。</span><br><span class="line">顺序要求：</span><br><span class="line">删除数据的时候，先删除子表，再删除父表。</span><br><span class="line">添加数据的时候，先添加父表，再添加子表。</span><br><span class="line">创建表的时候，先创建父表，再创建子表。</span><br><span class="line">删除表的时候，先删除子表，再删除父表。</span><br><span class="line">drop table if exists t_student;</span><br><span class="line">drop table if exists t_class;</span><br><span class="line">create table t_class(</span><br><span class="line">cno int,</span><br><span class="line">cname varchar(255),</span><br><span class="line">primary key(cno)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">create table t_student(</span><br><span class="line">sno int,</span><br><span class="line">sname varchar(255),</span><br><span class="line">classno int,</span><br><span class="line">primary key(sno),</span><br><span class="line">foreign key(classno) references t_class(cno)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">insert into t_class values(101,&#x27;xxxxxxx&#x27;);</span><br><span class="line">insert into t_class values(102,&#x27;yyyyyyy&#x27;);</span><br><span class="line"></span><br><span class="line">insert into t_student values(1,&#x27;zs1&#x27;,101);</span><br><span class="line">insert into t_student values(2,&#x27;zs2&#x27;,101);</span><br><span class="line">insert into t_student values(3,&#x27;zs3&#x27;,102);</span><br><span class="line">insert into t_student values(4,&#x27;zs4&#x27;,102);</span><br><span class="line">insert into t_student values(5,&#x27;zs5&#x27;,102);</span><br><span class="line">insert into t_student values(6,&#x27;zs6&#x27;,102);</span><br><span class="line">select * from t_class;</span><br><span class="line">select * from t_student;</span><br><span class="line"></span><br><span class="line">insert into t_student values(7,&#x27;lisi&#x27;,103);</span><br><span class="line">#ERROR 1452 (23000): Cannot add or update a child row: a foreign key constraint fails (`bjpowernode`.INT `t_student_ibfk_1` FOREIGN KEY (`classno`) REFERENCES `t_class` (`cno`))</span><br><span class="line"></span><br><span class="line">* 外键值可以为NULL</span><br><span class="line"></span><br><span class="line">* 外键字段引用其他表的某个字段的时候，被引用的字段必须是主键吗？</span><br><span class="line">注意：被引用的字段不一定是主键，但至少具有unique约束。一般情况下都是引用主键</span><br></pre></td></tr></table></figure><h5 id="4、删除表"><a href="#4、删除表" class="headerlink" title="4、删除表"></a>4、删除表</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">drop table 表名; #这个通用。</span><br><span class="line">drop table if exists 表名; #oracle不支持这种写法。</span><br></pre></td></tr></table></figure><h4 id="5-3、数据操作语言（DML）"><a href="#5-3、数据操作语言（DML）" class="headerlink" title="5.3、数据操作语言（DML）"></a>5.3、数据操作语言（DML）</h4><h5 id="1、insert语句插入数据"><a href="#1、insert语句插入数据" class="headerlink" title="1、insert语句插入数据"></a>1、insert语句插入数据</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br></pre></td><td class="code"><pre><span class="line">语法格式：</span><br><span class="line">insert into 表名(字段名1,字段名2,字段名3,....) values(值1,值2,值3,....)</span><br><span class="line">要求：字段的数量和值的数量相同，并且数据类型要对应相同。</span><br><span class="line">insert into t_student(no,name,sex,classno,birth) values(1,&#x27;zhangsan&#x27;,&#x27;1&#x27;,&#x27;gaosan1ban&#x27;);</span><br><span class="line">#ERROR 1136 (21S01): Column count doesn&#x27;t match value count at row 1</span><br><span class="line"></span><br><span class="line">insert into t_student(no,name,sex,classno,birth) values(1,&#x27;zhangsan&#x27;,&#x27;1&#x27;,&#x27;gaosan1ban&#x27;, &#x27;1950-10-12&#x27;);</span><br><span class="line">select * from t_student;</span><br><span class="line">    +------+----------+------+------------+------------+</span><br><span class="line">    | no   | name     | sex  | classno    | birth      |</span><br><span class="line">    +------+----------+------+------------+------------+</span><br><span class="line">    |    1 | zhangsan | 1    | gaosan1ban | 1950-10-12 |</span><br><span class="line">    +------+----------+------+------------+------------+</span><br><span class="line"></span><br><span class="line">insert into t_student(name,sex,classno,birth,no) values(&#x27;lisi&#x27;,&#x27;1&#x27;,&#x27;gaosan1ban&#x27;, &#x27;1950-10-12&#x27;,2);</span><br><span class="line">select * from t_student;</span><br><span class="line">    +------+----------+------+------------+------------+</span><br><span class="line">    | no   | name     | sex  | classno    | birth      |</span><br><span class="line">    +------+----------+------+------------+------------+</span><br><span class="line">    |    1 | zhangsan | 1    | gaosan1ban | 1950-10-12 |</span><br><span class="line">    |    2 | lisi     | 1    | gaosan1ban | 1950-10-12 |</span><br><span class="line">    +------+----------+------+------------+------------+</span><br><span class="line"></span><br><span class="line">insert into t_student(name) values(&#x27;wangwu&#x27;); #除name字段之外，剩下的所有字段自动插入NULL。</span><br><span class="line">select * from t_student;</span><br><span class="line">+------+----------+------+------------+------------+</span><br><span class="line">| no   | name     | sex  | classno    | birth      |</span><br><span class="line">+------+----------+------+------------+------------+</span><br><span class="line">|    1 | zhangsan | 1    | gaosan1ban | 1950-10-12 |</span><br><span class="line">|    2 | lisi     | 1    | gaosan1ban | 1950-10-12 |</span><br><span class="line">| NULL | wangwu   | NULL | NULL       | NULL       |</span><br><span class="line">+------+----------+------+------------+------------+</span><br><span class="line"></span><br><span class="line">insert into t_student(no) values(3); </span><br><span class="line">select * from t_student;</span><br><span class="line">+------+----------+------+------------+------------+</span><br><span class="line">| no   | name     | sex  | classno    | birth      |</span><br><span class="line">+------+----------+------+------------+------------+</span><br><span class="line">|    1 | zhangsan | 1    | gaosan1ban | 1950-10-12 |</span><br><span class="line">|    2 | lisi     | 1    | gaosan1ban | 1950-10-12 |</span><br><span class="line">| NULL | wangwu   | NULL | NULL       | NULL       |</span><br><span class="line">|    3 | NULL     | NULL | NULL       | NULL       |</span><br><span class="line">+------+----------+------+------------+------------+</span><br><span class="line"></span><br><span class="line">drop table if exists t_student; #当这个表存在的话删除。</span><br><span class="line">create table t_student(</span><br><span class="line">no bigint,</span><br><span class="line">name varchar(255),</span><br><span class="line">sex char(1) default 1,#不写default默认值是null</span><br><span class="line">classno varchar(255),</span><br><span class="line">birth char(10)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">insert into t_student(name) values(&#x27;zhangsan&#x27;);</span><br><span class="line">select * from t_student;</span><br><span class="line">    +------+----------+------+---------+-------+</span><br><span class="line">    | no   | name     | sex  | classno | birth |</span><br><span class="line">    +------+----------+------+---------+-------+</span><br><span class="line">    | NULL | zhangsan | 1    | NULL    | NULL  |</span><br><span class="line">    +------+----------+------+---------+-------+</span><br><span class="line"></span><br><span class="line">需要注意的地方：</span><br><span class="line">当一条insert语句执行成功之后，表格当中必然会多一行记录。</span><br><span class="line">即使多的这一行记录当中某些字段是NULL，后期也没有办法再执行</span><br><span class="line">insert语句插入数据后，只能使用update进行更新。</span><br><span class="line"></span><br><span class="line">#字段可以省略不写，但是后面的value对数量和顺序都有要求。</span><br><span class="line">insert into t_student values(1,&#x27;jack&#x27;,&#x27;0&#x27;,&#x27;gaosan2ban&#x27;,&#x27;1986-10-23&#x27;);</span><br><span class="line">select * from t_student;</span><br><span class="line">    +------+----------+------+------------+------------+</span><br><span class="line">    | no   | name     | sex  | classno    | birth      |</span><br><span class="line">    +------+----------+------+------------+------------+</span><br><span class="line">    | NULL | zhangsan | 1    | NULL       | NULL       |</span><br><span class="line">    |    1 | jack     | 0    | gaosan2ban | 1986-10-23 |</span><br><span class="line">    +------+----------+------+------------+------------+</span><br><span class="line"></span><br><span class="line">insert into t_student values(1,&#x27;jack&#x27;,&#x27;0&#x27;,&#x27;gaosan2ban&#x27;);</span><br><span class="line">#ERROR 1136 (21S01): Column count doesn&#x27;t match value count at row 1</span><br><span class="line"></span><br><span class="line"># 一次插入多行数据</span><br><span class="line">insert into t_student</span><br><span class="line">(no,name,sex,classno,birth) </span><br><span class="line">values</span><br><span class="line">(3,&#x27;rose&#x27;,&#x27;1&#x27;,&#x27;gaosi2ban&#x27;,&#x27;1952-12-14&#x27;),(4,&#x27;laotie&#x27;,&#x27;1&#x27;,&#x27;gaosi2ban&#x27;,&#x27;1955-12-14&#x27;);</span><br><span class="line"></span><br><span class="line">select * from t_student;</span><br><span class="line">    +------+----------+------+------------+------------+</span><br><span class="line">    | no   | name     | sex  | classno    | birth      |</span><br><span class="line">    +------+----------+------+------------+------------+</span><br><span class="line">    | NULL | zhangsan | 1    | NULL       | NULL       |</span><br><span class="line">    |    1 | jack     | 0    | gaosan2ban | 1986-10-23 |</span><br><span class="line">    |    3 | rose     | 1    | gaosi2ban  | 1952-12-14 |</span><br><span class="line">    |    4 | laotie   | 1    | gaosi2ban  | 1955-12-14 |</span><br><span class="line">    +------+----------+------+------------+------------+</span><br></pre></td></tr></table></figure><h5 id="2、表的复制"><a href="#2、表的复制" class="headerlink" title="2、表的复制"></a>2、表的复制</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">语法：</span><br><span class="line">create table 表名 as select语句;</span><br><span class="line">将查询结果当做表创建出来。</span><br><span class="line">create table emp2 as select empno,ename from emp;</span><br></pre></td></tr></table></figure><h5 id="3、将查询结果插入到一张表中"><a href="#3、将查询结果插入到一张表中" class="headerlink" title="3、将查询结果插入到一张表中"></a>3、将查询结果插入到一张表中</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">create table dept1 as select * from dept;</span><br><span class="line">insert into dept1 select * from dept;#将查询结果插入到一张表中</span><br><span class="line">select * from dept1;</span><br><span class="line">+--------+------------+----------+</span><br><span class="line">| DEPTNO | DNAME      | LOC      |</span><br><span class="line">+--------+------------+----------+</span><br><span class="line">|     10 | ACCOUNTING | NEW YORK |</span><br><span class="line">|     20 | RESEARCH   | DALLAS   |</span><br><span class="line">|     30 | SALES      | CHICAGO  |</span><br><span class="line">|     40 | OPERATIONS | BOSTON   |</span><br><span class="line">|     10 | ACCOUNTING | NEW YORK |</span><br><span class="line">|     20 | RESEARCH   | DALLAS   |</span><br><span class="line">|     30 | SALES      | CHICAGO  |</span><br><span class="line">|     40 | OPERATIONS | BOSTON   |</span><br><span class="line">+--------+------------+----------+</span><br></pre></td></tr></table></figure><h5 id="4、修改数据：update"><a href="#4、修改数据：update" class="headerlink" title="4、修改数据：update"></a>4、修改数据：update</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">语法格式：</span><br><span class="line">update 表名 set 字段名1=值1,字段名2=值2... where 条件;</span><br><span class="line">注意：没有条件整张表数据全部更新。</span><br><span class="line"></span><br><span class="line">案例：将部门10的LOC修改为SHANGHAI，将部门名称修改为RENSHIBU</span><br><span class="line">update dept1 set loc = &#x27;SHANGHAI&#x27;, dname = &#x27;RENSHIBU&#x27; where deptno = 10;</span><br><span class="line">select * from dept1;</span><br><span class="line">+--------+------------+----------+</span><br><span class="line">| DEPTNO | DNAME      | LOC      |</span><br><span class="line">+--------+------------+----------+</span><br><span class="line">|     10 | RENSHIBU   | SHANGHAI |</span><br><span class="line">|     20 | RESEARCH   | DALLAS   |</span><br><span class="line">|     30 | SALES      | CHICAGO  |</span><br><span class="line">|     40 | OPERATIONS | BOSTON   |</span><br><span class="line">|     10 | RENSHIBU   | SHANGHAI |</span><br><span class="line">|     20 | RESEARCH   | DALLAS   |</span><br><span class="line">|     30 | SALES      | CHICAGO  |</span><br><span class="line">|     40 | OPERATIONS | BOSTON   |</span><br><span class="line">+--------+------------+----------+</span><br><span class="line"></span><br><span class="line">更新所有记录</span><br><span class="line">update dept1 set loc = &#x27;x&#x27;, dname = &#x27;y&#x27;;#没有加where条件修改所有记录</span><br><span class="line">select * from dept1;</span><br><span class="line">+--------+-------+------+</span><br><span class="line">| DEPTNO | DNAME | LOC  |</span><br><span class="line">+--------+-------+------+</span><br><span class="line">|     10 | y     | x    |</span><br><span class="line">|     20 | y     | x    |</span><br><span class="line">|     30 | y     | x    |</span><br><span class="line">|     40 | y     | x    |</span><br><span class="line">|     10 | y     | x    |</span><br><span class="line">|     20 | y     | x    |</span><br><span class="line">|     30 | y     | x    |</span><br><span class="line">|     40 | y     | x    |</span><br><span class="line">+--------+-------+------+</span><br></pre></td></tr></table></figure><h5 id="5、删除数据"><a href="#5、删除数据" class="headerlink" title="5、删除数据"></a>5、删除数据</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">语法格式：</span><br><span class="line">delete from 表名 where 条件;</span><br><span class="line">注意：没有条件全部删除。</span><br><span class="line"></span><br><span class="line">删除10部门数据？</span><br><span class="line">delete from dept1 where deptno = 10;</span><br><span class="line">删除所有记录？</span><br><span class="line">delete from dept1;</span><br><span class="line">#delete 删除数据的时候速度慢，原因是没有真正的释放存储空间，可以回滚</span><br><span class="line">怎么删除大表中的数据？（重点）</span><br><span class="line">truncate table 表名; #表被截断，不可回滚。永久丢失。</span><br></pre></td></tr></table></figure><h3 id="6、存储引擎（了解内容）"><a href="#6、存储引擎（了解内容）" class="headerlink" title="6、存储引擎（了解内容）"></a>6、存储引擎（了解内容）</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line">6.1、完整的建表语句</span><br><span class="line">CREATE TABLE `t_x` (</span><br><span class="line">  `id` int(11) DEFAULT NULL</span><br><span class="line">) ENGINE=InnoDB DEFAULT CHARSET = utf8;</span><br><span class="line">注意：在MySQL当中，凡是标识符是可以使用飘号`括起来的。最好别用，不通用。</span><br><span class="line">建表的时候可以指定存储引擎，也可以指定字符集。</span><br><span class="line">mysql默认使用的存储引擎是InnoDB方式。</span><br><span class="line">默认采用的字符集是UTF8</span><br><span class="line"></span><br><span class="line">6.2、什么是存储引擎呢？</span><br><span class="line">存储引擎这个名字只有在mysql中存在。（Oracle中有对应的机制，但是不叫做存储引擎。Oracle中没有特殊的名字，就是“表的存储方式”）</span><br><span class="line">mysql支持很多存储引擎，每一个存储引擎都对应了一种不同的存储方式。</span><br><span class="line">每一个存储引擎都有自己的优缺点，需要在合适的时机选择合适的存储引擎。</span><br><span class="line"></span><br><span class="line">6.3、查看当前mysql支持的存储引擎？</span><br><span class="line">show engines \G</span><br><span class="line">#5.5.62版本支持9个存储引擎</span><br><span class="line">6.4、常见的存储引擎？</span><br><span class="line"></span><br><span class="line">Engine: MyISAM</span><br><span class="line">  Support: YES</span><br><span class="line">  Comment: MyISAM storage engine</span><br><span class="line">Transactions: NO</span><br><span class="line"> XA: NO</span><br><span class="line">  Savepoints: NO</span><br><span class="line"></span><br><span class="line">MyISAM这种存储引擎不支持事务。</span><br><span class="line">MyISAM是mysql最常用的存储引擎，但是这种引擎不是默认的。</span><br><span class="line">MyISAM采用三个文件组织一张表：</span><br><span class="line">xxx.frm（存储格式（表结构）的文件）</span><br><span class="line">xxx.MYD（存储表中数据的文件）</span><br><span class="line">xxx.MYI（存储表中索引的文件）</span><br><span class="line">优点：可被压缩，节省存储空间。并且可以转换为只读表，提高检索效率。</span><br><span class="line">缺点：不支持事务。</span><br><span class="line">-----------------------------------------------------------------------------</span><br><span class="line">  Engine: InnoDB</span><br><span class="line">  Support: DEFAULT</span><br><span class="line">  Comment: Supports transactions, row-level locking, and foreign keys</span><br><span class="line">Transactions: YES</span><br><span class="line"> XA: YES</span><br><span class="line">  Savepoints: YES</span><br><span class="line"></span><br><span class="line">优点：支持事务、行级锁、外键等。这种存储引擎数据的安全得到保障。</span><br><span class="line"></span><br><span class="line">表的结构存储在xxx.frm文件中</span><br><span class="line">数据存储在 tablespace这样的表空间中（逻辑概念），无法被压缩，无法转换成只读。</span><br><span class="line">这种 InnoDB存储引擎在MySQL数据库崩溃之后提供自动恢复机制。</span><br><span class="line">InnoDB支持级联删除和级联更新。</span><br><span class="line">-------------------------------------------------------------------------------------</span><br><span class="line">Engine: MEMORY</span><br><span class="line">  Support: YES</span><br><span class="line">  Comment: Hash based, stored in memory, useful for temporary tables</span><br><span class="line">Transactions: NO</span><br><span class="line"> XA: NO</span><br><span class="line">  Savepoints: NO</span><br><span class="line"></span><br><span class="line">缺点：不支持事务。数据容易丢失。因为所有数据和索引都是存储在内存当中的。</span><br><span class="line">优点：查询速度最快。</span><br><span class="line">以前叫做HEPA引擎。</span><br></pre></td></tr></table></figure><h4 id="6-1、面试题"><a href="#6-1、面试题" class="headerlink" title="6.1、面试题"></a>6.1、面试题</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">有 3 个表 S(学生表)，C（课程表），SC（学生选课表）</span><br><span class="line">S（SNO，SNAME）代表（学号，姓名）</span><br><span class="line">C（CNO，CNAME，CTEACHER）代表（课号，课名，教师）</span><br><span class="line">SC（SNO，CNO，SCGRADE）代表（学号，课号，成绩）</span><br><span class="line">问题：</span><br><span class="line">1，找出没选过“黎明”老师的所有学生姓名。</span><br><span class="line">select xx from sc </span><br><span class="line">2，列出 2 门以上（含2 门）不及格学生姓名及平均成绩。</span><br><span class="line">3，即学过 1 号课程又学过 2 号课所有学生的姓名。</span><br></pre></td></tr></table></figure><h3 id="7、事务（Transaction）"><a href="#7、事务（Transaction）" class="headerlink" title="7、事务（Transaction）"></a>7、事务（Transaction）</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br></pre></td><td class="code"><pre><span class="line">7.1、什么是事务？</span><br><span class="line">一个事务是一个完整的业务逻辑单元，不可再分。</span><br><span class="line"></span><br><span class="line">比如：银行账户转账，从A账户向B账户转账10000.需要执行两条update语句：</span><br><span class="line">update t_act set balance = balance - 10000 where actno = &#x27;act-001&#x27;;</span><br><span class="line">update t_act set balance = balance + 10000 where actno = &#x27;act-002&#x27;;</span><br><span class="line"></span><br><span class="line">以上两条DML语句必须同时成功，或者同时失败，不允许出现一条成功，一条失败。</span><br><span class="line">要想保证以上的两条DML语句同时成功或者同时失败，那么就需要使用数据库的“事务机制”。</span><br><span class="line"></span><br><span class="line">7.2、和事务相关的语句只有：DML语句。（ insert delete update）*****</span><br><span class="line">为什么？因为它们这三个语句都是和数据库表当中的“数据”相关的。</span><br><span class="line">事务的存在是为了保证数据的完整性，安全性。</span><br><span class="line"></span><br><span class="line">7.3、假设所有的业务都能使用1条DML语句搞定，还需要事务机制吗？</span><br><span class="line">不需要事务。</span><br><span class="line">但实际情况不是这样的，通常一个“事儿（事务【业务】）”需要多条DML语句共同联合完成。</span><br><span class="line"></span><br><span class="line">7.4、事务的特性？</span><br><span class="line">事务包括四大特性：ACID</span><br><span class="line">A: 原子性：事务是最小的工作单元，不可再分。</span><br><span class="line">C: 一致性：事务必须保证多条DML语句同时成功或者同时失败。</span><br><span class="line">I：隔离性：事务A与事务B之间具有隔离。</span><br><span class="line">D：持久性：持久性说的是最终数据必须持久化到硬盘文件中，事务才算成功的结束。</span><br><span class="line"></span><br><span class="line">7.5、关于事务之间的隔离性</span><br><span class="line">事务隔离性存在隔离级别，理论上隔离级别包括4个：</span><br><span class="line">第一级别：读未提交（ read uncommitted）</span><br><span class="line">对方事务还没有提交，我们当前事务可以读取到对方未提交的数据。</span><br><span class="line">读未提交存在脏读（Dirty Read）现象：表示读到了脏的数据。</span><br><span class="line">第二级别：读已提交（ read committed）</span><br><span class="line">对方事务提交之后的数据我方可以读取到。</span><br><span class="line">这种隔离级别解决了: 脏读现象没有了。</span><br><span class="line">读已提交存在的问题是：不可重复读。</span><br><span class="line">第三级别：可重复读（ repeatable read）</span><br><span class="line">这种隔离级别解决了：不可重复读问题。</span><br><span class="line">这种隔离级别存在的问题是：读取到的数据是幻象。</span><br><span class="line">第四级别：序列化读/串行化读（ serializable） </span><br><span class="line">解决了所有问题。</span><br><span class="line">效率低。需要事务排队。</span><br><span class="line"></span><br><span class="line">oracle数据库默认的隔离级别是：读已提交。</span><br><span class="line">mysql数据库默认的隔离级别是：可重复读。</span><br><span class="line"></span><br><span class="line">7.6、演示事务</span><br><span class="line">* mysql事务默认情况下是自动提交的。</span><br><span class="line">（什么是自动提交？只要执行任意一条DML语句则提交一次。）怎么关闭自动提交？ start transaction;</span><br><span class="line"></span><br><span class="line">* 准备表：</span><br><span class="line">drop table if exists t_user;</span><br><span class="line">create table t_user(</span><br><span class="line">id int primary key auto_increment,</span><br><span class="line">username varchar(255)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">* 演示：mysql中的事务是支持自动提交的，只要执行一条DML，则提交一次。</span><br><span class="line">mysql&gt; insert into t_user(username) values(&#x27;zs&#x27;);</span><br><span class="line">Query OK, 1 row affected (0.03 sec)</span><br><span class="line">#下面展示的是mysql是自动提交的，执行完一条insert语句之后自动提交，回滚回不去</span><br><span class="line">mysql&gt; select * from t_user;</span><br><span class="line">+----+----------+</span><br><span class="line">| id | username |</span><br><span class="line">+----+----------+</span><br><span class="line">|  1 | zs       |</span><br><span class="line">+----+----------+</span><br><span class="line">1 row in set (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; rollback;</span><br><span class="line">Query OK, 0 rows affected (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from t_user;</span><br><span class="line">+----+----------+</span><br><span class="line">| id | username |</span><br><span class="line">+----+----------+</span><br><span class="line">|  1 | zs       |</span><br><span class="line">+----+----------+</span><br><span class="line">1 row in set (0.00 sec)</span><br><span class="line">#下面演示的是关闭mysql的自动提交机制</span><br><span class="line">#使用 start transaction 表示开始一个事务，一旦使用rollback或者commit则该事务结束。</span><br><span class="line">* 演示：使用 start transaction;关闭自动提交机制。</span><br><span class="line">mysql&gt; start transaction;</span><br><span class="line">Query OK, 0 rows affected (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; insert into t_user(username) values(&#x27;lisi&#x27;);</span><br><span class="line">Query OK, 1 row affected (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from t_user;</span><br><span class="line">+----+----------+</span><br><span class="line">| id | username |</span><br><span class="line">+----+----------+</span><br><span class="line">|  1 | zs       |</span><br><span class="line">|  2 | lisi     |</span><br><span class="line">+----+----------+</span><br><span class="line">2 rows in set (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; insert into t_user(username) values(&#x27;wangwu&#x27;);</span><br><span class="line">Query OK, 1 row affected (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from t_user;</span><br><span class="line">+----+----------+</span><br><span class="line">| id | username |</span><br><span class="line">+----+----------+</span><br><span class="line">|  1 | zs       |</span><br><span class="line">|  2 | lisi     |</span><br><span class="line">|  3 | wangwu   |</span><br><span class="line">+----+----------+</span><br><span class="line">3 rows in set (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; rollback;</span><br><span class="line">Query OK, 0 rows affected (0.02 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from t_user;</span><br><span class="line">+----+----------+</span><br><span class="line">| id | username |</span><br><span class="line">+----+----------+</span><br><span class="line">|  1 | zs       |</span><br><span class="line">+----+----------+</span><br><span class="line">1 row in set (0.00 sec)</span><br><span class="line">#上面演示的是回滚（rollback）下面演示提交（commit）</span><br><span class="line">-------------------------------------------------------------------</span><br><span class="line">mysql&gt; start transaction;</span><br><span class="line">Query OK, 0 rows affected (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; insert into t_user(username) values(&#x27;wangwu&#x27;);</span><br><span class="line">Query OK, 1 row affected (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; insert into t_user(username) values(&#x27;rose&#x27;);</span><br><span class="line">Query OK, 1 row affected (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; insert into t_user(username) values(&#x27;jack&#x27;);</span><br><span class="line">Query OK, 1 row affected (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from t_user;</span><br><span class="line">+----+----------+</span><br><span class="line">| id | username |</span><br><span class="line">+----+----------+</span><br><span class="line">|  1 | zs       |</span><br><span class="line">|  4 | wangwu   |</span><br><span class="line">|  5 | rose     |</span><br><span class="line">|  6 | jack     |</span><br><span class="line">+----+----------+</span><br><span class="line">4 rows in set (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; commit;</span><br><span class="line">Query OK, 0 rows affected (0.04 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from t_user;</span><br><span class="line">+----+----------+</span><br><span class="line">| id | username |</span><br><span class="line">+----+----------+</span><br><span class="line">|  1 | zs       |</span><br><span class="line">|  4 | wangwu   |</span><br><span class="line">|  5 | rose     |</span><br><span class="line">|  6 | jack     |</span><br><span class="line">+----+----------+</span><br><span class="line">4 rows in set (0.00 sec)</span><br><span class="line">#此时已经提交rollback只能回滚到上次的提交点</span><br><span class="line">mysql&gt; rollback;</span><br><span class="line">Query OK, 0 rows affected (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from t_user;</span><br><span class="line">+----+----------+</span><br><span class="line">| id | username |</span><br><span class="line">+----+----------+</span><br><span class="line">|  1 | zs       |</span><br><span class="line">|  4 | wangwu   |</span><br><span class="line">|  5 | rose     |</span><br><span class="line">|  6 | jack     |</span><br><span class="line">+----+----------+</span><br><span class="line">4 rows in set (0.00 sec)</span><br><span class="line"></span><br><span class="line">#打开两个dos窗口演示事物隔离级别的效果</span><br><span class="line">设置事物的全局隔离级别：</span><br><span class="line">set global transaction isolation level read uncommited;</span><br><span class="line">查看事务的全局隔离级别：</span><br><span class="line">select @@global.tx_isolation;</span><br><span class="line"></span><br><span class="line">* 演示两个事务，假如隔离级别</span><br><span class="line">演示第1级别：读未提交</span><br><span class="line">set global transaction isolation level read uncommitted;</span><br><span class="line">演示第2级别：读已提交</span><br><span class="line">set global transaction isolation level read committed;</span><br><span class="line">演示第3级别：可重复读</span><br><span class="line">set global transaction isolation level repeatable read;</span><br><span class="line">演示第4级别：可重复读</span><br><span class="line">set global transaction isolation level serializable;</span><br><span class="line"></span><br><span class="line">* mysql远程登录：mysql -h192.168.151.18 -uroot -p444</span><br></pre></td></tr></table></figure><h3 id="8、索引"><a href="#8、索引" class="headerlink" title="8、索引"></a>8、索引</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line">8.1、什么是索引？有什么用？</span><br><span class="line">索引就相当于一本书的目录，通过目录可以快速的找到对应的资源。</span><br><span class="line">在数据库方面，查询一张表的时候有两种检索方式：</span><br><span class="line">第一种方式：全表扫描</span><br><span class="line">第二种方式：根据索引检索（效率很高）</span><br><span class="line"></span><br><span class="line">索引为什么可以提高检索效率呢？</span><br><span class="line">其实最根本的原理是缩小了扫描的范围。</span><br><span class="line"></span><br><span class="line">索引虽然可以提高检索效率，但是不能随意的添加索引，因为索引也是数据库当中的对象，也需要数据库不断的维护。是有维护成本的。比如，表中的数据经常被修改，这样就不适合添加索引，因为数据一旦修改，索引需要重新排序，进行维护。</span><br><span class="line"></span><br><span class="line">添加索引是给某一个字段，或者说某些字段添加索引。</span><br><span class="line">select ename,sal from emp where ename = &#x27;SMITH&#x27;;</span><br><span class="line">当ename字段上没有添加索引的时候，以上sql语句会进行全表扫描，扫描ename字段中所有的值。</span><br><span class="line">当ename字段上添加索引的时候，以上sql语句会根据索引扫描，快速定位。</span><br><span class="line"></span><br><span class="line">8.2、怎么创建索引对象？怎么删除索引对象？</span><br><span class="line">创建索引对象：</span><br><span class="line">create index 索引名称 on 表名(字段名);</span><br><span class="line">删除索引对象：</span><br><span class="line">drop index 索引名称 on 表名;</span><br><span class="line"></span><br><span class="line">8.3、什么时候考虑给字段添加索引？（满足什么条件）</span><br><span class="line">* 数据量庞大。（根据客户的需求，根据线上的环境）</span><br><span class="line">* 该字段很少的DML操作。（因为字段进行修改操作，索引也需要维护）</span><br><span class="line">* 该字段经常出现在 where子句中。（经常根据哪个字段查询）</span><br><span class="line"></span><br><span class="line">8.4、注意：主键和具有 unique约束的字段自动会添加索引。</span><br><span class="line">根据主键查询效率较高。尽量根据主键检索。</span><br><span class="line"></span><br><span class="line">8.5、查看sql语句的执行计划：</span><br><span class="line">mysql&gt; explain select ename,sal from emp where sal = 5000;</span><br><span class="line">给薪资sal字段添加索引：</span><br><span class="line">create index emp_sal_index on emp(sal);</span><br><span class="line">mysql&gt; explain select ename,sal from emp where sal = 5000;</span><br><span class="line">#加了索引的执行计划和不加索引的执行计划有区别</span><br><span class="line">8.6、索引底层采用的数据结构是：B + Tree</span><br><span class="line"></span><br><span class="line">8.7、索引的实现原理？</span><br><span class="line">通过B Tree缩小扫描范围，底层索引进行了排序，分区，索引会携带数据在表中的“物理地址”，</span><br><span class="line">最终通过索引检索到数据之后，获取到关联的物理地址，通过物理地址定位表中的数据，效率</span><br><span class="line">是最高的。</span><br><span class="line">select ename from emp where ename = &#x27;SMITH&#x27;;</span><br><span class="line">通过索引转换为：</span><br><span class="line">select ename from emp where 物理地址 = 0x3;</span><br><span class="line"></span><br><span class="line">8.8、索引的分类？</span><br><span class="line">单一索引：给单个字段添加索引</span><br><span class="line">复合索引: 给多个字段联合起来添加1个索引</span><br><span class="line">主键索引：主键上会自动添加索引</span><br><span class="line">唯一索引：有unique约束的字段上会自动添加索引</span><br><span class="line">....</span><br><span class="line"></span><br><span class="line">8.9、索引什么时候失效？</span><br><span class="line">select ename from emp where ename like &#x27;%A%&#x27;;</span><br><span class="line">模糊查询的时候，第一个通配符使用的是%，这个时候索引是失效的。</span><br></pre></td></tr></table></figure><h3 id="9、视图-view"><a href="#9、视图-view" class="headerlink" title="9、视图(view)"></a>9、视图(view)</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">9.1、什么是视图？</span><br><span class="line">站在不同的角度去看到数据。（同一张表的数据，通过不同的角度去看待）。</span><br><span class="line"></span><br><span class="line">9.2、怎么创建视图？怎么删除视图？</span><br><span class="line">create view myview as select empno,ename from emp;</span><br><span class="line">drop view myview;</span><br><span class="line">注意：只有DQL语句才能以视图对象的方式创建出来。</span><br><span class="line"></span><br><span class="line">9.3、对视图进行增删改查，会影响到原表数据。（通过视图影响原表数据的，不是直接操作的原表）</span><br><span class="line">可以对视图进行CRUD操作。</span><br><span class="line"></span><br><span class="line">9.4、面向视图操作？</span><br><span class="line">mysql&gt; select * from myview;</span><br><span class="line">+-------+--------+</span><br><span class="line">| empno | ename  |</span><br><span class="line">+-------+--------+</span><br><span class="line">|  7369 | SMITH  |</span><br><span class="line">|  7499 | ALLEN  |</span><br><span class="line">|  7521 | WARD   |</span><br><span class="line">|  7566 | JONES  |</span><br><span class="line">|  7654 | MARTIN |</span><br><span class="line">|  7698 | BLAKE  |</span><br><span class="line">|  7782 | CLARK  |</span><br><span class="line">|  7788 | SCOTT  |</span><br><span class="line">|  7839 | KING   |</span><br><span class="line">|  7844 | TURNER |</span><br><span class="line">|  7876 | ADAMS  |</span><br><span class="line">|  7900 | JAMES  |</span><br><span class="line">|  7902 | FORD   |</span><br><span class="line">|  7934 | MILLER |</span><br><span class="line">+-------+--------+</span><br><span class="line">create table emp_bak as select * from emp;</span><br><span class="line">create view myview1 as select empno,ename,sal from emp_bak;</span><br><span class="line">update myview1 set ename=&#x27;hehe&#x27;,sal=1 where empno = 7369; # 通过视图修改原表数据。</span><br><span class="line">delete from myview1 where empno = 7369; # 通过视图删除原表数据。</span><br><span class="line"></span><br><span class="line">9.5、视图的作用？</span><br><span class="line">视图可以隐藏表的实现细节。保密级别较高的系统，数据库只对外提供相关的视图，java程序员只对视图对象进行CRUD。</span><br></pre></td></tr></table></figure><h3 id="10、DBA命令（DCL）"><a href="#10、DBA命令（DCL）" class="headerlink" title="10、DBA命令（DCL）"></a>10、DBA命令（DCL）</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">10.1、将数据库当中的数据导出</span><br><span class="line">在windows的dos命令窗口中执行：（导出整个库）#不是登录到mysql上执行</span><br><span class="line">mysqldump bjpowernode&gt;D:\bjpowernode.sql -uroot -p333</span><br><span class="line"></span><br><span class="line">在windows的dos命令窗口中执行：（导出指定数据库当中的指定表）#不是登录到mysql上执行</span><br><span class="line">mysqldump bjpowernode emp&gt;D:\bjpowernode.sql -uroot –p123</span><br><span class="line">#导出的是sql脚本，可以将这个sql脚本执行创建一个一模一样的表</span><br><span class="line">10.2、导入数据</span><br><span class="line">create database bjpowernode;</span><br><span class="line">use bjpowernode;</span><br><span class="line">source D:\bjpowernode.sql</span><br></pre></td></tr></table></figure><h3 id="11、数据库设计三范式（重点内容，面试经常问）"><a href="#11、数据库设计三范式（重点内容，面试经常问）" class="headerlink" title="11、数据库设计三范式（重点内容，面试经常问）"></a>11、数据库设计三范式（重点内容，面试经常问）</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line">11.1、什么是设计范式？</span><br><span class="line">设计表的依据。按照这个三范式设计的表不会出现数据冗余。</span><br><span class="line"></span><br><span class="line">11.2、三范式都是哪些？</span><br><span class="line"></span><br><span class="line">第一范式：任何一张表都应该有主键，并且每一个字段原子性不可再分。</span><br><span class="line">第二范式：建立在第一范式的基础之上，所有非主键字段完全依赖主键，不能产生部分依赖。</span><br><span class="line">********处理多对多情况？使用三张表，第三张表示关系表，关系表中有两个外键。********</span><br><span class="line">t_student学生表</span><br><span class="line">sno(pk)sname</span><br><span class="line">-------------------</span><br><span class="line">1张三</span><br><span class="line">2李四</span><br><span class="line">3王五</span><br><span class="line"></span><br><span class="line">t_teacher 讲师表</span><br><span class="line">tno(pk)tname</span><br><span class="line">---------------------</span><br><span class="line">1王老师</span><br><span class="line">2张老师</span><br><span class="line">3李老师</span><br><span class="line"></span><br><span class="line">t_student_teacher_relation 学生讲师关系表</span><br><span class="line">id(pk)sno(fk)tno(fk)</span><br><span class="line">----------------------------------</span><br><span class="line">113</span><br><span class="line">211</span><br><span class="line">322</span><br><span class="line">423</span><br><span class="line">531</span><br><span class="line">633</span><br><span class="line"></span><br><span class="line">第三范式：建立在第二范式的基础之上，所有非主键字段直接依赖主键，不能产生传递依赖。</span><br><span class="line">一对多？两张表，（一对多中）多对应的那个表加外键。</span><br><span class="line">#下面班级和学生是一对多的关系，所以学生表对应的是多，所以学生表加外键</span><br><span class="line">班级t_class</span><br><span class="line">cno(pk)cname</span><br><span class="line">--------------------------</span><br><span class="line">1班级1</span><br><span class="line">2班级2</span><br><span class="line"></span><br><span class="line">学生t_student</span><br><span class="line">sno(pk)snameclassno(fk)</span><br><span class="line">---------------------------------------------</span><br><span class="line">101张11</span><br><span class="line">102张21</span><br><span class="line">103张32</span><br><span class="line">104张42</span><br><span class="line">105张52</span><br><span class="line"></span><br><span class="line">提醒：在实际的开发中，以满足客户的需求为主，有的时候会拿冗余换执行速度。</span><br><span class="line"></span><br><span class="line">11.3、一对一怎么设计？</span><br><span class="line"></span><br><span class="line">一对一设计有两种方案：1.主键共享(pk + fk)</span><br><span class="line">t_user_login  用户登录表</span><br><span class="line">id(pk)usernamepassword</span><br><span class="line">--------------------------------------</span><br><span class="line">1zs123</span><br><span class="line">2ls456</span><br><span class="line"></span><br><span class="line">t_user_detail 用户详细信息表</span><br><span class="line">id(pk+fk)realnametel....</span><br><span class="line">------------------------------------------------</span><br><span class="line">1张三1111111111</span><br><span class="line">2李四1111415621</span><br><span class="line"></span><br><span class="line">一对一设计有两种方案：2.外键唯一(unique)。</span><br><span class="line">t_user_login  用户登录表</span><br><span class="line">id(pk)usernamepassword</span><br><span class="line">--------------------------------------</span><br><span class="line">1zs123</span><br><span class="line">2ls456</span><br><span class="line"></span><br><span class="line">t_user_detail 用户详细信息表</span><br><span class="line">id(pk)realname tel userid(fk+unique)....</span><br><span class="line">-----------------------------------------------------------</span><br><span class="line">1张三11111111112</span><br><span class="line">2李四11114156211</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;MySQL笔记&quot;&gt;&lt;a href=&quot;#MySQL笔记&quot; class=&quot;headerlink&quot; title=&quot;MySQL笔记&quot;&gt;&lt;/a&gt;MySQL笔记&lt;/h1&gt;</summary>
    
    
    
    <category term="MySql" scheme="http://yoursite.com/categories/MySql/"/>
    
    
    <category term="MySql" scheme="http://yoursite.com/tags/MySql/"/>
    
  </entry>
  
  <entry>
    <title>计蒜客-字符串和日期</title>
    <link href="http://yoursite.com/2020/02/05/%E8%AE%A1%E8%92%9C%E5%AE%A2-%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%92%8C%E6%97%A5%E6%9C%9F/"/>
    <id>http://yoursite.com/2020/02/05/%E8%AE%A1%E8%92%9C%E5%AE%A2-%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%92%8C%E6%97%A5%E6%9C%9F/</id>
    <published>2020-02-05T09:10:30.000Z</published>
    <updated>2021-09-14T07:40:30.401Z</updated>
    
    <content type="html"><![CDATA[<p>计蒜客蓝桥杯训练，字符串和日期专题</p><span id="more"></span><h4 id="字符串中A的数量"><a href="#字符串中A的数量" class="headerlink" title="字符串中A的数量"></a>字符串中A的数量</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">题面：输入一个字符串，统计其中字符A的数量并输出</span><br><span class="line">样例输入：</span><br><span class="line">AabdkeaoektA</span><br><span class="line">样例输出：</span><br><span class="line"><span class="number">2</span></span><br><span class="line">    </span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="type">int</span> ans=<span class="number">0</span>;</span><br><span class="line">    string s;</span><br><span class="line">    cin&gt;&gt;s;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;s.<span class="built_in">length</span>();i++)&#123;</span><br><span class="line">        <span class="keyword">if</span>(s[i]==<span class="string">&#x27;A&#x27;</span>)</span><br><span class="line">            ans++;</span><br><span class="line">    &#125;</span><br><span class="line">    cout&lt;&lt;ans&lt;&lt;endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//C版本</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="type">char</span> s[<span class="number">105</span>];</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="type">int</span> len,cnt=<span class="number">0</span>;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>,s);</span><br><span class="line">    len=<span class="built_in">strlen</span>(s);<span class="comment">//strlen()时间复杂度是O(n)</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;len;i++)&#123;</span><br><span class="line">        <span class="keyword">if</span>(s[i]==<span class="string">&#x27;A&#x27;</span>)</span><br><span class="line">            cnt++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>,cnt);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="最长的名字"><a href="#最长的名字" class="headerlink" title="最长的名字"></a>最长的名字</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">题面：N个同学，输出名字最长同学的名字</span><br><span class="line">样例输入：</span><br><span class="line"><span class="number">3</span></span><br><span class="line">Tom</span><br><span class="line">Gaofei</span><br><span class="line">Lobs</span><br><span class="line">样例输出：</span><br><span class="line">Gaofei</span><br><span class="line">    </span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line">string s[<span class="number">105</span>];</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="type">int</span> n,max=<span class="number">0</span>;</span><br><span class="line">    string ans;</span><br><span class="line">    cin&gt;&gt;n;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;n;i++)&#123;</span><br><span class="line">        cin&gt;&gt;s[i];</span><br><span class="line">        <span class="keyword">if</span>(s[i].<span class="built_in">length</span>()&gt;max)&#123;</span><br><span class="line">            max=s[i].<span class="built_in">length</span>();</span><br><span class="line">            ans=s[i];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    cout&lt;&lt;ans&lt;&lt;endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//C版本</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="type">int</span> anslen;</span><br><span class="line"><span class="type">char</span> s[<span class="number">105</span>],ans[<span class="number">105</span>];</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="type">int</span> N,len;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;N);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;N;i++)&#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>,s);</span><br><span class="line">        len=<span class="built_in">strlen</span>(s);</span><br><span class="line">        <span class="keyword">if</span>(len&gt;anslen)&#123;</span><br><span class="line">            anslen=len;</span><br><span class="line">            <span class="built_in">strcpy</span>(ans,s);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%s\n&quot;</span>,ans);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="字符串"><a href="#字符串" class="headerlink" title="字符串"></a>字符串</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">题面：https:<span class="comment">//www.jisuanke.com/course/6497/341020</span></span><br><span class="line">样例输入：</span><br><span class="line">ABCDZ123abcdefz</span><br><span class="line">样例输出：</span><br><span class="line">BCDEA123bcdefga   </span><br><span class="line">    </span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    string s;</span><br><span class="line">    cin&gt;&gt;s;</span><br><span class="line">    <span class="type">int</span> len=s.<span class="built_in">length</span>();</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i &lt; len;i++)&#123;</span><br><span class="line">        <span class="keyword">if</span>(s[i]==<span class="string">&#x27;z&#x27;</span>)&#123;</span><br><span class="line">            s[i]=<span class="string">&#x27;a&#x27;</span>;</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(s[i]==<span class="string">&#x27;Z&#x27;</span>)</span><br><span class="line">            s[i]=<span class="string">&#x27;A&#x27;</span>;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>((s[i]&gt;=<span class="string">&#x27;A&#x27;</span>&amp;&amp;s[i]&lt;<span class="string">&#x27;Z&#x27;</span>)||(s[i]&gt;=<span class="string">&#x27;a&#x27;</span>&amp;&amp;s[i]&lt;<span class="string">&#x27;z&#x27;</span>))</span><br><span class="line">            s[i]++;</span><br><span class="line">    &#125;</span><br><span class="line">    cout&lt;&lt;s;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//C版本</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="type">char</span> s[<span class="number">1005</span>];</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="type">int</span> len;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>,s);</span><br><span class="line">    len=<span class="built_in">strlen</span>(s);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;len;i++)&#123;</span><br><span class="line">        <span class="keyword">if</span>(s[i]==<span class="string">&#x27;z&#x27;</span>)&#123;</span><br><span class="line">            s[i]=<span class="string">&#x27;a&#x27;</span>;</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(s[i]==<span class="string">&#x27;Z&#x27;</span>)</span><br><span class="line">            s[i]=<span class="string">&#x27;A&#x27;</span>;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>((s[i]&gt;=<span class="string">&#x27;A&#x27;</span>&amp;&amp;s[i]&lt;<span class="string">&#x27;Z&#x27;</span>)||(s[i]&gt;=<span class="string">&#x27;a&#x27;</span>&amp;&amp;s[i]&lt;<span class="string">&#x27;z&#x27;</span>))</span><br><span class="line">            s[i]++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%s&quot;</span>,s);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="大数的奇偶性判断"><a href="#大数的奇偶性判断" class="headerlink" title="大数的奇偶性判断"></a>大数的奇偶性判断</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">题面：https:<span class="comment">//www.jisuanke.com/course/6497/341021</span></span><br><span class="line">样例输入：</span><br><span class="line"><span class="number">1231393713904</span></span><br><span class="line">样例输出：</span><br><span class="line">YES</span><br><span class="line">    </span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    string s;</span><br><span class="line">    cin&gt;&gt;s;</span><br><span class="line">    <span class="type">int</span> len=s.<span class="built_in">length</span>();</span><br><span class="line">    <span class="keyword">if</span>(!(<span class="built_in">int</span>(s[len<span class="number">-1</span>]-<span class="string">&#x27;0&#x27;</span>)&amp;<span class="number">1</span>))&#123;<span class="comment">//!的优先级大于&amp;，0的ASCII码是48（30H）</span></span><br><span class="line">        cout&lt;&lt;<span class="string">&quot;YES&quot;</span>&lt;&lt;endl;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span>&#123;</span><br><span class="line">        cout&lt;&lt;<span class="string">&quot;NO&quot;</span>&lt;&lt;endl;</span><br><span class="line">    &#125; </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="字符反转"><a href="#字符反转" class="headerlink" title="字符反转"></a>字符反转</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">题面：将输入的字符串反转。</span><br><span class="line">样例输入：<span class="number">1234567890</span></span><br><span class="line">样例输出：<span class="number">0987654321</span></span><br><span class="line">    </span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    string s;</span><br><span class="line">    cin&gt;&gt;s;</span><br><span class="line">    <span class="type">int</span> len=s.<span class="built_in">length</span>();</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=len<span class="number">-1</span>;i&gt;=<span class="number">0</span>;i--)&#123;</span><br><span class="line">        <span class="keyword">if</span>(i!=<span class="number">0</span>) cout&lt;&lt;s[i];</span><br><span class="line">        <span class="keyword">else</span> cout&lt;&lt;s[i]&lt;&lt;endl;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="最后一个单词"><a href="#最后一个单词" class="headerlink" title="最后一个单词"></a>最后一个单词</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">题面：https:<span class="comment">//www.jisuanke.com/course/6497/341023</span></span><br><span class="line">样例输入：</span><br><span class="line">Today is a nice day</span><br><span class="line">样例输出：    </span><br><span class="line"><span class="number">3</span></span><br><span class="line">    </span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    string s;</span><br><span class="line">    <span class="keyword">while</span>(cin&gt;&gt;s);<span class="comment">//循环结束后s的内容是最后一个字符串，样例中是day</span></span><br><span class="line">    cout&lt;&lt;s.<span class="built_in">length</span>()&lt;&lt;endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;    </span><br><span class="line"><span class="comment">//C版本</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="type">char</span> s[<span class="number">10005</span>];</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">while</span>(<span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>,s)!=EOF);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>,<span class="built_in">strlen</span>(s));</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="蓝桥杯真题：十字图"><a href="#蓝桥杯真题：十字图" class="headerlink" title="蓝桥杯真题：十字图"></a>蓝桥杯真题：十字图</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br></pre></td><td class="code"><pre><span class="line">题面：https:<span class="comment">//www.jisuanke.com/course/6497/341024</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">char</span> s[<span class="number">150</span>][<span class="number">150</span>];</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> n, x, y;</span><br><span class="line">    cin &gt;&gt; n;</span><br><span class="line">    x = <span class="number">0</span>;</span><br><span class="line">    y = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">4</span> * n + <span class="number">5</span>; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; <span class="number">4</span> * n + <span class="number">5</span>; j++)</span><br><span class="line">        &#123;</span><br><span class="line">            s[i][j] = <span class="string">&#x27;.&#x27;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n + <span class="number">1</span>; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j = y + <span class="number">2</span>; j &lt;= y + <span class="number">4</span> * (n - i) + <span class="number">2</span>; j++)</span><br><span class="line">        &#123;</span><br><span class="line">            s[x][j] = <span class="string">&#x27;$&#x27;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j = x; j &lt;= x + <span class="number">2</span>; j++)</span><br><span class="line">        &#123;</span><br><span class="line">            s[j][y + <span class="number">2</span>] = <span class="string">&#x27;$&#x27;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j = x; j &lt;= x + <span class="number">2</span>; j++)</span><br><span class="line">        &#123;</span><br><span class="line">            s[j][y + <span class="number">4</span> * (n - i) + <span class="number">2</span>] = <span class="string">&#x27;$&#x27;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j = y; j &lt;= y + <span class="number">2</span>; j++)</span><br><span class="line">        &#123;</span><br><span class="line">            s[x + <span class="number">2</span>][j] = <span class="string">&#x27;$&#x27;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j = y + <span class="number">4</span> * (n - i) + <span class="number">2</span>; j &lt;= y + <span class="number">4</span> * (n - i) + <span class="number">4</span>; j++)</span><br><span class="line">        &#123;</span><br><span class="line">            s[x + <span class="number">2</span>][j] = <span class="string">&#x27;$&#x27;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j = x + <span class="number">2</span>; j &lt;= x + <span class="number">4</span> * (n - i) + <span class="number">2</span>; j++)</span><br><span class="line">        &#123;</span><br><span class="line">            s[j][y] = <span class="string">&#x27;$&#x27;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j = x + <span class="number">2</span>; j &lt;= x + <span class="number">4</span> * (n - i) + <span class="number">2</span>; j++)</span><br><span class="line">        &#123;</span><br><span class="line">            s[j][y + <span class="number">4</span> * (n - i) + <span class="number">4</span>] = <span class="string">&#x27;$&#x27;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j = y; j &lt;= y + <span class="number">2</span>; j++)</span><br><span class="line">        &#123;</span><br><span class="line">            s[x + <span class="number">4</span> * (n - i) + <span class="number">2</span>][j] = <span class="string">&#x27;$&#x27;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j = y + <span class="number">4</span> * (n - i) + <span class="number">2</span>; j &lt;= y + <span class="number">4</span> * (n - i) + <span class="number">4</span>; j++)</span><br><span class="line">        &#123;</span><br><span class="line">            s[x + <span class="number">4</span> * (n - i) + <span class="number">2</span>][j] = <span class="string">&#x27;$&#x27;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j = x + <span class="number">4</span>*(n-i)+<span class="number">2</span>; j &lt;= x + <span class="number">4</span> * (n-i) + <span class="number">4</span>; j++)</span><br><span class="line">        &#123;</span><br><span class="line">            s[j][y + <span class="number">2</span>] = <span class="string">&#x27;$&#x27;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j = x + <span class="number">4</span>*(n-i)+<span class="number">2</span>; j &lt;= x + <span class="number">4</span> * (n-i) + <span class="number">4</span>; j++)</span><br><span class="line">        &#123;</span><br><span class="line">            s[j][y + <span class="number">4</span> * (n - i) + <span class="number">2</span>] = <span class="string">&#x27;$&#x27;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j = y + <span class="number">2</span>; j &lt;= y + <span class="number">4</span> * (n - i) + <span class="number">2</span>; j++)</span><br><span class="line">        &#123;</span><br><span class="line">            s[x + <span class="number">4</span> * (n - i) + <span class="number">4</span>][j] = <span class="string">&#x27;$&#x27;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        x+=<span class="number">2</span>;</span><br><span class="line">        y+=<span class="number">2</span>;</span><br><span class="line">    &#125;</span><br><span class="line">   <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">4</span> * n + <span class="number">5</span>; i++)</span><br><span class="line">        cout&lt;&lt;s[i]&lt;&lt;endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//标程</span></span><br><span class="line"><span class="comment">//观察图形发现，上下对称，左右对称，所以只需要处理左上角即可</span></span><br><span class="line"><span class="comment">//对于左上角，也是一个对称图形，找到每一层对应的$的规律就可以了</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">char</span> s[<span class="number">150</span>][<span class="number">150</span>];</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> n;</span><br><span class="line">    cin &gt;&gt; n;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt;= <span class="number">2</span> * (n + <span class="number">1</span>); ++i)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt;= <span class="number">2</span> * (n + <span class="number">1</span>); ++j)</span><br><span class="line">        &#123;</span><br><span class="line">            s[i][j] = <span class="string">&#x27;.&#x27;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n + <span class="number">1</span>; ++i)</span><br><span class="line">    &#123;</span><br><span class="line">        s[<span class="number">2</span> * i][<span class="number">2</span> * i] = <span class="string">&#x27;$&#x27;</span>;</span><br><span class="line">        s[<span class="number">2</span> * i - <span class="number">1</span>][<span class="number">2</span> * i] = <span class="string">&#x27;$&#x27;</span>;</span><br><span class="line">        s[<span class="number">2</span> * i][<span class="number">2</span> * i - <span class="number">1</span>] = <span class="string">&#x27;$&#x27;</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">2</span> * i; j &lt;= <span class="number">2</span> * (n + <span class="number">1</span>); j++)</span><br><span class="line">        &#123;</span><br><span class="line">            s[<span class="number">2</span> * i - <span class="number">2</span>][j] = s[j][<span class="number">2</span> * i - <span class="number">2</span>] = <span class="string">&#x27;$&#x27;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt;= <span class="number">2</span> * (n + <span class="number">1</span>); ++i)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt;= <span class="number">2</span> * (n + <span class="number">1</span>); ++j)</span><br><span class="line">        &#123;</span><br><span class="line">            s[i][<span class="number">4</span> * (n + <span class="number">1</span>) - j] = s[<span class="number">4</span> * (n + <span class="number">1</span>) - i][j] = s[<span class="number">4</span> * (n + <span class="number">1</span>) - i][<span class="number">4</span> * (n + <span class="number">1</span>) - j] = s[i][j];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt;= <span class="number">4</span> * (n + <span class="number">1</span>); ++i)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%s\n&quot;</span>, s[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="节假日"><a href="#节假日" class="headerlink" title="节假日"></a>节假日</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line">题面：https:<span class="comment">//www.jisuanke.com/course/6497/341025</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">int</span> day[<span class="number">13</span>]=&#123;<span class="number">0</span>,<span class="number">31</span>,<span class="number">28</span>,<span class="number">31</span>,<span class="number">30</span>,<span class="number">31</span>,<span class="number">30</span>,<span class="number">31</span>,<span class="number">31</span>,<span class="number">30</span>,<span class="number">31</span>,<span class="number">30</span>,<span class="number">31</span>&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//将已经知道的阳历节假日记录</span></span><br><span class="line"><span class="type">int</span> mm[<span class="number">10</span>]=&#123;<span class="number">1</span>,<span class="number">5</span>,<span class="number">10</span>,<span class="number">10</span>,<span class="number">10</span>,<span class="number">12</span>&#125;;</span><br><span class="line"><span class="type">int</span> dd[<span class="number">10</span>]=&#123;<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">25</span>&#125;;</span><br><span class="line"><span class="comment">//日期一直向前走</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">nextday</span><span class="params">(<span class="type">int</span> &amp;m,<span class="type">int</span> &amp;d)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(d==day[m])&#123;</span><br><span class="line">        m++;</span><br><span class="line">        d=<span class="number">1</span>;</span><br><span class="line">    &#125;<span class="keyword">else</span> d++;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="type">int</span> y,w,m,d,f;<span class="comment">//f记录的是春节剩余的天数。若f=0则表示不在春节里</span></span><br><span class="line">    <span class="type">int</span> ans=<span class="number">0</span>;</span><br><span class="line">    cin&gt;&gt;y;</span><br><span class="line">    <span class="keyword">if</span>((y%<span class="number">4</span> == <span class="number">0</span> &amp;&amp; y % <span class="number">100</span> != <span class="number">0</span>)||y%<span class="number">400</span>==<span class="number">0</span>)&#123;</span><br><span class="line">        day[<span class="number">2</span>]++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//输入阴历节假日的阳历日期</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">6</span>;i&lt;<span class="number">10</span>;i++)&#123;</span><br><span class="line">        cin&gt;&gt;mm[i]&gt;&gt;dd[i];</span><br><span class="line">    &#125;</span><br><span class="line">    cin&gt;&gt;w;</span><br><span class="line">    m=<span class="number">1</span>;d=<span class="number">1</span>;<span class="comment">//当前是1月1号</span></span><br><span class="line">    f=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span>(m!=<span class="number">13</span>)&#123;</span><br><span class="line">        <span class="comment">//1、判断是不是春节</span></span><br><span class="line">        <span class="comment">//2、判断春节剩余的天数</span></span><br><span class="line">        <span class="comment">//3、判断是不是周末</span></span><br><span class="line">        <span class="comment">//4、判断是不是节假日</span></span><br><span class="line">        <span class="comment">//首先判断春节的状态，此处最为巧妙应当好好理解</span></span><br><span class="line">        <span class="keyword">if</span>(m==mm[<span class="number">6</span>]&amp;&amp;d==dd[<span class="number">6</span>])&#123;<span class="comment">//若在春节里</span></span><br><span class="line">            ans++;</span><br><span class="line">            f=<span class="number">2</span>;</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(f)&#123;<span class="comment">//f的值不为0，表示现在在春节里所以要将ans+1，将春节剩余的天数-1</span></span><br><span class="line">            ans++;</span><br><span class="line">            f--;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span>(w==<span class="number">6</span>||w==<span class="number">7</span>)&#123;<span class="comment">//判断是不是双休日</span></span><br><span class="line">            ans++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;<span class="number">10</span>;i++)&#123;</span><br><span class="line">                <span class="keyword">if</span>(m==mm[i]&amp;d==dd[i])&#123;</span><br><span class="line">                    ans++;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">nextday</span>(m,d);</span><br><span class="line">        <span class="comment">//修改现在是星期几</span></span><br><span class="line">        w++;</span><br><span class="line">        <span class="keyword">if</span>(w==<span class="number">8</span>)</span><br><span class="line">            w=<span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    cout&lt;&lt;ans&lt;&lt;endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;p&gt;计蒜客蓝桥杯训练，字符串和日期专题&lt;/p&gt;</summary>
    
    
    
    <category term="蓝桥杯" scheme="http://yoursite.com/categories/%E8%93%9D%E6%A1%A5%E6%9D%AF/"/>
    
    
    <category term="蓝桥杯" scheme="http://yoursite.com/tags/%E8%93%9D%E6%A1%A5%E6%9D%AF/"/>
    
  </entry>
  
  <entry>
    <title>算法基础-递归</title>
    <link href="http://yoursite.com/2020/02/05/%E7%AE%97%E6%B3%95%E5%9F%BA%E7%A1%80-%E9%80%92%E5%BD%92/"/>
    <id>http://yoursite.com/2020/02/05/%E7%AE%97%E6%B3%95%E5%9F%BA%E7%A1%80-%E9%80%92%E5%BD%92/</id>
    <published>2020-02-05T05:54:00.000Z</published>
    <updated>2021-09-14T07:40:30.823Z</updated>
    
    <content type="html"><![CDATA[<p> 两个递归题</p><span id="more"></span><h3 id="总体思想："><a href="#总体思想：" class="headerlink" title="总体思想："></a>总体思想：</h3><ul><li>待求解问题的解 -&gt; 输入变量 x 的函数 f(x)</li><li>通过寻找函数 g() ，使得 f(x) &#x3D; g(f(x-1))</li><li>已知 f(0) 的值，就可以通过 f(0) 和 g() 求出 f(x) 的值</li></ul><p>推广：</p><ul><li>扩展到多个输入变量x，y，z等，x-1也可以推广到<code>x-x1</code>，只要递归朝着’出口’方向即可</li></ul><p>枚举与递归的区别：</p><ol><li><p>枚举：</p><ul><li>子问题之间是横向的，同类的关系。</li></ul></li><li><p>递归：</p><ul><li>子问题与原问题之间是纵向的，同类的关系。</li><li>语法形式上：1、直接调用 2、间接调用</li></ul></li></ol><p>递归的三个要点：</p><ol><li><p>递归式</p><p>将原问题划分成子问题</p></li><li><p>递归出口</p><p>递归终止条件，即最小子问题的求解，可以允许多个出口</p></li><li><p>界函数</p><p>问题规模变化的函数，保证递归规模，向出口条件靠拢。</p></li></ol><p>求阶乘的递归程序</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">factorial</span><span class="params">(<span class="type">int</span> n)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(n==<span class="number">0</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">return</span> n*<span class="built_in">factorial</span>(n<span class="number">-1</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>阶乘的栈：通过栈的方式将递归的状态保存下来，最终由栈顶（递归出口）问题的解递推出问题的解。</p><p>递归的关键：</p><ul><li>找出递归公式。</li><li>找到递归终止条件。</li></ul><p>函数的局部变量是存在栈上的，若局部变量的体积较大可能会引起栈的溢出。</p><h3 id="小游戏poj-1101"><a href="#小游戏poj-1101" class="headerlink" title="小游戏poj-1101"></a>小游戏<code>poj-1101</code></h3><ol><li><p>迷宫求解问题</p><p>自相似性表现在每走一步的探测方式相同，可以用递归方法求解</p></li><li><p>通过枚举方式找到从起点到终点的路径。朝一个方向下去：</p><p>​如果走不通，则换个方向走，四个方向都走不通，则回到上一步的地方，换个方向走，依次走下去，直到走到终点。</p></li></ol><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">计算路径数目：</span><br><span class="line">普通迷宫问题的路径数目是经过的格子数目。</span><br><span class="line">而该问题路径只包含水乎或者竖直的直线段，所以需要记录每一步走的方向。</span><br><span class="line"> 如果上一步走的方向和这一步走的方向相同，递归搜索时路径数不变，否则路径数加<span class="number">1</span></span><br><span class="line">路径只包含水平或者竖直的直线段.路径不能穿过别的游戏卡片.但是允许路径临时的离开矩形板所以在矩形板最外层增加一圈格子，路径可以通过这些新增加的格子（类似于枚举的熄灯问题）</span><br><span class="line">    </span><br><span class="line">描述迷宫：</span><br><span class="line"><span class="number">1.</span>设置迷宫为二维数组board[][]，数组的值是：</span><br><span class="line">空格：代表这个地方没有游戏卡片</span><br><span class="line"> x：代表这个地方有游戏卡片</span><br><span class="line"><span class="number">2.</span>在搜索过程中，用另外一个二维数mark[][]标记格子是否已经走过了mark[i]j]=<span class="number">0</span><span class="comment">//格子（i，j）未走过</span></span><br><span class="line">mark[i][j]=<span class="number">1</span><span class="comment">//格子（i，j）已经走过</span></span><br><span class="line"><span class="number">3.</span><span class="type">int</span> minstep，w，h；<span class="comment">//全局变量</span></span><br><span class="line"><span class="comment">//minstep，记录从起点到达终点最少路径数，初始化为一个很大的数</span></span><br><span class="line"><span class="comment">//w，h矩形板的宽度和高度</span></span><br><span class="line"></span><br><span class="line">设置搜索方向顺序是东，南，西，北</span><br><span class="line"><span class="type">int</span> to[<span class="number">4</span>][<span class="number">2</span>]=&#123;&#123;<span class="number">0</span>,<span class="number">1</span>&#125;，&#123;<span class="number">1</span>,<span class="number">0</span>&#125;，&#123;<span class="number">0</span>,<span class="number">-1</span>&#125;，&#123;<span class="number">-1</span>,<span class="number">0</span>&#125;&#125;;<span class="comment">//北东南西，顺时针</span></span><br><span class="line"><span class="comment">//now_x，now_y，当前位置</span></span><br><span class="line"><span class="comment">//x，y下一步位置</span></span><br><span class="line"><span class="keyword">for</span>（i=<span class="number">0</span>；i&lt;<span class="number">4</span>；i++）&#123;</span><br><span class="line"><span class="type">int</span> x = now_x + to[i][<span class="number">0</span>];</span><br><span class="line">    <span class="type">int</span> y = now_y + to[i][<span class="number">1</span>];</span><br><span class="line">    f=i;<span class="comment">//方向，0，1，2，3分别表示北，东，南，西</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">判断新位置（x，y）是否有效</span><br><span class="line">T1:(x,y)在边界之内</span><br><span class="line">（x&gt;<span class="number">-1</span>）&amp;&amp;（x&lt;W+<span class="number">2</span>）&amp;&amp;（y&gt;<span class="number">-1</span>）&amp;&amp;（y&lt;h+<span class="number">2</span>）</span><br><span class="line">T2:该位置没有游戏卡片并且未曾走过</span><br><span class="line">((board[y][x]==<span class="string">&#x27; &#x27;</span>)&amp;&amp;(mark[y][x]==<span class="literal">false</span>))</span><br><span class="line">T3:已经到达终点</span><br><span class="line">(x==end_x)&amp;&amp;(y==end_y)&amp;&amp;(board[y][x]==<span class="string">&#x27;X&quot;)</span></span><br><span class="line"><span class="string">综上，(x,y)有效的条件是T1&amp;&amp;（T2||T3）</span></span><br><span class="line"><span class="string">if (((x &gt; -1) &amp;&amp; (x &lt; w + 2) &amp;&amp; (y &gt; -1) &amp;&amp; (y &lt; h + 2)) &amp;&amp;</span></span><br><span class="line"><span class="string">             (((board[y][x] == &#x27;</span> <span class="string">&#x27;) &amp;&amp; (mark[y][x] == false)) ||</span></span><br><span class="line"><span class="string">              ((x == end_x) &amp;&amp; (y == end_y) &amp;&amp; (board[y][x] == &#x27;</span>X<span class="number">&#x27;</span>))))&#123;</span><br><span class="line">    <span class="comment">/*Code*/</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">递归构造函数：</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Search</span><span class="params">(<span class="type">int</span> now_x,<span class="type">int</span> now_y,<span class="type">int</span> end_x,<span class="type">int</span> end_y,<span class="type">int</span> step,<span class="type">int</span> f)</span></span>;</span><br><span class="line"><span class="comment">//now_x，now_y当前位置//end_x，end_y结束位置</span></span><br><span class="line"><span class="comment">//step已经走过的路径数目</span></span><br><span class="line">f从上一步走到(now_x,now_y)时的方向       </span><br></pre></td></tr></table></figure><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="meta">#<span class="keyword">define</span> MAXIN 75</span></span><br><span class="line"><span class="type">int</span> minstep, w, h, to[<span class="number">4</span>][<span class="number">2</span>] = &#123;&#123;<span class="number">0</span>, <span class="number">1</span>&#125;, &#123;<span class="number">1</span>, <span class="number">0</span>&#125;, &#123;<span class="number">0</span>, <span class="number">-1</span>&#125;, &#123;<span class="number">-1</span>, <span class="number">0</span>&#125;&#125;;</span><br><span class="line"><span class="type">char</span> board[MAXIN + <span class="number">2</span>][MAXIN + <span class="number">2</span>]; <span class="comment">//定义矩形板</span></span><br><span class="line"><span class="type">bool</span> mark[MAXIN + <span class="number">2</span>][MAXIN + <span class="number">2</span>];  <span class="comment">//定义标记数组</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Search</span><span class="params">(<span class="type">int</span> now_x, <span class="type">int</span> now_y, <span class="type">int</span> end_x, <span class="type">int</span> end_y, <span class="type">int</span> step, <span class="type">int</span> f)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (step &gt; minstep)</span><br><span class="line">        <span class="keyword">return</span>; <span class="comment">//当前路径数大于minstep，返回（优化策略）</span></span><br><span class="line">    <span class="keyword">if</span> (now_x == end_x &amp;&amp; now_y == end_y)</span><br><span class="line">    &#123;                       <span class="comment">//到达终点</span></span><br><span class="line">        <span class="keyword">if</span> (minstep &gt; step) <span class="comment">//更新最小路径</span></span><br><span class="line">            minstep = step;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">4</span>; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> x = now_x + to[i][<span class="number">0</span>];</span><br><span class="line">        <span class="type">int</span> y = now_y + to[i][<span class="number">1</span>];</span><br><span class="line">        <span class="keyword">if</span> (((x &gt; <span class="number">-1</span>) &amp;&amp; (x &lt; w + <span class="number">2</span>) &amp;&amp; (y &gt; <span class="number">-1</span>) &amp;&amp; (y &lt; h + <span class="number">2</span>)) &amp;&amp;</span><br><span class="line">             (((board[y][x] == <span class="string">&#x27; &#x27;</span>) &amp;&amp; (mark[y][x] == <span class="literal">false</span>)) ||</span><br><span class="line">              ((x == end_x) &amp;&amp; (y == end_y) &amp;&amp; (board[y][x] == <span class="string">&#x27;X&#x27;</span>))))</span><br><span class="line">        &#123;</span><br><span class="line">            mark[y][x] = <span class="literal">true</span>; <span class="comment">//如果新位置有效标记该位置</span></span><br><span class="line">            <span class="comment">//已经过上一步方向和当前方向相同</span></span><br><span class="line">            <span class="comment">//则递归搜索时step不变</span></span><br><span class="line">            <span class="keyword">if</span> (f == i)</span><br><span class="line">                <span class="built_in">Search</span>(x, y, end_x, end_y, step, i);</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">                <span class="built_in">Search</span>(x, y, end_x, end_y, step + <span class="number">1</span>, i);</span><br><span class="line">            mark[y][x] = <span class="literal">false</span>; <span class="comment">//回溯，该位置未曾走过（递归结束不是有解，就是无解）</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">   <span class="comment">// freopen(&quot;a.txt&quot;,&quot;w&quot;,stdout);</span></span><br><span class="line">    <span class="type">int</span> Boardnum = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> (<span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>, &amp;w, &amp;h))</span><br><span class="line">    &#123; <span class="comment">//读入数据</span></span><br><span class="line">        <span class="keyword">if</span> (w == <span class="number">0</span> &amp;&amp; h == <span class="number">0</span>)</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="comment">//初始化左边和上边的格子</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; MAXIN + <span class="number">2</span>; i++)</span><br><span class="line">            board[<span class="number">0</span>][i] = board[i][<span class="number">0</span>] = <span class="string">&#x27; &#x27;</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= h; i++) <span class="comment">//读入矩形板的布局</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">getchar</span>();<span class="comment">//吃掉回车</span></span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">1</span>; j &lt;= w; j++)</span><br><span class="line">                board[i][j] = <span class="built_in">getchar</span>();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//在矩形板最外层增加一圈格子</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt;= w; i++)</span><br><span class="line">            board[h+<span class="number">1</span>][i+<span class="number">1</span>]=<span class="string">&#x27; &#x27;</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;=h;i++)</span><br><span class="line">            board[i+<span class="number">1</span>][w+<span class="number">1</span>]=<span class="string">&#x27; &#x27;</span>;</span><br><span class="line"></span><br><span class="line">        Boardnum++;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;Board #%d:\n&quot;</span>, Boardnum);</span><br><span class="line">        <span class="type">int</span> begin_x,begin_y,end_x,end_y,count=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span>(cin&gt;&gt;begin_x&gt;&gt;begin_y&gt;&gt;end_x&gt;&gt;end_y&amp;&amp;begin_x&gt;<span class="number">0</span>)&#123;</span><br><span class="line">            count++;</span><br><span class="line">            minstep=<span class="number">100000</span>;</span><br><span class="line">            <span class="built_in">memset</span>(mark,<span class="literal">false</span>,<span class="built_in">sizeof</span>(mark));</span><br><span class="line">            <span class="built_in">Search</span>(begin_x,begin_y,end_x,end_y,<span class="number">0</span>,<span class="number">-1</span>);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span>(minstep&lt;<span class="number">100000</span>)</span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">&quot;Pair %d: %d segments.\n&quot;</span>,count,minstep);</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">&quot;Pair %d: impossible.\n&quot;</span>,count);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//Output a blank line after each board</span></span><br><span class="line">        cout&lt;&lt;endl;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="棋盘分割poj-1191"><a href="#棋盘分割poj-1191" class="headerlink" title="棋盘分割poj-1191"></a>棋盘分割<code>poj-1191</code></h3>]]></content>
    
    
    <summary type="html">&lt;p&gt; 两个递归题&lt;/p&gt;</summary>
    
    
    
    <category term="算法基础" scheme="http://yoursite.com/categories/%E7%AE%97%E6%B3%95%E5%9F%BA%E7%A1%80/"/>
    
    
    <category term="递归" scheme="http://yoursite.com/tags/%E9%80%92%E5%BD%92/"/>
    
  </entry>
  
  <entry>
    <title>算法基础-枚举</title>
    <link href="http://yoursite.com/2020/02/05/%E7%AE%97%E6%B3%95%E5%9F%BA%E7%A1%80-%E6%9E%9A%E4%B8%BE/"/>
    <id>http://yoursite.com/2020/02/05/%E7%AE%97%E6%B3%95%E5%9F%BA%E7%A1%80-%E6%9E%9A%E4%B8%BE/</id>
    <published>2020-02-05T05:00:00.000Z</published>
    <updated>2021-09-14T07:40:31.219Z</updated>
    
    <content type="html"><![CDATA[<p>两个枚举题</p><span id="more"></span><p>枚举中的三个关键问题：</p><ol><li>给出解空间，建立简洁的数据模型。</li><li>减少搜索的空间。</li><li>采用合适的搜索顺序。</li></ol><h3 id="熄灯问题POJ1222"><a href="#熄灯问题POJ1222" class="headerlink" title="熄灯问题POJ1222"></a>熄灯问题<code>POJ1222</code></h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>、同一个按钮如果按两次的话将抵消第一次按下时的结果，所以每个按钮只需要按下一次</span><br><span class="line"><span class="number">2</span>、各个按钮被按下的顺序对最终结果无影响    </span><br><span class="line"><span class="number">3</span>、对第<span class="number">1</span>行中每盏点亮的灯，按下第<span class="number">2</span>行对应的按钮，就可以熄灭第<span class="number">1</span>行的全部灯</span><br><span class="line"><span class="number">4</span>、如此重复下去，可以熄灭第<span class="number">1</span>，<span class="number">2</span>，<span class="number">3</span>，<span class="number">4</span>行的全部灯</span><br><span class="line">解法：</span><br><span class="line">    <span class="number">1</span>、枚举所有可能的按钮，<span class="number">2</span>的<span class="number">30</span>次方，不可能</span><br><span class="line">    <span class="number">2</span>、减少枚举的状态数目（<span class="comment">/*找到局部状态枚举*/</span>）</span><br><span class="line">    基本思路：如果存在某个局部，一旦这个局部的状态被确定，那么剩余其他部分的状态只能是确定的一种，或者不多的）种.那么就只需枚举这个局部的状态即可</span><br><span class="line">    经过观察，发现第<span class="number">1</span>行就是这样的一个“局部”</span><br><span class="line">    因为第<span class="number">1</span>行的各开关状态确定的情况下，这些开关作用过后，将导致第<span class="number">1</span>行某些灯是亮的，某些灯是灭的。</span><br><span class="line">    要熄灭第<span class="number">1</span>行某个亮着的灯（假设位于第i列），那么唯一的办法就公</span><br><span class="line">是按下第<span class="number">2</span>行第i列的开关（因为第<span class="number">1</span>行的开关已经用过了，而第<span class="number">3</span>行及其后的开关不会影响到第<span class="number">1</span>行）</span><br><span class="line">    为了使第<span class="number">1</span>行的灯全部熄灭，第<span class="number">2</span>行的合理开关状态就是唯一的，以此类推即可确定所有位置的开关按下情况。</span><br><span class="line">    第一行状态定下后所有状态就确定，类推出倒数第二行的状态，枚举最后一行状态查看是否能熄灭最后一行的灯即可，这时第一行枚举的次数是<span class="number">2</span>的<span class="number">6</span>次方，<span class="number">64</span>种状态。按行枚举执行次数：<span class="number">64</span>*<span class="number">5</span>*<span class="number">6</span>，按列枚举执行次数：<span class="number">32</span>*<span class="number">6</span>*<span class="number">5</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">int</span> puzzle[<span class="number">6</span>][<span class="number">8</span>];</span><br><span class="line"><span class="type">int</span> press[<span class="number">6</span>][<span class="number">8</span>];</span><br><span class="line"><span class="comment">//0 indicates that the light is off</span></span><br><span class="line"><span class="comment">//0 indicate buttons, which are not pressed.</span></span><br><span class="line"><span class="comment">//目的是把所有的灯全部关掉</span></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">Guess</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> r=<span class="number">1</span>;r&lt;<span class="number">5</span>;r++)&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> c=<span class="number">1</span>;c&lt;<span class="number">7</span>;c++)&#123;</span><br><span class="line">            press[r+<span class="number">1</span>][c]=(puzzle[r][c]+press[r][c]+press[r][c+<span class="number">1</span>]+press[r<span class="number">-1</span>][c]+press[r][c<span class="number">-1</span>])%<span class="number">2</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span>  c = <span class="number">1</span>; c &lt;=<span class="number">6</span> ; c++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>((press[<span class="number">5</span>][c]+press[<span class="number">5</span>][c+<span class="number">1</span>]+press[<span class="number">5</span>][c<span class="number">-1</span>]+press[<span class="number">4</span>][c])%<span class="number">2</span>!=puzzle[<span class="number">5</span>][c])</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125; </span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">enumrate</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="type">int</span> c=<span class="number">1</span>;</span><br><span class="line">    <span class="comment">//此处是关键，必须再次初始化。之前的操作会改变press数组的值</span></span><br><span class="line">    <span class="keyword">for</span>(c=<span class="number">1</span>; c&lt;<span class="number">7</span>; c++) &#123;</span><br><span class="line">        press[<span class="number">1</span>][c]=<span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">while</span>(<span class="built_in">Guess</span>()==<span class="literal">false</span>)&#123;</span><br><span class="line">        press[<span class="number">1</span>][<span class="number">1</span>]++;</span><br><span class="line">        c=<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">while</span>(press[<span class="number">1</span>][c]&gt;<span class="number">1</span>)&#123;</span><br><span class="line">            press[<span class="number">1</span>][c]=<span class="number">0</span>;</span><br><span class="line">            c++;</span><br><span class="line">            press[<span class="number">1</span>][c]++;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"> <span class="comment">//   freopen(&quot;a.txt&quot;,&quot;w&quot;,stdout);</span></span><br><span class="line">    <span class="built_in">memset</span>(puzzle,<span class="number">0</span>,<span class="built_in">sizeof</span>(puzzle));</span><br><span class="line">    <span class="built_in">memset</span>(press,<span class="number">0</span>,<span class="built_in">sizeof</span>(press));</span><br><span class="line">    <span class="type">int</span> cases;</span><br><span class="line">    cin&gt;&gt;cases;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> k=<span class="number">1</span>;k&lt;=cases;k++)&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=<span class="number">5</span>;i++)</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">1</span>;j&lt;=<span class="number">6</span>;j++)&#123;</span><br><span class="line">            cin&gt;&gt;puzzle[i][j];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">enumrate</span>();</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;PUZZLE #%d\n&quot;</span>,k);</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=<span class="number">5</span>;i++)</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">1</span>;j&lt;=<span class="number">6</span>;j++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(j!=<span class="number">6</span>)</span><br><span class="line">            cout&lt;&lt;press[i][j]&lt;&lt;<span class="string">&quot; &quot;</span>;</span><br><span class="line">            <span class="keyword">else</span> </span><br><span class="line">            cout&lt;&lt;press[i][j]&lt;&lt;endl;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// cout&lt;&lt;endl;</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="讨厌的青蛙POJ1054"><a href="#讨厌的青蛙POJ1054" class="headerlink" title="讨厌的青蛙POJ1054"></a>讨厌的青蛙<code>POJ1054</code></h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">int</span> n,r,c;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">PLANT</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> x,y;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="type">bool</span> <span class="keyword">operator</span> &lt;(<span class="type">const</span> PLANT &amp;p1,<span class="type">const</span> PLANT p2)&#123;</span><br><span class="line">    <span class="keyword">if</span>(p1.x==p2.x)</span><br><span class="line">    <span class="keyword">return</span> p1.y&lt;p2.y;</span><br><span class="line">    <span class="keyword">return</span> p1.x&lt;p2.x;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">PLANT plants[<span class="number">5005</span>];</span><br><span class="line">PLANT plant;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">searchPath</span><span class="params">(PLANT secPlant,<span class="type">int</span> dx,<span class="type">int</span> dy)</span></span>&#123;</span><br><span class="line">    PLANT plant;</span><br><span class="line">    <span class="type">int</span> steps;</span><br><span class="line">    plant.x=secPlant.x+dx;</span><br><span class="line">    plant.y=secPlant.y+dy;</span><br><span class="line">    steps=<span class="number">2</span>;</span><br><span class="line">    <span class="keyword">while</span>(plant.x&lt;=r&amp;&amp;plant.x&gt;=<span class="number">1</span>&amp;&amp;plant.y&lt;=c&amp;&amp;plant.y&gt;=<span class="number">1</span>)&#123;</span><br><span class="line">        <span class="keyword">if</span>(!<span class="built_in">binary_search</span>(plants,plants+n,plant))&#123;</span><br><span class="line">            steps=<span class="number">0</span>;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        plant.x+=dx;</span><br><span class="line">        plant.y+=dy;</span><br><span class="line">        steps++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> steps;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    ios::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">    <span class="type">int</span> max=<span class="number">2</span>;</span><br><span class="line">    cin&gt;&gt;r&gt;&gt;c&gt;&gt;n;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;n;i++)&#123;</span><br><span class="line">        cin&gt;&gt;plants[i].x&gt;&gt;plants[i].y;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//排序可以有效减少枚举的次数</span></span><br><span class="line">    <span class="comment">//将水稻按x坐标从小到大排序，x坐标相同按y从小到大排序</span></span><br><span class="line">    <span class="built_in">sort</span>(plants,plants+n);</span><br><span class="line">    <span class="comment">//依次选取两个点</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;n<span class="number">-2</span>;i++)&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j=i+<span class="number">1</span>;j&lt;n<span class="number">-1</span>;j++)&#123;</span><br><span class="line">            <span class="type">int</span> dx=plants[j].x-plants[i].x;</span><br><span class="line">            <span class="type">int</span> dy=plants[j].y-plants[i].y;</span><br><span class="line">            <span class="comment">//找到第一个点之前的一个点</span></span><br><span class="line">            <span class="type">int</span> px=plants[i].x-dx;</span><br><span class="line">            <span class="type">int</span> py=plants[i].y-dy;</span><br><span class="line">            <span class="keyword">if</span>(px&lt;=r&amp;&amp;px&gt;=<span class="number">1</span>&amp;&amp;py&lt;=c&amp;&amp;py&gt;=<span class="number">1</span>)</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            <span class="comment">//第一点前一点在稻田里</span></span><br><span class="line">            <span class="comment">//说明本次选的第二点导致的x方向步长不合理</span></span><br><span class="line">            <span class="comment">//取下一个点作为第二个点</span></span><br><span class="line">            <span class="keyword">if</span>(plants[i].x+(max<span class="number">-1</span>)*dx&gt;r)</span><br><span class="line">            <span class="keyword">break</span>;<span class="comment">//退出内层循环</span></span><br><span class="line">            <span class="comment">//x方向过早越界了，说明本次选的第二点不成立（步长太大）</span></span><br><span class="line">            <span class="comment">//如果换下一个点作为第二点，x方向步长只会更大，更不成立，所以应该</span></span><br><span class="line">            <span class="comment">//认为本次选的第一个点必然是不成立的，那么取下一个点作为第一点再试。</span></span><br><span class="line">            py=plants[i].y+(max<span class="number">-1</span>)*dy;</span><br><span class="line">            <span class="keyword">if</span>(py&gt;c||py&lt;<span class="number">1</span>)</span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line">            <span class="type">int</span> steps=<span class="built_in">searchPath</span>(plants[j],dx,dy);</span><br><span class="line">            <span class="keyword">if</span>(steps&gt;max)</span><br><span class="line">                max=steps;</span><br><span class="line">        &#125;  </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(max==<span class="number">2</span>) max=<span class="number">0</span>;</span><br><span class="line">        cout&lt;&lt;max&lt;&lt;endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;p&gt;两个枚举题&lt;/p&gt;</summary>
    
    
    
    <category term="算法基础" scheme="http://yoursite.com/categories/%E7%AE%97%E6%B3%95%E5%9F%BA%E7%A1%80/"/>
    
    
    <category term="枚举" scheme="http://yoursite.com/tags/%E6%9E%9A%E4%B8%BE/"/>
    
  </entry>
  
  <entry>
    <title>Markdown简介</title>
    <link href="http://yoursite.com/2020/02/03/Markdown%E7%AE%80%E4%BB%8B/"/>
    <id>http://yoursite.com/2020/02/03/Markdown%E7%AE%80%E4%BB%8B/</id>
    <published>2020-02-03T09:00:00.000Z</published>
    <updated>2021-09-14T07:40:31.998Z</updated>
    
    <content type="html"><![CDATA[<p>Markdown简介</p><span id="more"></span><ul><li>这是无序列表</li></ul><ol><li>这是有序列表</li></ol><p>这是表格</p><table><thead><tr><th align="center">A</th><th>B</th><th>C</th></tr></thead><tbody><tr><td align="center">D</td><td>E</td><td>F</td></tr><tr><td align="center">G</td><td>H</td><td>I</td></tr><tr><td align="center">J</td><td>K</td><td>L</td></tr></tbody></table><p>这是插入的图片</p><p><img src="/..%5Cimages%5C1.jpg" alt="这是图片描述"></p><p><img src="https://dp2px.com/json-data/banner/blog-build.png" alt="第二张图片"><br><img src="https://dp2px.com/json-data/banner/blog-build.png" alt="使用img插入图片" width=200></p><p><strong>加粗</strong><br><em><strong>斜体加粗</strong></em><br><del>删除线</del></p><hr><p>分割线<br><a href="https://www.baidu.com/">设置超链接</a><br>Markdown可以设置流程图但是太过复杂不建议使用<br><a href="https://dp2px.com/">参考博客</a></p>]]></content>
    
    
    <summary type="html">&lt;p&gt;Markdown简介&lt;/p&gt;</summary>
    
    
    
    
    <category term="Markdown" scheme="http://yoursite.com/tags/Markdown/"/>
    
  </entry>
  
  <entry>
    <title>Git学习笔记</title>
    <link href="http://yoursite.com/2020/02/02/Git%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    <id>http://yoursite.com/2020/02/02/Git%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/</id>
    <published>2020-02-02T14:11:30.000Z</published>
    <updated>2021-09-14T07:40:33.155Z</updated>
    
    <content type="html"><![CDATA[<p>Git学习笔记</p><span id="more"></span><p>Git是一款免费、开源的分布式版本控制系统</p><p>GitHub主要提供基于Git的版本托管服务。Git只是Github上用来管理项目的一个工具而已。</p><p>可以用Git bash、tortoisegit、IDEA和github、gitee等代码托管平台连接</p><hr><h4 id="Git初始化"><a href="#Git初始化" class="headerlink" title="Git初始化"></a>Git初始化</h4><ol><li><h5 id="基本信息设置"><a href="#基本信息设置" class="headerlink" title="基本信息设置"></a>基本信息设置</h5><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>、设置用户名  git config --global user.name<span class="string">&quot;your name&quot;</span> </span><br><span class="line"><span class="number">2</span>、设置用户名邮箱  git config --global user.email<span class="string">&quot;zshlmy@163.com&quot;</span></span><br><span class="line"><span class="number">3</span>、查看设置   git config --<span class="built_in">list</span></span><br></pre></td></tr></table></figure></li><li><h5 id="初始化新的Git本地仓库"><a href="#初始化新的Git本地仓库" class="headerlink" title="初始化新的Git本地仓库"></a>初始化新的Git本地仓库</h5><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>、创建文件夹  </span><br><span class="line">    mkdir folder</span><br><span class="line"><span class="number">2</span>、在文件夹内初始化Git（创建Git仓库）</span><br><span class="line">    cd folder</span><br><span class="line">    git init  <span class="comment">//执行此命令则会在folder生成 .git文件夹 用来存储仓库的信息</span></span><br></pre></td></tr></table></figure></li><li><h5 id="向本地仓库中添加文件"><a href="#向本地仓库中添加文件" class="headerlink" title="向本地仓库中添加文件"></a>向本地仓库中添加文件</h5><h6 id="本地仓库三个区域"><a href="#本地仓库三个区域" class="headerlink" title="本地仓库三个区域"></a>本地仓库三个区域</h6><p><strong>1、工作区：</strong>添加、编辑、修改文件等动作。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#工作区是项目的根目录，不包括.git在内的其他文件</span></span><br><span class="line">$ <span class="built_in">touch</span> filename  <span class="comment">#新建文件  rm filename 删除文件</span></span><br><span class="line">$ git status  <span class="comment">#查看状态</span></span><br><span class="line">$ git add <span class="string">&quot;文件名&quot;</span>  <span class="comment">#将文件提交到暂存区</span></span><br><span class="line">$ git add .  <span class="comment">#添加所有可以添加的文件</span></span><br></pre></td></tr></table></figure><p><strong>2、暂存区（缓存区）：</strong>暂存已经修改的文件最后统一提交到Git仓库中。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#暂存区是一个看不见的区域，git add命令就是将文件添加到该区域，git status命令可以查看当前暂存区的文件。</span></span><br><span class="line">$ git status  <span class="comment">#查看状态</span></span><br><span class="line">$ git commit -m <span class="string">&quot;提交描述&quot;</span>  <span class="comment">#将文件从暂存区提交到仓库</span></span><br></pre></td></tr></table></figure><p><strong>3、Git Repository（本地Git仓库）：</strong>最终确定的文件保存到仓库，成为一个新的版本并且对他人可见。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#本地仓库（repository）：指在工作目录下创建的一个.git目录，这是一个隐藏目录。</span></span><br><span class="line"><span class="comment">#git commit-m&quot;日志&quot; 可以将暂存区的代码提交到本地仓库。git push -u origin master就是将本地仓库的代码推送到远程仓库</span></span><br><span class="line">$ git push  <span class="comment">#将本地仓库提交到远程</span></span><br></pre></td></tr></table></figure><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">git文件的<span class="number">3</span>种状态</span><br><span class="line">。已修改（modified），存在于工作区，文件修改后的状态</span><br><span class="line">。已暂存（staged），存在于暂存区，采用git add命令后的状态</span><br><span class="line">。已提交（committed），存在于本地仓库，采用git commit命令后的状态</span><br></pre></td></tr></table></figure><p><strong>4、远程仓库</strong></p><hr></li><li><h5 id="修改仓库文件（本地仓库）（熟悉Linux命令）"><a href="#修改仓库文件（本地仓库）（熟悉Linux命令）" class="headerlink" title="修改仓库文件（本地仓库）（熟悉Linux命令）"></a>修改仓库文件（本地仓库）（熟悉Linux命令）</h5><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>、vim filename  <span class="comment">//使用vim编辑修改文件</span></span><br><span class="line">   cat filename  <span class="comment">//查看文件内容</span></span><br><span class="line"><span class="number">2</span>、git status</span><br><span class="line">   git add filename  <span class="comment">//添加到暂存区</span></span><br><span class="line"><span class="number">3</span>、git status</span><br><span class="line">   git commit -m <span class="string">&quot;提交描述&quot;</span>  <span class="comment">//</span></span><br></pre></td></tr></table></figure></li><li><h5 id="删除仓库文件（本地仓库）"><a href="#删除仓库文件（本地仓库）" class="headerlink" title="删除仓库文件（本地仓库）"></a>删除仓库文件（本地仓库）</h5><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>、删除文件</span><br><span class="line">    rm -rf filename</span><br><span class="line"><span class="number">2</span>、从Git中删除文件</span><br><span class="line">    git rm filename   </span><br><span class="line"><span class="number">3</span>、提交操作</span><br><span class="line">    git commit -m<span class="string">&quot;提交描述&quot;</span></span><br></pre></td></tr></table></figure></li><li><h4 id="Git管理远程仓库"><a href="#Git管理远程仓库" class="headerlink" title="Git管理远程仓库"></a>Git管理远程仓库</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#第一种方式</span></span><br><span class="line">1、本地创建文件夹执行 $ git init 将文件夹初始化为本地仓库。对本地仓库可以增删改查。</span><br><span class="line">2、在github或gitee上面创建空的仓库壳子</span><br><span class="line">3、git remote add origin &lt;仓库地址&gt;  <span class="comment">#将本地仓库和远程仓库进行关联</span></span><br><span class="line">4、远程仓库与本地仓库合并</span><br><span class="line">先将远程仓库的文件同步到本地一次，否则直接推会报错</span><br><span class="line"> $ git pull --rebase origin master<span class="comment">#表示从远程master分支拉取代码与本地仓库合并。</span></span><br><span class="line">再将本地仓库内容推到远程</span><br><span class="line"> $ git push -u origin master<span class="comment">#push表示推送到远程分支</span></span><br><span class="line"> </span><br><span class="line">$ git push origin master</span><br><span class="line"><span class="comment">#完整写法，远程分支若不存在则会被创建</span></span><br><span class="line">$ git push origin</span><br><span class="line"><span class="comment">#远程仓库与本地仓库 存在 分支最终关系的写法</span></span><br><span class="line">$ git push</span><br><span class="line"><span class="comment">#远程仓库只有一个分支，最简单的写法</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">#第二种方式</span></span><br><span class="line">1、克隆操作  //目的：将远程仓库（github对应的项目）复制到本地</span><br><span class="line">$ git <span class="built_in">clone</span> 仓库地址  //仓库地址在github网页获取  https</span><br><span class="line">2、修改或添加相应的文件</span><br><span class="line">$ <span class="built_in">touch</span> filename          //创建文件</span><br><span class="line">$ git add filename        //添加到暂存区</span><br><span class="line">$ git commit -m<span class="string">&quot;提交描述&quot;</span>  //添加到本地仓库</span><br><span class="line">3、提交到远程仓库</span><br><span class="line">$ git push</span><br><span class="line"></span><br><span class="line">若报错 用户名密码输入：</span><br><span class="line">    $ vi .git/config</span><br><span class="line">将 url = https://github.com/用户名/仓库名.git</span><br><span class="line">(url = https://github.com/ZshLmy/test.git)</span><br><span class="line">修改为</span><br><span class="line">   url = https://用户名:密码@github.com/用户名/仓库名.git</span><br><span class="line"></span><br><span class="line">  https和ssh方法的区别：</span><br><span class="line">         https://blog.csdn.net/u013778905/article/details/83501204</span><br><span class="line">$ ssh-keygen -t rsa -C <span class="string">&quot;email地址&quot;</span>  <span class="comment">#生成钥匙</span></span><br><span class="line"><span class="comment"># 测试github</span></span><br><span class="line">$ ssh -T git@github.com</span><br><span class="line"><span class="comment"># 测试gitee</span></span><br><span class="line">$ ssh -T git@gitee.com</span><br></pre></td></tr></table></figure></li></ol>]]></content>
    
    
    <summary type="html">&lt;p&gt;Git学习笔记&lt;/p&gt;</summary>
    
    
    
    <category term="Git" scheme="http://yoursite.com/categories/Git/"/>
    
    
    <category term="Git" scheme="http://yoursite.com/tags/Git/"/>
    
  </entry>
  
  <entry>
    <title>hexo创建个人博客</title>
    <link href="http://yoursite.com/2020/01/31/hexo%E5%88%9B%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/"/>
    <id>http://yoursite.com/2020/01/31/hexo%E5%88%9B%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/</id>
    <published>2020-01-31T14:10:30.000Z</published>
    <updated>2021-09-14T07:40:32.792Z</updated>
    
    <content type="html"><![CDATA[<p>使用hexo创建个人博客简要教程</p><span id="more"></span><h1 id="hexo创建个人博客"><a href="#hexo创建个人博客" class="headerlink" title="hexo创建个人博客"></a><code>hexo</code>创建个人博客</h1><h2 id="A、安装与基础应用"><a href="#A、安装与基础应用" class="headerlink" title="A、安装与基础应用"></a>A、安装与基础应用</h2><h3 id="1、安装"><a href="#1、安装" class="headerlink" title="1、安装"></a>1、安装</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>、安装git</span><br><span class="line"></span><br><span class="line"><span class="number">2</span>、安装nodejs（安装时会自动安装npm组件）</span><br><span class="line"></span><br><span class="line"><span class="number">3</span>、使用npm安装淘宝镜像cnpm    命令：npm install -g cnpm --registry=https:<span class="comment">//registry.npm.taobao.org</span></span><br><span class="line"></span><br><span class="line"><span class="number">4</span>、使用cnpm安装hexo  命令：cnpm install -g hexo-cli</span><br><span class="line"></span><br></pre></td></tr></table></figure><!--more--><h4 id="正式使用hexo搭建博客"><a href="#正式使用hexo搭建博客" class="headerlink" title="正式使用hexo搭建博客"></a>正式使用<code>hexo</code>搭建博客</h4><p>以下的操作均是在博客文件夹<folder>中</p><h3 id="2、hexo安装完成后即可新建网站"><a href="#2、hexo安装完成后即可新建网站" class="headerlink" title="2、hexo安装完成后即可新建网站"></a>2、<code>hexo</code>安装完成后即可新建网站</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ hexo init &lt;folder&gt;</span><br><span class="line">$ <span class="built_in">cd</span> &lt;folder&gt;</span><br><span class="line">$ cnpm install </span><br><span class="line"><span class="comment">#执行此命令是将package.json指定的依赖包安装到本地的node_modules文件夹下</span></span><br><span class="line"><span class="comment"># 以上三行命令执行后既在folder中建好了网站</span></span><br><span class="line">$ hexo s <span class="comment">#使用该命令预览博客</span></span><br></pre></td></tr></table></figure><h3 id="3、hexo命令"><a href="#3、hexo命令" class="headerlink" title="3、hexo命令"></a>3、<code>hexo</code>命令</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new [layout] &lt;title&gt;</span><br><span class="line"><span class="comment"># 新建一篇文章。如果没有设置 layout 的话，默认使用 _config.yml 中的 default_layout 参数代替。如果标题包含空格的话，请使用引号括起来。例如：hexo new &quot;post title with whitespace&quot;</span></span><br><span class="line"><span class="comment">#新建的博客保存在 ~/source/_posts/文件夹下</span></span><br><span class="line">$ hexo clean</span><br><span class="line"><span class="comment"># 如果修改过文件内容，需要通过如下命令清除已经生成的静态文件，重新生成</span></span><br><span class="line">$ hexo g</span><br><span class="line">$ hexo s <span class="comment">#预览博客</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="4、将博客网站部署到github上"><a href="#4、将博客网站部署到github上" class="headerlink" title="4、将博客网站部署到github上"></a>4、将博客网站部署到<code>github</code>上</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">1、新建仓库，仓库名必须是  github用户名.github.io</span><br><span class="line">2、在博客所在的文件夹下安装 部署插件 $ cnpm install --save hexo-deployer-git</span><br><span class="line">3、配置  _config.yml</span><br><span class="line">    在该文件的最底部Deployment处</span><br><span class="line">    deploy:</span><br><span class="line"><span class="built_in">type</span>: git <span class="comment">#每个冒号后面要加空格 </span></span><br><span class="line">        repo: github https仓库地址</span><br><span class="line">        branch: master</span><br><span class="line">4、部署到github上</span><br><span class="line">     hexo d</span><br></pre></td></tr></table></figure><h3 id="5、主题"><a href="#5、主题" class="headerlink" title="5、主题"></a>5、主题</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">下载主题</span><br><span class="line">$ git <span class="built_in">clone</span> <span class="string">&quot;主题的github地址&quot;</span> themes/<span class="string">&quot;主题名&quot;</span></span><br><span class="line"><span class="comment">#要将主题下载到themes文件夹下</span></span><br><span class="line">将 _config.yml中的theme（在最后几行）改成自己下载的主题即可</span><br><span class="line">    theme:yilia</span><br><span class="line">$ hexo clean</span><br><span class="line">$ hexo g</span><br><span class="line">$ hexo s</span><br><span class="line">$ hexo d <span class="comment">#推到github上  若使用https连接不成功可以使用SSH</span></span><br></pre></td></tr></table></figure><h3 id="6、部署到Gitee"><a href="#6、部署到Gitee" class="headerlink" title="6、部署到Gitee"></a>6、部署到<code>Gitee</code></h3><p><a href="https://blog.csdn.net/Dove88888888/article/details/89027339">https://blog.csdn.net/Dove88888888/article/details/89027339</a></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">1、新建仓库，路径要为个人空间地址名，否则在同时推到gitee和github时会出现乱码</span><br><span class="line">2、在博客所在的文件夹下安装 部署插件 $ cnpm install --save hexo-deployer-git</span><br><span class="line">3、配置  _config.yml</span><br><span class="line">    在该文件的最底部Deployment处</span><br><span class="line">    deploy: </span><br><span class="line"><span class="built_in">type</span>: git <span class="comment">#每个冒号后面要加空格</span></span><br><span class="line">        repo: gitee https仓库地址</span><br><span class="line">        branch: master</span><br><span class="line">4、部署到github上</span><br><span class="line">     hexo d</span><br></pre></td></tr></table></figure><h2 id="B、hexo进阶设置"><a href="#B、hexo进阶设置" class="headerlink" title="B、hexo进阶设置"></a>B、<code>hexo</code>进阶设置</h2><h3 id="初始化文件的含义"><a href="#初始化文件的含义" class="headerlink" title="初始化文件的含义"></a>初始化文件的含义</h3><h4 id="1、node-modlues"><a href="#1、node-modlues" class="headerlink" title="1、node_modlues"></a>1、<code>node_modlues</code></h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 存放 node依赖包 的文件夹，在js文件中可以直接导入使用其中的依赖包</span></span><br><span class="line"><span class="comment"># 运行</span></span><br><span class="line">$ npm install <span class="comment">#指令时会将package.json中dependencies(依赖包)的内容下载到该文件夹下。</span></span><br></pre></td></tr></table></figure><h4 id="2、-config-yml"><a href="#2、-config-yml" class="headerlink" title="2、_config.yml"></a>2、<code>_config.yml</code></h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">配置文件，可在该文件中配置大部分的参数。包括标题，作者，叙述，主题等等</span></span><br></pre></td></tr></table></figure><h4 id="3、scaffolds"><a href="#3、scaffolds" class="headerlink" title="3、scaffolds"></a>3、<code>scaffolds</code></h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 模板文件夹，会在写入的文章中默认填充的一些内容。</span></span><br></pre></td></tr></table></figure><h4 id="4、source"><a href="#4、source" class="headerlink" title="4、source"></a>4、<code>source</code></h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 存放用户资源的地方，_posts中就存放着我们写的文章。</span></span><br></pre></td></tr></table></figure><h4 id="5、themes"><a href="#5、themes" class="headerlink" title="5、themes"></a>5、<code>themes</code></h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#  主题文件夹，hexo会根据这个文件夹来生成静态页面。我们可以看到初始化后themes文件夹下有一个landscape文件夹，这就是我们现在默认使用的主题，这个配置在_config.yml里面进行配置</span></span><br></pre></td></tr></table></figure><h4 id="6、db-json"><a href="#6、db-json" class="headerlink" title="6、db.json"></a>6、<code>db.json</code></h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 可以用于对文件的管理。</span></span><br></pre></td></tr></table></figure><h3 id="文件的打包"><a href="#文件的打包" class="headerlink" title="文件的打包"></a>文件的打包</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">实际上就是生成静态文件，`hexo`使用`hexo generate`来完成这个工作，可以简写为`hexo g`</span><br><span class="line"></span><br><span class="line">静态文件是放在`public`文件夹中的，里面的内容是根据`<span class="built_in">source</span>`里面写的内容来打包的。</span><br></pre></td></tr></table></figure><h2 id="C、踩过的坑"><a href="#C、踩过的坑" class="headerlink" title="C、踩过的坑"></a>C、踩过的坑</h2><ol><li><p>若想要同时部署到<code>gitee</code>和<code>github</code>可以通过修改<code>_config.yml</code>文件实现。但如果码云建仓库的时候路径名不是自己的个人空间地址名时就不能正确显示样式。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Deployment</span></span><br><span class="line"><span class="comment">## Docs: https://hexo.io/docs/deployment.html</span></span><br><span class="line">deploy:</span><br><span class="line">  <span class="built_in">type</span>: git</span><br><span class="line">  repo: git@github.com:Likianta/likianta.github.io.git</span><br><span class="line">  repo: git@git.coding.net:Likianta/likianta.git <span class="comment"># 网址的大小写不限制</span></span><br><span class="line">  branch: master</span><br></pre></td></tr></table></figure></li><li><p>部署到码云后，样式消失</p><p>码云官方文档：<a href="https://gitee.com/help/articles/4136#article-header1">https://gitee.com/help/articles/4136#article-header1</a></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">只要码云上博客的路径名是码云的个人空间地址名就不会出现这种情况</span></span><br><span class="line"><span class="comment"># 找到配置文件编辑 _config.yml</span></span><br><span class="line"><span class="comment"># root对应的值是编译跳转路径，将root值改成跟你码云里建仓库时的路径名一样就可以了，root默认值是 /</span></span><br><span class="line"><span class="attr">root:</span> <span class="string">/ZLBlog/</span> <span class="comment">#/</span></span><br><span class="line"><span class="string">备注：同时部署到gitee和github的时候root值保持默认即可。但只有当码云上博客的路径名是码云的个人空间地址名时部署到码云的博客才不会出现样式无法显示的情况</span></span><br></pre></td></tr></table></figure></li><li><p>全文显示问题。首页的文字一次性进行了全文显示，我们希望只显示一部分只需要在文字的中间加上<code>&lt;!--more--&gt;</code></p></li></ol><p><code>Hexo</code>搭建博客问题记录：<a href="https://zydarchen.gitee.io/20170707/4_hello_blog/">https://zydarchen.gitee.io/20170707/4_hello_blog/</a></p><p><code>CDN</code>加速博客：<a href="https://zydarchen.gitlab.io/20190417/27_cdn_for_hexo/">https://zydarchen.gitlab.io/20190417/27_cdn_for_hexo/</a></p><h2 id="D、next主题"><a href="#D、next主题" class="headerlink" title="D、next主题"></a>D、next主题</h2><p>更改配置文件的时候可以不clean、generate直接<code>hexo s</code></p><h3 id="标签-tags"><a href="#标签-tags" class="headerlink" title="标签 tags"></a>标签 <code>tags</code></h3><h3 id="分类categories"><a href="#分类categories" class="headerlink" title="分类categories"></a>分类<code>categories</code></h3><h3 id="Social-Media"><a href="#Social-Media" class="headerlink" title="Social Media"></a><code>Social Media</code></h3><h3 id="RSS"><a href="#RSS" class="headerlink" title="RSS"></a><code>RSS</code></h3><h3 id="使用Justified-Gallery创建相册"><a href="#使用Justified-Gallery创建相册" class="headerlink" title="使用Justified Gallery创建相册"></a>使用Justified Gallery创建相册</h3>]]></content>
    
    
    <summary type="html">&lt;p&gt;使用hexo创建个人博客简要教程&lt;/p&gt;</summary>
    
    
    
    <category term="hexo" scheme="http://yoursite.com/categories/hexo/"/>
    
    
    <category term="hexo" scheme="http://yoursite.com/tags/hexo/"/>
    
  </entry>
  
</feed>
